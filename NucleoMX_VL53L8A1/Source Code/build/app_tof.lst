ARM GAS  C:\Temp\ccuPsKVP.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"app_tof.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "TOF/App/app_tof.c"
  20              		.section	.text.com_has_data,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	com_has_data:
  27              	.LFB148:
   1:TOF/App/app_tof.c **** /**
   2:TOF/App/app_tof.c ****   ******************************************************************************
   3:TOF/App/app_tof.c ****   * @file          : app_tof.c
   4:TOF/App/app_tof.c ****   * @author        : IMG SW Application Team
   5:TOF/App/app_tof.c ****   * @brief         : This file provides code for the configuration
   6:TOF/App/app_tof.c ****   *                  of the STMicroelectronics.X-CUBE-TOF1.3.4.2 instances.
   7:TOF/App/app_tof.c ****   ******************************************************************************
   8:TOF/App/app_tof.c ****   *
   9:TOF/App/app_tof.c ****   * @attention
  10:TOF/App/app_tof.c ****   *
  11:TOF/App/app_tof.c ****   * Copyright (c) 2023 STMicroelectronics.
  12:TOF/App/app_tof.c ****   * All rights reserved.
  13:TOF/App/app_tof.c ****   *
  14:TOF/App/app_tof.c ****   * This software is licensed under terms that can be found in the LICENSE file
  15:TOF/App/app_tof.c ****   * in the root directory of this software component.
  16:TOF/App/app_tof.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  17:TOF/App/app_tof.c ****   *
  18:TOF/App/app_tof.c ****   ******************************************************************************
  19:TOF/App/app_tof.c ****   */
  20:TOF/App/app_tof.c **** 
  21:TOF/App/app_tof.c **** #ifdef __cplusplus
  22:TOF/App/app_tof.c **** extern "C" {
  23:TOF/App/app_tof.c **** #endif
  24:TOF/App/app_tof.c **** 
  25:TOF/App/app_tof.c **** /* Includes ------------------------------------------------------------------*/
  26:TOF/App/app_tof.c **** #include "app_tof.h"
  27:TOF/App/app_tof.c **** #include "main.h"
  28:TOF/App/app_tof.c **** #include <stdio.h>
  29:TOF/App/app_tof.c **** 
  30:TOF/App/app_tof.c **** #include "53l8a1_ranging_sensor.h"
  31:TOF/App/app_tof.c **** #include "app_tof_pin_conf.h"
ARM GAS  C:\Temp\ccuPsKVP.s 			page 2


  32:TOF/App/app_tof.c **** #include "stm32f4xx_nucleo.h"
  33:TOF/App/app_tof.c **** 
  34:TOF/App/app_tof.c **** /* Private typedef -----------------------------------------------------------*/
  35:TOF/App/app_tof.c **** 
  36:TOF/App/app_tof.c **** /* Private define ------------------------------------------------------------*/
  37:TOF/App/app_tof.c **** #define TIMING_BUDGET (30U) /* 5 ms < TimingBudget < 100 ms */
  38:TOF/App/app_tof.c **** #define RANGING_FREQUENCY (10U) /* Ranging frequency Hz (shall be consistent with TimingBudget valu
  39:TOF/App/app_tof.c **** #define POLLING_PERIOD (1)
  40:TOF/App/app_tof.c **** 
  41:TOF/App/app_tof.c **** /* Private variables ---------------------------------------------------------*/
  42:TOF/App/app_tof.c **** static RANGING_SENSOR_Capabilities_t Cap;
  43:TOF/App/app_tof.c **** static RANGING_SENSOR_ProfileConfig_t Profile;
  44:TOF/App/app_tof.c **** static RANGING_SENSOR_Result_t Result;
  45:TOF/App/app_tof.c **** static int32_t status = 0;
  46:TOF/App/app_tof.c **** static volatile uint8_t PushButtonDetected = 0;
  47:TOF/App/app_tof.c **** volatile uint8_t ToF_EventDetected = 0;
  48:TOF/App/app_tof.c **** 
  49:TOF/App/app_tof.c **** /* Private function prototypes -----------------------------------------------*/
  50:TOF/App/app_tof.c **** static void MX_53L8A1_SimpleRanging_Init(void);
  51:TOF/App/app_tof.c **** static void MX_53L8A1_SimpleRanging_Process(void);
  52:TOF/App/app_tof.c **** static void print_result(RANGING_SENSOR_Result_t *Result);
  53:TOF/App/app_tof.c **** static void toggle_resolution(void);
  54:TOF/App/app_tof.c **** static void toggle_signal_and_ambient(void);
  55:TOF/App/app_tof.c **** static void clear_screen(void);
  56:TOF/App/app_tof.c **** static void display_commands_banner(void);
  57:TOF/App/app_tof.c **** static void handle_cmd(uint8_t cmd);
  58:TOF/App/app_tof.c **** static uint8_t get_key(void);
  59:TOF/App/app_tof.c **** static uint32_t com_has_data(void);
  60:TOF/App/app_tof.c **** 
  61:TOF/App/app_tof.c **** void MX_TOF_Init(void)
  62:TOF/App/app_tof.c **** {
  63:TOF/App/app_tof.c ****   /* USER CODE BEGIN SV */
  64:TOF/App/app_tof.c **** 
  65:TOF/App/app_tof.c ****   /* USER CODE END SV */
  66:TOF/App/app_tof.c **** 
  67:TOF/App/app_tof.c ****   /* USER CODE BEGIN TOF_Init_PreTreatment */
  68:TOF/App/app_tof.c **** 
  69:TOF/App/app_tof.c ****   /* USER CODE END TOF_Init_PreTreatment */
  70:TOF/App/app_tof.c **** 
  71:TOF/App/app_tof.c ****   /* Initialize the peripherals and the TOF components */
  72:TOF/App/app_tof.c **** 
  73:TOF/App/app_tof.c ****   MX_53L8A1_SimpleRanging_Init();
  74:TOF/App/app_tof.c **** 
  75:TOF/App/app_tof.c ****   /* USER CODE BEGIN TOF_Init_PostTreatment */
  76:TOF/App/app_tof.c **** 
  77:TOF/App/app_tof.c ****   /* USER CODE END TOF_Init_PostTreatment */
  78:TOF/App/app_tof.c **** }
  79:TOF/App/app_tof.c **** 
  80:TOF/App/app_tof.c **** /*
  81:TOF/App/app_tof.c ****  * LM background task
  82:TOF/App/app_tof.c ****  */
  83:TOF/App/app_tof.c **** void MX_TOF_Process(void)
  84:TOF/App/app_tof.c **** {
  85:TOF/App/app_tof.c ****   /* USER CODE BEGIN TOF_Process_PreTreatment */
  86:TOF/App/app_tof.c **** 
  87:TOF/App/app_tof.c ****   /* USER CODE END TOF_Process_PreTreatment */
  88:TOF/App/app_tof.c **** 
ARM GAS  C:\Temp\ccuPsKVP.s 			page 3


  89:TOF/App/app_tof.c ****   MX_53L8A1_SimpleRanging_Process();
  90:TOF/App/app_tof.c **** 
  91:TOF/App/app_tof.c ****   /* USER CODE BEGIN TOF_Process_PostTreatment */
  92:TOF/App/app_tof.c **** 
  93:TOF/App/app_tof.c ****   /* USER CODE END TOF_Process_PostTreatment */
  94:TOF/App/app_tof.c **** }
  95:TOF/App/app_tof.c **** 
  96:TOF/App/app_tof.c **** static void MX_53L8A1_SimpleRanging_Init(void)
  97:TOF/App/app_tof.c **** {
  98:TOF/App/app_tof.c ****   /* Initialize Virtual COM Port */
  99:TOF/App/app_tof.c ****   BSP_COM_Init(COM1);
 100:TOF/App/app_tof.c **** 
 101:TOF/App/app_tof.c ****   /* Initialize button */
 102:TOF/App/app_tof.c ****   BSP_PB_Init(BUTTON_KEY, BUTTON_MODE_EXTI);
 103:TOF/App/app_tof.c **** 
 104:TOF/App/app_tof.c ****   /* Sensor reset */
 105:TOF/App/app_tof.c ****   HAL_GPIO_WritePin(VL53L8A1_PWR_EN_C_PORT, VL53L8A1_PWR_EN_C_PIN, GPIO_PIN_RESET);
 106:TOF/App/app_tof.c ****   HAL_Delay(2);
 107:TOF/App/app_tof.c ****   HAL_GPIO_WritePin(VL53L8A1_PWR_EN_C_PORT, VL53L8A1_PWR_EN_C_PIN, GPIO_PIN_SET);
 108:TOF/App/app_tof.c ****   HAL_Delay(2);
 109:TOF/App/app_tof.c ****   HAL_GPIO_WritePin(VL53L8A1_LPn_C_PORT, VL53L8A1_LPn_C_PIN, GPIO_PIN_RESET);
 110:TOF/App/app_tof.c ****   HAL_Delay(2);
 111:TOF/App/app_tof.c ****   HAL_GPIO_WritePin(VL53L8A1_LPn_C_PORT, VL53L8A1_LPn_C_PIN, GPIO_PIN_SET);
 112:TOF/App/app_tof.c ****   HAL_Delay(2);
 113:TOF/App/app_tof.c **** 
 114:TOF/App/app_tof.c ****   printf("\033[2H\033[2J");
 115:TOF/App/app_tof.c ****   printf("53L8A1 Simple Ranging demo application\n");
 116:TOF/App/app_tof.c ****   printf("Sensor initialization...\n");
 117:TOF/App/app_tof.c **** 
 118:TOF/App/app_tof.c ****   status = VL53L8A1_RANGING_SENSOR_Init(VL53L8A1_DEV_CENTER);
 119:TOF/App/app_tof.c **** 
 120:TOF/App/app_tof.c ****   if (status != BSP_ERROR_NONE)
 121:TOF/App/app_tof.c ****   {
 122:TOF/App/app_tof.c ****     printf("VL53L8A1_RANGING_SENSOR_Init failed\n");
 123:TOF/App/app_tof.c ****     while (1);
 124:TOF/App/app_tof.c ****   }
 125:TOF/App/app_tof.c **** }
 126:TOF/App/app_tof.c **** 
 127:TOF/App/app_tof.c **** static void MX_53L8A1_SimpleRanging_Process(void)
 128:TOF/App/app_tof.c **** {
 129:TOF/App/app_tof.c ****   uint32_t Id;
 130:TOF/App/app_tof.c **** 
 131:TOF/App/app_tof.c ****   /*these are the default values for xtalk calibration, update them if needed */
 132:TOF/App/app_tof.c ****   uint16_t reflectance = 16; /* expressed in percent (%) - range 0% - 99% */
 133:TOF/App/app_tof.c ****   uint16_t cal_distance = 600; /* expressed in millimiters (mm) / range 600 mm - 3000 mm*/
 134:TOF/App/app_tof.c **** 
 135:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_ReadID(VL53L8A1_DEV_CENTER, &Id);
 136:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_GetCapabilities(VL53L8A1_DEV_CENTER, &Cap);
 137:TOF/App/app_tof.c **** 
 138:TOF/App/app_tof.c ****   Profile.RangingProfile = RS_PROFILE_4x4_CONTINUOUS;
 139:TOF/App/app_tof.c ****   Profile.TimingBudget = TIMING_BUDGET;
 140:TOF/App/app_tof.c ****   Profile.Frequency = RANGING_FREQUENCY; /* Ranging frequency Hz (shall be consistent with TimingBu
 141:TOF/App/app_tof.c ****   Profile.EnableAmbient = 0; /* Enable: 1, Disable: 0 */
 142:TOF/App/app_tof.c ****   Profile.EnableSignal = 0; /* Enable: 1, Disable: 0 */
 143:TOF/App/app_tof.c **** 
 144:TOF/App/app_tof.c ****   /* set the profile if different from default one */
 145:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_ConfigProfile(VL53L8A1_DEV_CENTER, &Profile);
ARM GAS  C:\Temp\ccuPsKVP.s 			page 4


 146:TOF/App/app_tof.c **** 
 147:TOF/App/app_tof.c ****   printf("--- XTALK CALIBRATION ---\n");
 148:TOF/App/app_tof.c ****   printf("Put a target with %u %% reflectance at %u mm\n", reflectance, cal_distance);
 149:TOF/App/app_tof.c ****   printf("Press the user button to continue...\n");
 150:TOF/App/app_tof.c **** 
 151:TOF/App/app_tof.c ****   /* wait until the button is pressed */
 152:TOF/App/app_tof.c ****   while (PushButtonDetected != 1);
 153:TOF/App/app_tof.c ****   PushButtonDetected = 0;
 154:TOF/App/app_tof.c **** 
 155:TOF/App/app_tof.c ****   printf("--- BEGIN XTALK CALIBRATION ---\n");
 156:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_XTalkCalibration(VL53L8A1_DEV_CENTER, reflectance, cal_distance);
 157:TOF/App/app_tof.c ****   printf("--- END OF XTALK CALIBRATION ---\n");
 158:TOF/App/app_tof.c **** 
 159:TOF/App/app_tof.c ****   status = VL53L8A1_RANGING_SENSOR_Start(VL53L8A1_DEV_CENTER, RS_MODE_ASYNC_CONTINUOUS);
 160:TOF/App/app_tof.c **** 
 161:TOF/App/app_tof.c ****   if (status != BSP_ERROR_NONE)
 162:TOF/App/app_tof.c ****   {
 163:TOF/App/app_tof.c ****     printf("VL53L8A1_RANGING_SENSOR_Start failed\n");
 164:TOF/App/app_tof.c ****     while (1);
 165:TOF/App/app_tof.c ****   }
 166:TOF/App/app_tof.c **** 
 167:TOF/App/app_tof.c ****   while (1)
 168:TOF/App/app_tof.c ****   {
 169:TOF/App/app_tof.c ****     /* interrupt mode */
 170:TOF/App/app_tof.c ****     if (ToF_EventDetected != 0)
 171:TOF/App/app_tof.c ****     {
 172:TOF/App/app_tof.c ****       ToF_EventDetected = 0;
 173:TOF/App/app_tof.c **** 
 174:TOF/App/app_tof.c ****       status = VL53L8A1_RANGING_SENSOR_GetDistance(VL53L8A1_DEV_CENTER, &Result);
 175:TOF/App/app_tof.c **** 
 176:TOF/App/app_tof.c ****       if (status == BSP_ERROR_NONE)
 177:TOF/App/app_tof.c ****       {
 178:TOF/App/app_tof.c ****         print_result(&Result);
 179:TOF/App/app_tof.c ****       }
 180:TOF/App/app_tof.c ****     }
 181:TOF/App/app_tof.c ****     if (com_has_data())
 182:TOF/App/app_tof.c ****     {
 183:TOF/App/app_tof.c ****       handle_cmd(get_key());
 184:TOF/App/app_tof.c ****     }
 185:TOF/App/app_tof.c ****   }
 186:TOF/App/app_tof.c **** }
 187:TOF/App/app_tof.c **** 
 188:TOF/App/app_tof.c **** static void print_result(RANGING_SENSOR_Result_t *Result)
 189:TOF/App/app_tof.c **** {
 190:TOF/App/app_tof.c ****   int8_t i;
 191:TOF/App/app_tof.c ****   int8_t j;
 192:TOF/App/app_tof.c ****   int8_t k;
 193:TOF/App/app_tof.c ****   int8_t l;
 194:TOF/App/app_tof.c ****   uint8_t zones_per_line;
 195:TOF/App/app_tof.c **** 
 196:TOF/App/app_tof.c ****   zones_per_line = ((Profile.RangingProfile == RS_PROFILE_8x8_AUTONOMOUS) ||
 197:TOF/App/app_tof.c ****                     (Profile.RangingProfile == RS_PROFILE_8x8_CONTINUOUS)) ? 8 : 4;
 198:TOF/App/app_tof.c **** 
 199:TOF/App/app_tof.c ****   display_commands_banner();
 200:TOF/App/app_tof.c **** 
 201:TOF/App/app_tof.c ****   printf("Cell Format :\n\n");
 202:TOF/App/app_tof.c ****   for (l = 0; l < RANGING_SENSOR_NB_TARGET_PER_ZONE; l++)
ARM GAS  C:\Temp\ccuPsKVP.s 			page 5


 203:TOF/App/app_tof.c ****   {
 204:TOF/App/app_tof.c ****     printf(" \033[38;5;10m%20s\033[0m : %20s\n", "Distance [mm]", "Status");
 205:TOF/App/app_tof.c ****     if ((Profile.EnableAmbient != 0) || (Profile.EnableSignal != 0))
 206:TOF/App/app_tof.c ****     {
 207:TOF/App/app_tof.c ****       printf(" %20s : %20s\n", "Signal [kcps/spad]", "Ambient [kcps/spad]");
 208:TOF/App/app_tof.c ****     }
 209:TOF/App/app_tof.c ****   }
 210:TOF/App/app_tof.c **** 
 211:TOF/App/app_tof.c ****   printf("\n\n");
 212:TOF/App/app_tof.c **** 
 213:TOF/App/app_tof.c ****   for (j = 0; j < Result->NumberOfZones; j += zones_per_line)
 214:TOF/App/app_tof.c ****   {
 215:TOF/App/app_tof.c ****     for (i = 0; i < zones_per_line; i++) /* number of zones per line */
 216:TOF/App/app_tof.c ****     {
 217:TOF/App/app_tof.c ****       printf(" -----------------");
 218:TOF/App/app_tof.c ****     }
 219:TOF/App/app_tof.c ****     printf("\n");
 220:TOF/App/app_tof.c **** 
 221:TOF/App/app_tof.c ****     for (i = 0; i < zones_per_line; i++)
 222:TOF/App/app_tof.c ****     {
 223:TOF/App/app_tof.c ****       printf("|                 ");
 224:TOF/App/app_tof.c ****     }
 225:TOF/App/app_tof.c ****     printf("|\n");
 226:TOF/App/app_tof.c **** 
 227:TOF/App/app_tof.c ****     for (l = 0; l < RANGING_SENSOR_NB_TARGET_PER_ZONE; l++)
 228:TOF/App/app_tof.c ****     {
 229:TOF/App/app_tof.c ****       /* Print distance and status */
 230:TOF/App/app_tof.c ****       for (k = (zones_per_line - 1); k >= 0; k--)
 231:TOF/App/app_tof.c ****       {
 232:TOF/App/app_tof.c ****         if (Result->ZoneResult[j + k].NumberOfTargets > 0)
 233:TOF/App/app_tof.c ****           printf("| \033[38;5;10m%5ld\033[0m  :  %5ld ",
 234:TOF/App/app_tof.c ****                  (long)Result->ZoneResult[j + k].Distance[l],
 235:TOF/App/app_tof.c ****                  (long)Result->ZoneResult[j + k].Status[l]);
 236:TOF/App/app_tof.c ****         else
 237:TOF/App/app_tof.c ****           printf("| %5s  :  %5s ", "X", "X");
 238:TOF/App/app_tof.c ****       }
 239:TOF/App/app_tof.c ****       printf("|\n");
 240:TOF/App/app_tof.c **** 
 241:TOF/App/app_tof.c ****       if ((Profile.EnableAmbient != 0) || (Profile.EnableSignal != 0))
 242:TOF/App/app_tof.c ****       {
 243:TOF/App/app_tof.c ****         /* Print Signal and Ambient */
 244:TOF/App/app_tof.c ****         for (k = (zones_per_line - 1); k >= 0; k--)
 245:TOF/App/app_tof.c ****         {
 246:TOF/App/app_tof.c ****           if (Result->ZoneResult[j + k].NumberOfTargets > 0)
 247:TOF/App/app_tof.c ****           {
 248:TOF/App/app_tof.c ****             if (Profile.EnableSignal != 0)
 249:TOF/App/app_tof.c ****             {
 250:TOF/App/app_tof.c ****               printf("| %5ld  :  ", (long)Result->ZoneResult[j + k].Signal[l]);
 251:TOF/App/app_tof.c ****             }
 252:TOF/App/app_tof.c ****             else
 253:TOF/App/app_tof.c ****               printf("| %5s  :  ", "X");
 254:TOF/App/app_tof.c **** 
 255:TOF/App/app_tof.c ****             if (Profile.EnableAmbient != 0)
 256:TOF/App/app_tof.c ****             {
 257:TOF/App/app_tof.c ****               printf("%5ld ", (long)Result->ZoneResult[j + k].Ambient[l]);
 258:TOF/App/app_tof.c ****             }
 259:TOF/App/app_tof.c ****             else
ARM GAS  C:\Temp\ccuPsKVP.s 			page 6


 260:TOF/App/app_tof.c ****               printf("%5s ", "X");
 261:TOF/App/app_tof.c ****           }
 262:TOF/App/app_tof.c ****           else
 263:TOF/App/app_tof.c ****             printf("| %5s  :  %5s ", "X", "X");
 264:TOF/App/app_tof.c ****         }
 265:TOF/App/app_tof.c ****         printf("|\n");
 266:TOF/App/app_tof.c ****       }
 267:TOF/App/app_tof.c ****     }
 268:TOF/App/app_tof.c ****   }
 269:TOF/App/app_tof.c **** 
 270:TOF/App/app_tof.c ****   for (i = 0; i < zones_per_line; i++)
 271:TOF/App/app_tof.c ****   {
 272:TOF/App/app_tof.c ****     printf(" -----------------");
 273:TOF/App/app_tof.c ****   }
 274:TOF/App/app_tof.c ****   printf("\n");
 275:TOF/App/app_tof.c **** }
 276:TOF/App/app_tof.c **** 
 277:TOF/App/app_tof.c **** static void toggle_resolution(void)
 278:TOF/App/app_tof.c **** {
 279:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_Stop(VL53L8A1_DEV_CENTER);
 280:TOF/App/app_tof.c **** 
 281:TOF/App/app_tof.c ****   switch (Profile.RangingProfile)
 282:TOF/App/app_tof.c ****   {
 283:TOF/App/app_tof.c ****     case RS_PROFILE_4x4_AUTONOMOUS:
 284:TOF/App/app_tof.c ****       Profile.RangingProfile = RS_PROFILE_8x8_AUTONOMOUS;
 285:TOF/App/app_tof.c ****       break;
 286:TOF/App/app_tof.c **** 
 287:TOF/App/app_tof.c ****     case RS_PROFILE_4x4_CONTINUOUS:
 288:TOF/App/app_tof.c ****       Profile.RangingProfile = RS_PROFILE_8x8_CONTINUOUS;
 289:TOF/App/app_tof.c ****       break;
 290:TOF/App/app_tof.c **** 
 291:TOF/App/app_tof.c ****     case RS_PROFILE_8x8_AUTONOMOUS:
 292:TOF/App/app_tof.c ****       Profile.RangingProfile = RS_PROFILE_4x4_AUTONOMOUS;
 293:TOF/App/app_tof.c ****       break;
 294:TOF/App/app_tof.c **** 
 295:TOF/App/app_tof.c ****     case RS_PROFILE_8x8_CONTINUOUS:
 296:TOF/App/app_tof.c ****       Profile.RangingProfile = RS_PROFILE_4x4_CONTINUOUS;
 297:TOF/App/app_tof.c ****       break;
 298:TOF/App/app_tof.c **** 
 299:TOF/App/app_tof.c ****     default:
 300:TOF/App/app_tof.c ****       break;
 301:TOF/App/app_tof.c ****   }
 302:TOF/App/app_tof.c **** 
 303:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_ConfigProfile(VL53L8A1_DEV_CENTER, &Profile);
 304:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_Start(VL53L8A1_DEV_CENTER, RS_MODE_ASYNC_CONTINUOUS);
 305:TOF/App/app_tof.c **** }
 306:TOF/App/app_tof.c **** 
 307:TOF/App/app_tof.c **** static void toggle_signal_and_ambient(void)
 308:TOF/App/app_tof.c **** {
 309:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_Stop(VL53L8A1_DEV_CENTER);
 310:TOF/App/app_tof.c **** 
 311:TOF/App/app_tof.c ****   Profile.EnableAmbient = (Profile.EnableAmbient) ? 0U : 1U;
 312:TOF/App/app_tof.c ****   Profile.EnableSignal = (Profile.EnableSignal) ? 0U : 1U;
 313:TOF/App/app_tof.c **** 
 314:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_ConfigProfile(VL53L8A1_DEV_CENTER, &Profile);
 315:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_Start(VL53L8A1_DEV_CENTER, RS_MODE_ASYNC_CONTINUOUS);
 316:TOF/App/app_tof.c **** }
ARM GAS  C:\Temp\ccuPsKVP.s 			page 7


 317:TOF/App/app_tof.c **** 
 318:TOF/App/app_tof.c **** static void clear_screen(void)
 319:TOF/App/app_tof.c **** {
 320:TOF/App/app_tof.c ****   printf("%c[2J", 27); /* 27 is ESC command */
 321:TOF/App/app_tof.c **** }
 322:TOF/App/app_tof.c **** 
 323:TOF/App/app_tof.c **** static void display_commands_banner(void)
 324:TOF/App/app_tof.c **** {
 325:TOF/App/app_tof.c ****   /* clear screen */
 326:TOF/App/app_tof.c ****   printf("%c[2H", 27);
 327:TOF/App/app_tof.c **** 
 328:TOF/App/app_tof.c ****   printf("53L8A1 Simple Ranging demo application\n");
 329:TOF/App/app_tof.c ****   printf("--------------------------------------\n\n");
 330:TOF/App/app_tof.c **** 
 331:TOF/App/app_tof.c ****   printf("Use the following keys to control application\n");
 332:TOF/App/app_tof.c ****   printf(" 'r' : change resolution\n");
 333:TOF/App/app_tof.c ****   printf(" 's' : enable signal and ambient\n");
 334:TOF/App/app_tof.c ****   printf(" 'c' : clear screen\n");
 335:TOF/App/app_tof.c ****   printf("\n");
 336:TOF/App/app_tof.c **** }
 337:TOF/App/app_tof.c **** 
 338:TOF/App/app_tof.c **** static void handle_cmd(uint8_t cmd)
 339:TOF/App/app_tof.c **** {
 340:TOF/App/app_tof.c ****   switch (cmd)
 341:TOF/App/app_tof.c ****   {
 342:TOF/App/app_tof.c ****     case 'r':
 343:TOF/App/app_tof.c ****       toggle_resolution();
 344:TOF/App/app_tof.c ****       clear_screen();
 345:TOF/App/app_tof.c ****       break;
 346:TOF/App/app_tof.c **** 
 347:TOF/App/app_tof.c ****     case 's':
 348:TOF/App/app_tof.c ****       toggle_signal_and_ambient();
 349:TOF/App/app_tof.c ****       clear_screen();
 350:TOF/App/app_tof.c ****       break;
 351:TOF/App/app_tof.c **** 
 352:TOF/App/app_tof.c ****     case 'c':
 353:TOF/App/app_tof.c ****       clear_screen();
 354:TOF/App/app_tof.c ****       break;
 355:TOF/App/app_tof.c **** 
 356:TOF/App/app_tof.c ****     default:
 357:TOF/App/app_tof.c ****       break;
 358:TOF/App/app_tof.c ****   }
 359:TOF/App/app_tof.c **** }
 360:TOF/App/app_tof.c **** 
 361:TOF/App/app_tof.c **** static uint8_t get_key(void)
 362:TOF/App/app_tof.c **** {
 363:TOF/App/app_tof.c ****   uint8_t cmd = 0;
 364:TOF/App/app_tof.c **** 
 365:TOF/App/app_tof.c ****   HAL_UART_Receive(&hcom_uart[COM1], &cmd, 1, HAL_MAX_DELAY);
 366:TOF/App/app_tof.c **** 
 367:TOF/App/app_tof.c ****   return cmd;
 368:TOF/App/app_tof.c **** }
 369:TOF/App/app_tof.c **** 
 370:TOF/App/app_tof.c **** static uint32_t com_has_data(void)
 371:TOF/App/app_tof.c **** {
  28              		.loc 1 371 1 view -0
  29              		.cfi_startproc
ARM GAS  C:\Temp\ccuPsKVP.s 			page 8


  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 372:TOF/App/app_tof.c ****   return __HAL_UART_GET_FLAG(&hcom_uart[COM1], UART_FLAG_RXNE);;
  33              		.loc 1 372 3 view .LVU1
  34              		.loc 1 372 10 is_stmt 0 view .LVU2
  35 0000 024B     		ldr	r3, .L2
  36 0002 1B68     		ldr	r3, [r3]
  37 0004 1868     		ldr	r0, [r3]
  38              		.loc 1 372 64 is_stmt 1 view .LVU3
 373:TOF/App/app_tof.c **** }
  39              		.loc 1 373 1 is_stmt 0 view .LVU4
  40 0006 C0F34010 		ubfx	r0, r0, #5, #1
  41 000a 7047     		bx	lr
  42              	.L3:
  43              		.align	2
  44              	.L2:
  45 000c 00000000 		.word	hcom_uart
  46              		.cfi_endproc
  47              	.LFE148:
  49              		.section	.rodata.clear_screen.str1.4,"aMS",%progbits,1
  50              		.align	2
  51              	.LC0:
  52 0000 25635B32 		.ascii	"%c[2J\000"
  52      4A00
  53              		.section	.text.clear_screen,"ax",%progbits
  54              		.align	1
  55              		.syntax unified
  56              		.thumb
  57              		.thumb_func
  59              	clear_screen:
  60              	.LFB144:
 319:TOF/App/app_tof.c ****   printf("%c[2J", 27); /* 27 is ESC command */
  61              		.loc 1 319 1 is_stmt 1 view -0
  62              		.cfi_startproc
  63              		@ args = 0, pretend = 0, frame = 0
  64              		@ frame_needed = 0, uses_anonymous_args = 0
  65 0000 08B5     		push	{r3, lr}
  66              		.cfi_def_cfa_offset 8
  67              		.cfi_offset 3, -8
  68              		.cfi_offset 14, -4
 320:TOF/App/app_tof.c **** }
  69              		.loc 1 320 3 view .LVU6
  70 0002 1B21     		movs	r1, #27
  71 0004 0148     		ldr	r0, .L6
  72 0006 FFF7FEFF 		bl	printf
  73              	.LVL0:
 321:TOF/App/app_tof.c **** 
  74              		.loc 1 321 1 is_stmt 0 view .LVU7
  75 000a 08BD     		pop	{r3, pc}
  76              	.L7:
  77              		.align	2
  78              	.L6:
  79 000c 00000000 		.word	.LC0
  80              		.cfi_endproc
  81              	.LFE144:
  83              		.section	.rodata.MX_53L8A1_SimpleRanging_Init.str1.4,"aMS",%progbits,1
ARM GAS  C:\Temp\ccuPsKVP.s 			page 9


  84              		.align	2
  85              	.LC1:
  86 0000 1B5B3248 		.ascii	"\033[2H\033[2J\000"
  86      1B5B324A 
  86      00
  87 0009 000000   		.align	2
  88              	.LC2:
  89 000c 35334C38 		.ascii	"53L8A1 Simple Ranging demo application\000"
  89      41312053 
  89      696D706C 
  89      65205261 
  89      6E67696E 
  90 0033 00       		.align	2
  91              	.LC3:
  92 0034 53656E73 		.ascii	"Sensor initialization...\000"
  92      6F722069 
  92      6E697469 
  92      616C697A 
  92      6174696F 
  93 004d 000000   		.align	2
  94              	.LC4:
  95 0050 564C3533 		.ascii	"VL53L8A1_RANGING_SENSOR_Init failed\000"
  95      4C384131 
  95      5F52414E 
  95      47494E47 
  95      5F53454E 
  96              		.section	.text.MX_53L8A1_SimpleRanging_Init,"ax",%progbits
  97              		.align	1
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 102              	MX_53L8A1_SimpleRanging_Init:
 103              	.LFB139:
  97:TOF/App/app_tof.c ****   /* Initialize Virtual COM Port */
 104              		.loc 1 97 1 is_stmt 1 view -0
 105              		.cfi_startproc
 106              		@ args = 0, pretend = 0, frame = 0
 107              		@ frame_needed = 0, uses_anonymous_args = 0
 108 0000 10B5     		push	{r4, lr}
 109              		.cfi_def_cfa_offset 8
 110              		.cfi_offset 4, -8
 111              		.cfi_offset 14, -4
  99:TOF/App/app_tof.c **** 
 112              		.loc 1 99 3 view .LVU9
 113 0002 0020     		movs	r0, #0
 114 0004 FFF7FEFF 		bl	BSP_COM_Init
 115              	.LVL1:
 102:TOF/App/app_tof.c **** 
 116              		.loc 1 102 3 view .LVU10
 117 0008 0121     		movs	r1, #1
 118 000a 0020     		movs	r0, #0
 119 000c FFF7FEFF 		bl	BSP_PB_Init
 120              	.LVL2:
 105:TOF/App/app_tof.c ****   HAL_Delay(2);
 121              		.loc 1 105 3 view .LVU11
 122 0010 1B4C     		ldr	r4, .L13
 123 0012 0022     		movs	r2, #0
ARM GAS  C:\Temp\ccuPsKVP.s 			page 10


 124 0014 8021     		movs	r1, #128
 125 0016 2046     		mov	r0, r4
 126 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 127              	.LVL3:
 106:TOF/App/app_tof.c ****   HAL_GPIO_WritePin(VL53L8A1_PWR_EN_C_PORT, VL53L8A1_PWR_EN_C_PIN, GPIO_PIN_SET);
 128              		.loc 1 106 3 view .LVU12
 129 001c 0220     		movs	r0, #2
 130 001e FFF7FEFF 		bl	HAL_Delay
 131              	.LVL4:
 107:TOF/App/app_tof.c ****   HAL_Delay(2);
 132              		.loc 1 107 3 view .LVU13
 133 0022 0122     		movs	r2, #1
 134 0024 8021     		movs	r1, #128
 135 0026 2046     		mov	r0, r4
 136 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 137              	.LVL5:
 108:TOF/App/app_tof.c ****   HAL_GPIO_WritePin(VL53L8A1_LPn_C_PORT, VL53L8A1_LPn_C_PIN, GPIO_PIN_RESET);
 138              		.loc 1 108 3 view .LVU14
 139 002c 0220     		movs	r0, #2
 140 002e FFF7FEFF 		bl	HAL_Delay
 141              	.LVL6:
 109:TOF/App/app_tof.c ****   HAL_Delay(2);
 142              		.loc 1 109 3 view .LVU15
 143 0032 04F58064 		add	r4, r4, #1024
 144 0036 0022     		movs	r2, #0
 145 0038 0121     		movs	r1, #1
 146 003a 2046     		mov	r0, r4
 147 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 148              	.LVL7:
 110:TOF/App/app_tof.c ****   HAL_GPIO_WritePin(VL53L8A1_LPn_C_PORT, VL53L8A1_LPn_C_PIN, GPIO_PIN_SET);
 149              		.loc 1 110 3 view .LVU16
 150 0040 0220     		movs	r0, #2
 151 0042 FFF7FEFF 		bl	HAL_Delay
 152              	.LVL8:
 111:TOF/App/app_tof.c ****   HAL_Delay(2);
 153              		.loc 1 111 3 view .LVU17
 154 0046 0122     		movs	r2, #1
 155 0048 1146     		mov	r1, r2
 156 004a 2046     		mov	r0, r4
 157 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 158              	.LVL9:
 112:TOF/App/app_tof.c **** 
 159              		.loc 1 112 3 view .LVU18
 160 0050 0220     		movs	r0, #2
 161 0052 FFF7FEFF 		bl	HAL_Delay
 162              	.LVL10:
 114:TOF/App/app_tof.c ****   printf("53L8A1 Simple Ranging demo application\n");
 163              		.loc 1 114 3 view .LVU19
 164 0056 0B48     		ldr	r0, .L13+4
 165 0058 FFF7FEFF 		bl	printf
 166              	.LVL11:
 115:TOF/App/app_tof.c ****   printf("Sensor initialization...\n");
 167              		.loc 1 115 3 view .LVU20
 168 005c 0A48     		ldr	r0, .L13+8
 169 005e FFF7FEFF 		bl	puts
 170              	.LVL12:
 116:TOF/App/app_tof.c **** 
ARM GAS  C:\Temp\ccuPsKVP.s 			page 11


 171              		.loc 1 116 3 view .LVU21
 172 0062 0A48     		ldr	r0, .L13+12
 173 0064 FFF7FEFF 		bl	puts
 174              	.LVL13:
 118:TOF/App/app_tof.c **** 
 175              		.loc 1 118 3 view .LVU22
 118:TOF/App/app_tof.c **** 
 176              		.loc 1 118 12 is_stmt 0 view .LVU23
 177 0068 0120     		movs	r0, #1
 178 006a FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_Init
 179              	.LVL14:
 118:TOF/App/app_tof.c **** 
 180              		.loc 1 118 10 view .LVU24
 181 006e 084B     		ldr	r3, .L13+16
 182 0070 1860     		str	r0, [r3]
 120:TOF/App/app_tof.c ****   {
 183              		.loc 1 120 3 is_stmt 1 view .LVU25
 120:TOF/App/app_tof.c ****   {
 184              		.loc 1 120 6 is_stmt 0 view .LVU26
 185 0072 00B9     		cbnz	r0, .L12
 125:TOF/App/app_tof.c **** 
 186              		.loc 1 125 1 view .LVU27
 187 0074 10BD     		pop	{r4, pc}
 188              	.L12:
 122:TOF/App/app_tof.c ****     while (1);
 189              		.loc 1 122 5 is_stmt 1 view .LVU28
 190 0076 0748     		ldr	r0, .L13+20
 191 0078 FFF7FEFF 		bl	puts
 192              	.LVL15:
 193              	.L10:
 123:TOF/App/app_tof.c ****   }
 194              		.loc 1 123 5 discriminator 1 view .LVU29
 123:TOF/App/app_tof.c ****   }
 195              		.loc 1 123 11 discriminator 1 view .LVU30
 196 007c FEE7     		b	.L10
 197              	.L14:
 198 007e 00BF     		.align	2
 199              	.L13:
 200 0080 00000240 		.word	1073872896
 201 0084 00000000 		.word	.LC1
 202 0088 0C000000 		.word	.LC2
 203 008c 34000000 		.word	.LC3
 204 0090 00000000 		.word	status
 205 0094 50000000 		.word	.LC4
 206              		.cfi_endproc
 207              	.LFE139:
 209              		.section	.rodata.display_commands_banner.str1.4,"aMS",%progbits,1
 210              		.align	2
 211              	.LC5:
 212 0000 25635B32 		.ascii	"%c[2H\000"
 212      4800
 213 0006 0000     		.align	2
 214              	.LC6:
 215 0008 2D2D2D2D 		.ascii	"--------------------------------------\012\000"
 215      2D2D2D2D 
 215      2D2D2D2D 
 215      2D2D2D2D 
ARM GAS  C:\Temp\ccuPsKVP.s 			page 12


 215      2D2D2D2D 
 216              		.align	2
 217              	.LC7:
 218 0030 55736520 		.ascii	"Use the following keys to control application\000"
 218      74686520 
 218      666F6C6C 
 218      6F77696E 
 218      67206B65 
 219 005e 0000     		.align	2
 220              	.LC8:
 221 0060 20277227 		.ascii	" 'r' : change resolution\000"
 221      203A2063 
 221      68616E67 
 221      65207265 
 221      736F6C75 
 222 0079 000000   		.align	2
 223              	.LC9:
 224 007c 20277327 		.ascii	" 's' : enable signal and ambient\000"
 224      203A2065 
 224      6E61626C 
 224      65207369 
 224      676E616C 
 225 009d 000000   		.align	2
 226              	.LC10:
 227 00a0 20276327 		.ascii	" 'c' : clear screen\000"
 227      203A2063 
 227      6C656172 
 227      20736372 
 227      65656E00 
 228              		.section	.text.display_commands_banner,"ax",%progbits
 229              		.align	1
 230              		.syntax unified
 231              		.thumb
 232              		.thumb_func
 234              	display_commands_banner:
 235              	.LFB145:
 324:TOF/App/app_tof.c ****   /* clear screen */
 236              		.loc 1 324 1 view -0
 237              		.cfi_startproc
 238              		@ args = 0, pretend = 0, frame = 0
 239              		@ frame_needed = 0, uses_anonymous_args = 0
 240 0000 08B5     		push	{r3, lr}
 241              		.cfi_def_cfa_offset 8
 242              		.cfi_offset 3, -8
 243              		.cfi_offset 14, -4
 326:TOF/App/app_tof.c **** 
 244              		.loc 1 326 3 view .LVU32
 245 0002 1B21     		movs	r1, #27
 246 0004 0C48     		ldr	r0, .L17
 247 0006 FFF7FEFF 		bl	printf
 248              	.LVL16:
 328:TOF/App/app_tof.c ****   printf("--------------------------------------\n\n");
 249              		.loc 1 328 3 view .LVU33
 250 000a 0C48     		ldr	r0, .L17+4
 251 000c FFF7FEFF 		bl	puts
 252              	.LVL17:
 329:TOF/App/app_tof.c **** 
ARM GAS  C:\Temp\ccuPsKVP.s 			page 13


 253              		.loc 1 329 3 view .LVU34
 254 0010 0B48     		ldr	r0, .L17+8
 255 0012 FFF7FEFF 		bl	puts
 256              	.LVL18:
 331:TOF/App/app_tof.c ****   printf(" 'r' : change resolution\n");
 257              		.loc 1 331 3 view .LVU35
 258 0016 0B48     		ldr	r0, .L17+12
 259 0018 FFF7FEFF 		bl	puts
 260              	.LVL19:
 332:TOF/App/app_tof.c ****   printf(" 's' : enable signal and ambient\n");
 261              		.loc 1 332 3 view .LVU36
 262 001c 0A48     		ldr	r0, .L17+16
 263 001e FFF7FEFF 		bl	puts
 264              	.LVL20:
 333:TOF/App/app_tof.c ****   printf(" 'c' : clear screen\n");
 265              		.loc 1 333 3 view .LVU37
 266 0022 0A48     		ldr	r0, .L17+20
 267 0024 FFF7FEFF 		bl	puts
 268              	.LVL21:
 334:TOF/App/app_tof.c ****   printf("\n");
 269              		.loc 1 334 3 view .LVU38
 270 0028 0948     		ldr	r0, .L17+24
 271 002a FFF7FEFF 		bl	puts
 272              	.LVL22:
 335:TOF/App/app_tof.c **** }
 273              		.loc 1 335 3 view .LVU39
 274 002e 0A20     		movs	r0, #10
 275 0030 FFF7FEFF 		bl	putchar
 276              	.LVL23:
 336:TOF/App/app_tof.c **** 
 277              		.loc 1 336 1 is_stmt 0 view .LVU40
 278 0034 08BD     		pop	{r3, pc}
 279              	.L18:
 280 0036 00BF     		.align	2
 281              	.L17:
 282 0038 00000000 		.word	.LC5
 283 003c 0C000000 		.word	.LC2
 284 0040 08000000 		.word	.LC6
 285 0044 30000000 		.word	.LC7
 286 0048 60000000 		.word	.LC8
 287 004c 7C000000 		.word	.LC9
 288 0050 A0000000 		.word	.LC10
 289              		.cfi_endproc
 290              	.LFE145:
 292              		.section	.rodata.print_result.str1.4,"aMS",%progbits,1
 293              		.align	2
 294              	.LC11:
 295 0000 43656C6C 		.ascii	"Cell Format :\012\000"
 295      20466F72 
 295      6D617420 
 295      3A0A00
 296 000f 00       		.align	2
 297              	.LC12:
 298 0010 53746174 		.ascii	"Status\000"
 298      757300
 299 0017 00       		.align	2
 300              	.LC13:
ARM GAS  C:\Temp\ccuPsKVP.s 			page 14


 301 0018 44697374 		.ascii	"Distance [mm]\000"
 301      616E6365 
 301      205B6D6D 
 301      5D00
 302 0026 0000     		.align	2
 303              	.LC14:
 304 0028 201B5B33 		.ascii	" \033[38;5;10m%20s\033[0m : %20s\012\000"
 304      383B353B 
 304      31306D25 
 304      3230731B 
 304      5B306D20 
 305              		.align	2
 306              	.LC15:
 307 0044 416D6269 		.ascii	"Ambient [kcps/spad]\000"
 307      656E7420 
 307      5B6B6370 
 307      732F7370 
 307      61645D00 
 308              		.align	2
 309              	.LC16:
 310 0058 5369676E 		.ascii	"Signal [kcps/spad]\000"
 310      616C205B 
 310      6B637073 
 310      2F737061 
 310      645D00
 311 006b 00       		.align	2
 312              	.LC17:
 313 006c 20253230 		.ascii	" %20s : %20s\012\000"
 313      73203A20 
 313      25323073 
 313      0A00
 314 007a 0000     		.align	2
 315              	.LC18:
 316 007c 0A00     		.ascii	"\012\000"
 317 007e 0000     		.align	2
 318              	.LC19:
 319 0080 202D2D2D 		.ascii	" -----------------\000"
 319      2D2D2D2D 
 319      2D2D2D2D 
 319      2D2D2D2D 
 319      2D2D00
 320 0093 00       		.align	2
 321              	.LC20:
 322 0094 7C202020 		.ascii	"|                 \000"
 322      20202020 
 322      20202020 
 322      20202020 
 322      202000
 323 00a7 00       		.align	2
 324              	.LC21:
 325 00a8 7C00     		.ascii	"|\000"
 326 00aa 0000     		.align	2
 327              	.LC22:
 328 00ac 7C201B5B 		.ascii	"| \033[38;5;10m%5ld\033[0m  :  %5ld \000"
 328      33383B35 
 328      3B31306D 
 328      25356C64 
ARM GAS  C:\Temp\ccuPsKVP.s 			page 15


 328      1B5B306D 
 329 00cb 00       		.align	2
 330              	.LC23:
 331 00cc 5800     		.ascii	"X\000"
 332 00ce 0000     		.align	2
 333              	.LC24:
 334 00d0 7C202535 		.ascii	"| %5s  :  %5s \000"
 334      7320203A 
 334      20202535 
 334      732000
 335 00df 00       		.align	2
 336              	.LC25:
 337 00e0 7C202535 		.ascii	"| %5ld  :  \000"
 337      6C642020 
 337      3A202000 
 338              		.align	2
 339              	.LC26:
 340 00ec 7C202535 		.ascii	"| %5s  :  \000"
 340      7320203A 
 340      202000
 341 00f7 00       		.align	2
 342              	.LC27:
 343 00f8 25356C64 		.ascii	"%5ld \000"
 343      2000
 344 00fe 0000     		.align	2
 345              	.LC28:
 346 0100 25357320 		.ascii	"%5s \000"
 346      00
 347              		.section	.text.print_result,"ax",%progbits
 348              		.align	1
 349              		.syntax unified
 350              		.thumb
 351              		.thumb_func
 353              	print_result:
 354              	.LVL24:
 355              	.LFB141:
 189:TOF/App/app_tof.c ****   int8_t i;
 356              		.loc 1 189 1 is_stmt 1 view -0
 357              		.cfi_startproc
 358              		@ args = 0, pretend = 0, frame = 0
 359              		@ frame_needed = 0, uses_anonymous_args = 0
 189:TOF/App/app_tof.c ****   int8_t i;
 360              		.loc 1 189 1 is_stmt 0 view .LVU42
 361 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 362              		.cfi_def_cfa_offset 32
 363              		.cfi_offset 3, -32
 364              		.cfi_offset 4, -28
 365              		.cfi_offset 5, -24
 366              		.cfi_offset 6, -20
 367              		.cfi_offset 7, -16
 368              		.cfi_offset 8, -12
 369              		.cfi_offset 9, -8
 370              		.cfi_offset 14, -4
 371 0004 0646     		mov	r6, r0
 190:TOF/App/app_tof.c ****   int8_t j;
 372              		.loc 1 190 3 is_stmt 1 view .LVU43
 191:TOF/App/app_tof.c ****   int8_t k;
ARM GAS  C:\Temp\ccuPsKVP.s 			page 16


 373              		.loc 1 191 3 view .LVU44
 192:TOF/App/app_tof.c ****   int8_t l;
 374              		.loc 1 192 3 view .LVU45
 193:TOF/App/app_tof.c ****   uint8_t zones_per_line;
 375              		.loc 1 193 3 view .LVU46
 194:TOF/App/app_tof.c **** 
 376              		.loc 1 194 3 view .LVU47
 196:TOF/App/app_tof.c ****                     (Profile.RangingProfile == RS_PROFILE_8x8_CONTINUOUS)) ? 8 : 4;
 377              		.loc 1 196 3 view .LVU48
 196:TOF/App/app_tof.c ****                     (Profile.RangingProfile == RS_PROFILE_8x8_CONTINUOUS)) ? 8 : 4;
 378              		.loc 1 196 29 is_stmt 0 view .LVU49
 379 0006 684B     		ldr	r3, .L54
 380 0008 1B68     		ldr	r3, [r3]
 196:TOF/App/app_tof.c ****                     (Profile.RangingProfile == RS_PROFILE_8x8_CONTINUOUS)) ? 8 : 4;
 381              		.loc 1 196 75 view .LVU50
 382 000a 033B     		subs	r3, r3, #3
 196:TOF/App/app_tof.c ****                     (Profile.RangingProfile == RS_PROFILE_8x8_CONTINUOUS)) ? 8 : 4;
 383              		.loc 1 196 18 view .LVU51
 384 000c 012B     		cmp	r3, #1
 385 000e 0DD9     		bls	.L50
 386 0010 0427     		movs	r7, #4
 387              	.L20:
 388              	.LVL25:
 199:TOF/App/app_tof.c **** 
 389              		.loc 1 199 3 is_stmt 1 discriminator 4 view .LVU52
 390 0012 FFF7FEFF 		bl	display_commands_banner
 391              	.LVL26:
 201:TOF/App/app_tof.c ****   for (l = 0; l < RANGING_SENSOR_NB_TARGET_PER_ZONE; l++)
 392              		.loc 1 201 3 discriminator 4 view .LVU53
 393 0016 6548     		ldr	r0, .L54+4
 394 0018 FFF7FEFF 		bl	puts
 395              	.LVL27:
 202:TOF/App/app_tof.c ****   {
 396              		.loc 1 202 3 discriminator 4 view .LVU54
 202:TOF/App/app_tof.c ****   {
 397              		.loc 1 202 10 is_stmt 0 discriminator 4 view .LVU55
 398 001c 0024     		movs	r4, #0
 399              	.LVL28:
 400              	.L21:
 202:TOF/App/app_tof.c ****   {
 401              		.loc 1 202 17 is_stmt 1 discriminator 1 view .LVU56
 402 001e 3CB1     		cbz	r4, .L24
 211:TOF/App/app_tof.c **** 
 403              		.loc 1 211 3 view .LVU57
 404 0020 6348     		ldr	r0, .L54+8
 405 0022 FFF7FEFF 		bl	puts
 406              	.LVL29:
 213:TOF/App/app_tof.c ****   {
 407              		.loc 1 213 3 view .LVU58
 213:TOF/App/app_tof.c ****   {
 408              		.loc 1 213 10 is_stmt 0 view .LVU59
 409 0026 4FF00008 		mov	r8, #0
 213:TOF/App/app_tof.c ****   {
 410              		.loc 1 213 3 view .LVU60
 411 002a 33E0     		b	.L25
 412              	.LVL30:
 413              	.L50:
ARM GAS  C:\Temp\ccuPsKVP.s 			page 17


 196:TOF/App/app_tof.c ****                     (Profile.RangingProfile == RS_PROFILE_8x8_CONTINUOUS)) ? 8 : 4;
 414              		.loc 1 196 18 view .LVU61
 415 002c 0827     		movs	r7, #8
 416 002e F0E7     		b	.L20
 417              	.LVL31:
 418              	.L24:
 204:TOF/App/app_tof.c ****     if ((Profile.EnableAmbient != 0) || (Profile.EnableSignal != 0))
 419              		.loc 1 204 5 is_stmt 1 view .LVU62
 420 0030 604A     		ldr	r2, .L54+12
 421 0032 6149     		ldr	r1, .L54+16
 422 0034 6148     		ldr	r0, .L54+20
 423 0036 FFF7FEFF 		bl	printf
 424              	.LVL32:
 205:TOF/App/app_tof.c ****     {
 425              		.loc 1 205 5 view .LVU63
 205:TOF/App/app_tof.c ****     {
 426              		.loc 1 205 17 is_stmt 0 view .LVU64
 427 003a 5B4B     		ldr	r3, .L54
 428 003c DB68     		ldr	r3, [r3, #12]
 205:TOF/App/app_tof.c ****     {
 429              		.loc 1 205 8 view .LVU65
 430 003e 13B9     		cbnz	r3, .L22
 205:TOF/App/app_tof.c ****     {
 431              		.loc 1 205 49 discriminator 1 view .LVU66
 432 0040 594B     		ldr	r3, .L54
 433 0042 1B69     		ldr	r3, [r3, #16]
 205:TOF/App/app_tof.c ****     {
 434              		.loc 1 205 38 discriminator 1 view .LVU67
 435 0044 23B1     		cbz	r3, .L23
 436              	.L22:
 207:TOF/App/app_tof.c ****     }
 437              		.loc 1 207 7 is_stmt 1 view .LVU68
 438 0046 5E4A     		ldr	r2, .L54+24
 439 0048 5E49     		ldr	r1, .L54+28
 440 004a 5F48     		ldr	r0, .L54+32
 441 004c FFF7FEFF 		bl	printf
 442              	.LVL33:
 443              	.L23:
 202:TOF/App/app_tof.c ****   {
 444              		.loc 1 202 55 discriminator 2 view .LVU69
 445 0050 0134     		adds	r4, r4, #1
 446              	.LVL34:
 202:TOF/App/app_tof.c ****   {
 447              		.loc 1 202 55 is_stmt 0 discriminator 2 view .LVU70
 448 0052 64B2     		sxtb	r4, r4
 449              	.LVL35:
 202:TOF/App/app_tof.c ****   {
 450              		.loc 1 202 55 discriminator 2 view .LVU71
 451 0054 E3E7     		b	.L21
 452              	.LVL36:
 453              	.L26:
 217:TOF/App/app_tof.c ****     }
 454              		.loc 1 217 7 is_stmt 1 discriminator 3 view .LVU72
 455 0056 5D48     		ldr	r0, .L54+36
 456 0058 FFF7FEFF 		bl	printf
 457              	.LVL37:
 215:TOF/App/app_tof.c ****     {
ARM GAS  C:\Temp\ccuPsKVP.s 			page 18


 458              		.loc 1 215 38 discriminator 3 view .LVU73
 459 005c 0134     		adds	r4, r4, #1
 460              	.LVL38:
 215:TOF/App/app_tof.c ****     {
 461              		.loc 1 215 38 is_stmt 0 discriminator 3 view .LVU74
 462 005e 64B2     		sxtb	r4, r4
 463              	.LVL39:
 464              	.L44:
 215:TOF/App/app_tof.c ****     {
 465              		.loc 1 215 19 is_stmt 1 discriminator 1 view .LVU75
 466 0060 3D46     		mov	r5, r7
 467 0062 BC42     		cmp	r4, r7
 468 0064 F7DB     		blt	.L26
 219:TOF/App/app_tof.c **** 
 469              		.loc 1 219 5 view .LVU76
 470 0066 0A20     		movs	r0, #10
 471 0068 FFF7FEFF 		bl	putchar
 472              	.LVL40:
 221:TOF/App/app_tof.c ****     {
 473              		.loc 1 221 5 view .LVU77
 221:TOF/App/app_tof.c ****     {
 474              		.loc 1 221 12 is_stmt 0 view .LVU78
 475 006c 0024     		movs	r4, #0
 221:TOF/App/app_tof.c ****     {
 476              		.loc 1 221 5 view .LVU79
 477 006e 04E0     		b	.L27
 478              	.LVL41:
 479              	.L28:
 223:TOF/App/app_tof.c ****     }
 480              		.loc 1 223 7 is_stmt 1 discriminator 3 view .LVU80
 481 0070 5748     		ldr	r0, .L54+40
 482 0072 FFF7FEFF 		bl	printf
 483              	.LVL42:
 221:TOF/App/app_tof.c ****     {
 484              		.loc 1 221 38 discriminator 3 view .LVU81
 485 0076 0134     		adds	r4, r4, #1
 486              	.LVL43:
 221:TOF/App/app_tof.c ****     {
 487              		.loc 1 221 38 is_stmt 0 discriminator 3 view .LVU82
 488 0078 64B2     		sxtb	r4, r4
 489              	.LVL44:
 490              	.L27:
 221:TOF/App/app_tof.c ****     {
 491              		.loc 1 221 19 is_stmt 1 discriminator 1 view .LVU83
 492 007a A542     		cmp	r5, r4
 493 007c F8DC     		bgt	.L28
 225:TOF/App/app_tof.c **** 
 494              		.loc 1 225 5 view .LVU84
 495 007e 5548     		ldr	r0, .L54+44
 496 0080 FFF7FEFF 		bl	puts
 497              	.LVL45:
 227:TOF/App/app_tof.c ****     {
 498              		.loc 1 227 5 view .LVU85
 227:TOF/App/app_tof.c ****     {
 499              		.loc 1 227 12 is_stmt 0 view .LVU86
 500 0084 4FF00009 		mov	r9, #0
 501              	.LVL46:
ARM GAS  C:\Temp\ccuPsKVP.s 			page 19


 502              	.L29:
 227:TOF/App/app_tof.c ****     {
 503              		.loc 1 227 19 is_stmt 1 discriminator 1 view .LVU87
 504 0088 B9F1000F 		cmp	r9, #0
 505 008c 07D0     		beq	.L43
 213:TOF/App/app_tof.c ****   {
 506              		.loc 1 213 44 discriminator 2 view .LVU88
 507 008e B844     		add	r8, r8, r7
 508              	.LVL47:
 213:TOF/App/app_tof.c ****   {
 509              		.loc 1 213 44 is_stmt 0 discriminator 2 view .LVU89
 510 0090 4FFA88F8 		sxtb	r8, r8
 511              	.LVL48:
 512              	.L25:
 213:TOF/App/app_tof.c ****   {
 513              		.loc 1 213 17 is_stmt 1 discriminator 1 view .LVU90
 213:TOF/App/app_tof.c ****   {
 514              		.loc 1 213 25 is_stmt 0 discriminator 1 view .LVU91
 515 0094 3368     		ldr	r3, [r6]
 213:TOF/App/app_tof.c ****   {
 516              		.loc 1 213 17 discriminator 1 view .LVU92
 517 0096 9845     		cmp	r8, r3
 518 0098 78D2     		bcs	.L51
 215:TOF/App/app_tof.c ****     {
 519              		.loc 1 215 12 view .LVU93
 520 009a 0024     		movs	r4, #0
 521 009c E0E7     		b	.L44
 522              	.LVL49:
 523              	.L43:
 230:TOF/App/app_tof.c ****       {
 524              		.loc 1 230 7 is_stmt 1 view .LVU94
 230:TOF/App/app_tof.c ****       {
 525              		.loc 1 230 14 is_stmt 0 view .LVU95
 526 009e 7D1E     		subs	r5, r7, #1
 527              	.LVL50:
 230:TOF/App/app_tof.c ****       {
 528              		.loc 1 230 14 view .LVU96
 529 00a0 2C46     		mov	r4, r5
 230:TOF/App/app_tof.c ****       {
 530              		.loc 1 230 7 view .LVU97
 531 00a2 06E0     		b	.L30
 532              	.LVL51:
 533              	.L31:
 237:TOF/App/app_tof.c ****       }
 534              		.loc 1 237 11 is_stmt 1 view .LVU98
 535 00a4 4C49     		ldr	r1, .L54+48
 536 00a6 0A46     		mov	r2, r1
 537 00a8 4C48     		ldr	r0, .L54+52
 538 00aa FFF7FEFF 		bl	printf
 539              	.LVL52:
 540              	.L32:
 230:TOF/App/app_tof.c ****       {
 541              		.loc 1 230 47 discriminator 2 view .LVU99
 542 00ae 013C     		subs	r4, r4, #1
 543              	.LVL53:
 230:TOF/App/app_tof.c ****       {
 544              		.loc 1 230 47 is_stmt 0 discriminator 2 view .LVU100
ARM GAS  C:\Temp\ccuPsKVP.s 			page 20


 545 00b0 64B2     		sxtb	r4, r4
 546              	.LVL54:
 547              	.L30:
 230:TOF/App/app_tof.c ****       {
 548              		.loc 1 230 40 is_stmt 1 discriminator 1 view .LVU101
 549 00b2 002C     		cmp	r4, #0
 550 00b4 16DB     		blt	.L52
 232:TOF/App/app_tof.c ****           printf("| \033[38;5;10m%5ld\033[0m  :  %5ld ",
 551              		.loc 1 232 9 view .LVU102
 232:TOF/App/app_tof.c ****           printf("| \033[38;5;10m%5ld\033[0m  :  %5ld ",
 552              		.loc 1 232 34 is_stmt 0 view .LVU103
 553 00b6 08EB0403 		add	r3, r8, r4
 232:TOF/App/app_tof.c ****           printf("| \033[38;5;10m%5ld\033[0m  :  %5ld ",
 554              		.loc 1 232 38 view .LVU104
 555 00ba 03EB8302 		add	r2, r3, r3, lsl #2
 556 00be 06EB8202 		add	r2, r6, r2, lsl #2
 557 00c2 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 232:TOF/App/app_tof.c ****           printf("| \033[38;5;10m%5ld\033[0m  :  %5ld ",
 558              		.loc 1 232 12 view .LVU105
 559 00c4 002A     		cmp	r2, #0
 560 00c6 EDD0     		beq	.L31
 233:TOF/App/app_tof.c ****                  (long)Result->ZoneResult[j + k].Distance[l],
 561              		.loc 1 233 11 is_stmt 1 view .LVU106
 234:TOF/App/app_tof.c ****                  (long)Result->ZoneResult[j + k].Status[l]);
 562              		.loc 1 234 58 is_stmt 0 view .LVU107
 563 00c8 03EB8303 		add	r3, r3, r3, lsl #2
 564 00cc 4B44     		add	r3, r3, r9
 565 00ce 06EB8301 		add	r1, r6, r3, lsl #2
 235:TOF/App/app_tof.c ****         else
 566              		.loc 1 235 56 view .LVU108
 567 00d2 0233     		adds	r3, r3, #2
 568 00d4 06EB8303 		add	r3, r6, r3, lsl #2
 233:TOF/App/app_tof.c ****                  (long)Result->ZoneResult[j + k].Distance[l],
 569              		.loc 1 233 11 view .LVU109
 570 00d8 5A68     		ldr	r2, [r3, #4]
 571 00da 8968     		ldr	r1, [r1, #8]
 572 00dc 4048     		ldr	r0, .L54+56
 573 00de FFF7FEFF 		bl	printf
 574              	.LVL55:
 575 00e2 E4E7     		b	.L32
 576              	.L52:
 239:TOF/App/app_tof.c **** 
 577              		.loc 1 239 7 is_stmt 1 view .LVU110
 578 00e4 3B48     		ldr	r0, .L54+44
 579 00e6 FFF7FEFF 		bl	puts
 580              	.LVL56:
 241:TOF/App/app_tof.c ****       {
 581              		.loc 1 241 7 view .LVU111
 241:TOF/App/app_tof.c ****       {
 582              		.loc 1 241 19 is_stmt 0 view .LVU112
 583 00ea 2F4B     		ldr	r3, .L54
 584 00ec DB68     		ldr	r3, [r3, #12]
 241:TOF/App/app_tof.c ****       {
 585              		.loc 1 241 10 view .LVU113
 586 00ee 93B9     		cbnz	r3, .L41
 241:TOF/App/app_tof.c ****       {
 587              		.loc 1 241 51 discriminator 1 view .LVU114
ARM GAS  C:\Temp\ccuPsKVP.s 			page 21


 588 00f0 2D4B     		ldr	r3, .L54
 589 00f2 1B69     		ldr	r3, [r3, #16]
 241:TOF/App/app_tof.c ****       {
 590              		.loc 1 241 40 discriminator 1 view .LVU115
 591 00f4 7BB9     		cbnz	r3, .L41
 592              	.LVL57:
 593              	.L35:
 227:TOF/App/app_tof.c ****     {
 594              		.loc 1 227 57 is_stmt 1 discriminator 2 view .LVU116
 595 00f6 09F10109 		add	r9, r9, #1
 596              	.LVL58:
 227:TOF/App/app_tof.c ****     {
 597              		.loc 1 227 57 is_stmt 0 discriminator 2 view .LVU117
 598 00fa 4FFA89F9 		sxtb	r9, r9
 599              	.LVL59:
 227:TOF/App/app_tof.c ****     {
 600              		.loc 1 227 57 discriminator 2 view .LVU118
 601 00fe C3E7     		b	.L29
 602              	.LVL60:
 603              	.L37:
 253:TOF/App/app_tof.c **** 
 604              		.loc 1 253 15 is_stmt 1 view .LVU119
 605 0100 3549     		ldr	r1, .L54+48
 606 0102 3848     		ldr	r0, .L54+60
 607 0104 FFF7FEFF 		bl	printf
 608              	.LVL61:
 609 0108 22E0     		b	.L38
 610              	.L39:
 260:TOF/App/app_tof.c ****           }
 611              		.loc 1 260 15 view .LVU120
 612 010a 3349     		ldr	r1, .L54+48
 613 010c 3648     		ldr	r0, .L54+64
 614 010e FFF7FEFF 		bl	printf
 615              	.LVL62:
 616              	.L40:
 244:TOF/App/app_tof.c ****         {
 617              		.loc 1 244 49 discriminator 2 view .LVU121
 618 0112 013D     		subs	r5, r5, #1
 619              	.LVL63:
 244:TOF/App/app_tof.c ****         {
 620              		.loc 1 244 49 is_stmt 0 discriminator 2 view .LVU122
 621 0114 6DB2     		sxtb	r5, r5
 622              	.LVL64:
 623              	.L41:
 244:TOF/App/app_tof.c ****         {
 624              		.loc 1 244 42 is_stmt 1 discriminator 1 view .LVU123
 625 0116 002D     		cmp	r5, #0
 626 0118 34DB     		blt	.L53
 246:TOF/App/app_tof.c ****           {
 627              		.loc 1 246 11 view .LVU124
 246:TOF/App/app_tof.c ****           {
 628              		.loc 1 246 36 is_stmt 0 view .LVU125
 629 011a 08EB0504 		add	r4, r8, r5
 246:TOF/App/app_tof.c ****           {
 630              		.loc 1 246 40 view .LVU126
 631 011e 04EB8403 		add	r3, r4, r4, lsl #2
 632 0122 06EB8303 		add	r3, r6, r3, lsl #2
ARM GAS  C:\Temp\ccuPsKVP.s 			page 22


 633 0126 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 246:TOF/App/app_tof.c ****           {
 634              		.loc 1 246 14 view .LVU127
 635 0128 33B3     		cbz	r3, .L36
 248:TOF/App/app_tof.c ****             {
 636              		.loc 1 248 13 is_stmt 1 view .LVU128
 248:TOF/App/app_tof.c ****             {
 637              		.loc 1 248 24 is_stmt 0 view .LVU129
 638 012a 1F4B     		ldr	r3, .L54
 639 012c 1B69     		ldr	r3, [r3, #16]
 248:TOF/App/app_tof.c ****             {
 640              		.loc 1 248 16 view .LVU130
 641 012e 002B     		cmp	r3, #0
 642 0130 E6D0     		beq	.L37
 250:TOF/App/app_tof.c ****             }
 643              		.loc 1 250 15 is_stmt 1 view .LVU131
 250:TOF/App/app_tof.c ****             }
 644              		.loc 1 250 75 is_stmt 0 view .LVU132
 645 0132 04EB8403 		add	r3, r4, r4, lsl #2
 646 0136 4B44     		add	r3, r3, r9
 647 0138 0433     		adds	r3, r3, #4
 648 013a 06EB8303 		add	r3, r6, r3, lsl #2
 649 013e D3ED017A 		vldr.32	s15, [r3, #4]
 250:TOF/App/app_tof.c ****             }
 650              		.loc 1 250 15 view .LVU133
 651 0142 FDEEE77A 		vcvt.s32.f32	s15, s15
 652 0146 17EE901A 		vmov	r1, s15	@ int
 653 014a 2848     		ldr	r0, .L54+68
 654 014c FFF7FEFF 		bl	printf
 655              	.LVL65:
 656              	.L38:
 255:TOF/App/app_tof.c ****             {
 657              		.loc 1 255 13 is_stmt 1 view .LVU134
 255:TOF/App/app_tof.c ****             {
 658              		.loc 1 255 24 is_stmt 0 view .LVU135
 659 0150 154B     		ldr	r3, .L54
 660 0152 DB68     		ldr	r3, [r3, #12]
 255:TOF/App/app_tof.c ****             {
 661              		.loc 1 255 16 view .LVU136
 662 0154 002B     		cmp	r3, #0
 663 0156 D8D0     		beq	.L39
 257:TOF/App/app_tof.c ****             }
 664              		.loc 1 257 15 is_stmt 1 view .LVU137
 257:TOF/App/app_tof.c ****             }
 665              		.loc 1 257 70 is_stmt 0 view .LVU138
 666 0158 04EB8403 		add	r3, r4, r4, lsl #2
 667 015c 4B44     		add	r3, r3, r9
 668 015e 0233     		adds	r3, r3, #2
 669 0160 06EB8303 		add	r3, r6, r3, lsl #2
 670 0164 D3ED027A 		vldr.32	s15, [r3, #8]
 257:TOF/App/app_tof.c ****             }
 671              		.loc 1 257 15 view .LVU139
 672 0168 FDEEE77A 		vcvt.s32.f32	s15, s15
 673 016c 17EE901A 		vmov	r1, s15	@ int
 674 0170 1F48     		ldr	r0, .L54+72
 675 0172 FFF7FEFF 		bl	printf
 676              	.LVL66:
ARM GAS  C:\Temp\ccuPsKVP.s 			page 23


 677 0176 CCE7     		b	.L40
 678              	.L36:
 263:TOF/App/app_tof.c ****         }
 679              		.loc 1 263 13 is_stmt 1 view .LVU140
 680 0178 1749     		ldr	r1, .L54+48
 681 017a 0A46     		mov	r2, r1
 682 017c 1748     		ldr	r0, .L54+52
 683 017e FFF7FEFF 		bl	printf
 684              	.LVL67:
 685 0182 C6E7     		b	.L40
 686              	.L53:
 265:TOF/App/app_tof.c ****       }
 687              		.loc 1 265 9 view .LVU141
 688 0184 1348     		ldr	r0, .L54+44
 689 0186 FFF7FEFF 		bl	puts
 690              	.LVL68:
 691 018a B4E7     		b	.L35
 692              	.LVL69:
 693              	.L51:
 270:TOF/App/app_tof.c ****   {
 694              		.loc 1 270 10 is_stmt 0 view .LVU142
 695 018c 0024     		movs	r4, #0
 696 018e 04E0     		b	.L45
 697              	.LVL70:
 698              	.L46:
 272:TOF/App/app_tof.c ****   }
 699              		.loc 1 272 5 is_stmt 1 discriminator 3 view .LVU143
 700 0190 0E48     		ldr	r0, .L54+36
 701 0192 FFF7FEFF 		bl	printf
 702              	.LVL71:
 270:TOF/App/app_tof.c ****   {
 703              		.loc 1 270 36 discriminator 3 view .LVU144
 704 0196 0134     		adds	r4, r4, #1
 705              	.LVL72:
 270:TOF/App/app_tof.c ****   {
 706              		.loc 1 270 36 is_stmt 0 discriminator 3 view .LVU145
 707 0198 64B2     		sxtb	r4, r4
 708              	.LVL73:
 709              	.L45:
 270:TOF/App/app_tof.c ****   {
 710              		.loc 1 270 17 is_stmt 1 discriminator 1 view .LVU146
 711 019a BC42     		cmp	r4, r7
 712 019c F8DB     		blt	.L46
 274:TOF/App/app_tof.c **** }
 713              		.loc 1 274 3 view .LVU147
 714 019e 0A20     		movs	r0, #10
 715 01a0 FFF7FEFF 		bl	putchar
 716              	.LVL74:
 275:TOF/App/app_tof.c **** 
 717              		.loc 1 275 1 is_stmt 0 view .LVU148
 718 01a4 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 719              	.LVL75:
 720              	.L55:
 275:TOF/App/app_tof.c **** 
 721              		.loc 1 275 1 view .LVU149
 722              		.align	2
 723              	.L54:
ARM GAS  C:\Temp\ccuPsKVP.s 			page 24


 724 01a8 00000000 		.word	Profile
 725 01ac 00000000 		.word	.LC11
 726 01b0 7C000000 		.word	.LC18
 727 01b4 10000000 		.word	.LC12
 728 01b8 18000000 		.word	.LC13
 729 01bc 28000000 		.word	.LC14
 730 01c0 44000000 		.word	.LC15
 731 01c4 58000000 		.word	.LC16
 732 01c8 6C000000 		.word	.LC17
 733 01cc 80000000 		.word	.LC19
 734 01d0 94000000 		.word	.LC20
 735 01d4 A8000000 		.word	.LC21
 736 01d8 CC000000 		.word	.LC23
 737 01dc D0000000 		.word	.LC24
 738 01e0 AC000000 		.word	.LC22
 739 01e4 EC000000 		.word	.LC26
 740 01e8 00010000 		.word	.LC28
 741 01ec E0000000 		.word	.LC25
 742 01f0 F8000000 		.word	.LC27
 743              		.cfi_endproc
 744              	.LFE141:
 746              		.section	.text.get_key,"ax",%progbits
 747              		.align	1
 748              		.syntax unified
 749              		.thumb
 750              		.thumb_func
 752              	get_key:
 753              	.LFB147:
 362:TOF/App/app_tof.c ****   uint8_t cmd = 0;
 754              		.loc 1 362 1 is_stmt 1 view -0
 755              		.cfi_startproc
 756              		@ args = 0, pretend = 0, frame = 8
 757              		@ frame_needed = 0, uses_anonymous_args = 0
 758 0000 00B5     		push	{lr}
 759              		.cfi_def_cfa_offset 4
 760              		.cfi_offset 14, -4
 761 0002 83B0     		sub	sp, sp, #12
 762              		.cfi_def_cfa_offset 16
 363:TOF/App/app_tof.c **** 
 763              		.loc 1 363 3 view .LVU151
 363:TOF/App/app_tof.c **** 
 764              		.loc 1 363 11 is_stmt 0 view .LVU152
 765 0004 0023     		movs	r3, #0
 766 0006 8DF80730 		strb	r3, [sp, #7]
 365:TOF/App/app_tof.c **** 
 767              		.loc 1 365 3 is_stmt 1 view .LVU153
 768 000a 4FF0FF33 		mov	r3, #-1
 769 000e 0122     		movs	r2, #1
 770 0010 0DF10701 		add	r1, sp, #7
 771 0014 0348     		ldr	r0, .L58
 772 0016 FFF7FEFF 		bl	HAL_UART_Receive
 773              	.LVL76:
 367:TOF/App/app_tof.c **** }
 774              		.loc 1 367 3 view .LVU154
 368:TOF/App/app_tof.c **** 
 775              		.loc 1 368 1 is_stmt 0 view .LVU155
 776 001a 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
ARM GAS  C:\Temp\ccuPsKVP.s 			page 25


 777 001e 03B0     		add	sp, sp, #12
 778              		.cfi_def_cfa_offset 4
 779              		@ sp needed
 780 0020 5DF804FB 		ldr	pc, [sp], #4
 781              	.L59:
 782              		.align	2
 783              	.L58:
 784 0024 00000000 		.word	hcom_uart
 785              		.cfi_endproc
 786              	.LFE147:
 788              		.section	.text.toggle_resolution,"ax",%progbits
 789              		.align	1
 790              		.syntax unified
 791              		.thumb
 792              		.thumb_func
 794              	toggle_resolution:
 795              	.LFB142:
 278:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_Stop(VL53L8A1_DEV_CENTER);
 796              		.loc 1 278 1 is_stmt 1 view -0
 797              		.cfi_startproc
 798              		@ args = 0, pretend = 0, frame = 0
 799              		@ frame_needed = 0, uses_anonymous_args = 0
 800 0000 08B5     		push	{r3, lr}
 801              		.cfi_def_cfa_offset 8
 802              		.cfi_offset 3, -8
 803              		.cfi_offset 14, -4
 279:TOF/App/app_tof.c **** 
 804              		.loc 1 279 3 view .LVU157
 805 0002 0120     		movs	r0, #1
 806 0004 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_Stop
 807              	.LVL77:
 281:TOF/App/app_tof.c ****   {
 808              		.loc 1 281 3 view .LVU158
 281:TOF/App/app_tof.c ****   {
 809              		.loc 1 281 18 is_stmt 0 view .LVU159
 810 0008 104B     		ldr	r3, .L69
 811 000a 1B68     		ldr	r3, [r3]
 281:TOF/App/app_tof.c ****   {
 812              		.loc 1 281 3 view .LVU160
 813 000c 013B     		subs	r3, r3, #1
 814 000e 032B     		cmp	r3, #3
 815 0010 06D8     		bhi	.L61
 816 0012 DFE803F0 		tbb	[pc, r3]
 817              	.L63:
 818 0016 0E       		.byte	(.L66-.L63)/2
 819 0017 02       		.byte	(.L65-.L63)/2
 820 0018 16       		.byte	(.L64-.L63)/2
 821 0019 12       		.byte	(.L62-.L63)/2
 822              		.p2align 1
 823              	.L65:
 284:TOF/App/app_tof.c ****       break;
 824              		.loc 1 284 7 is_stmt 1 view .LVU161
 284:TOF/App/app_tof.c ****       break;
 825              		.loc 1 284 30 is_stmt 0 view .LVU162
 826 001a 0C4B     		ldr	r3, .L69
 827 001c 0422     		movs	r2, #4
 828 001e 1A60     		str	r2, [r3]
ARM GAS  C:\Temp\ccuPsKVP.s 			page 26


 285:TOF/App/app_tof.c **** 
 829              		.loc 1 285 7 is_stmt 1 view .LVU163
 830              	.L61:
 303:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_Start(VL53L8A1_DEV_CENTER, RS_MODE_ASYNC_CONTINUOUS);
 831              		.loc 1 303 3 view .LVU164
 832 0020 0A49     		ldr	r1, .L69
 833 0022 0120     		movs	r0, #1
 834 0024 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_ConfigProfile
 835              	.LVL78:
 304:TOF/App/app_tof.c **** }
 836              		.loc 1 304 3 view .LVU165
 837 0028 0321     		movs	r1, #3
 838 002a 0120     		movs	r0, #1
 839 002c FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_Start
 840              	.LVL79:
 305:TOF/App/app_tof.c **** 
 841              		.loc 1 305 1 is_stmt 0 view .LVU166
 842 0030 08BD     		pop	{r3, pc}
 843              	.L66:
 288:TOF/App/app_tof.c ****       break;
 844              		.loc 1 288 7 is_stmt 1 view .LVU167
 288:TOF/App/app_tof.c ****       break;
 845              		.loc 1 288 30 is_stmt 0 view .LVU168
 846 0032 064B     		ldr	r3, .L69
 847 0034 0322     		movs	r2, #3
 848 0036 1A60     		str	r2, [r3]
 289:TOF/App/app_tof.c **** 
 849              		.loc 1 289 7 is_stmt 1 view .LVU169
 850 0038 F2E7     		b	.L61
 851              	.L62:
 292:TOF/App/app_tof.c ****       break;
 852              		.loc 1 292 7 view .LVU170
 292:TOF/App/app_tof.c ****       break;
 853              		.loc 1 292 30 is_stmt 0 view .LVU171
 854 003a 044B     		ldr	r3, .L69
 855 003c 0222     		movs	r2, #2
 856 003e 1A60     		str	r2, [r3]
 293:TOF/App/app_tof.c **** 
 857              		.loc 1 293 7 is_stmt 1 view .LVU172
 858 0040 EEE7     		b	.L61
 859              	.L64:
 296:TOF/App/app_tof.c ****       break;
 860              		.loc 1 296 7 view .LVU173
 296:TOF/App/app_tof.c ****       break;
 861              		.loc 1 296 30 is_stmt 0 view .LVU174
 862 0042 024B     		ldr	r3, .L69
 863 0044 0122     		movs	r2, #1
 864 0046 1A60     		str	r2, [r3]
 297:TOF/App/app_tof.c **** 
 865              		.loc 1 297 7 is_stmt 1 view .LVU175
 866 0048 EAE7     		b	.L61
 867              	.L70:
 868 004a 00BF     		.align	2
 869              	.L69:
 870 004c 00000000 		.word	Profile
 871              		.cfi_endproc
 872              	.LFE142:
ARM GAS  C:\Temp\ccuPsKVP.s 			page 27


 874              		.section	.text.toggle_signal_and_ambient,"ax",%progbits
 875              		.align	1
 876              		.syntax unified
 877              		.thumb
 878              		.thumb_func
 880              	toggle_signal_and_ambient:
 881              	.LFB143:
 308:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_Stop(VL53L8A1_DEV_CENTER);
 882              		.loc 1 308 1 view -0
 883              		.cfi_startproc
 884              		@ args = 0, pretend = 0, frame = 0
 885              		@ frame_needed = 0, uses_anonymous_args = 0
 886 0000 08B5     		push	{r3, lr}
 887              		.cfi_def_cfa_offset 8
 888              		.cfi_offset 3, -8
 889              		.cfi_offset 14, -4
 309:TOF/App/app_tof.c **** 
 890              		.loc 1 309 3 view .LVU177
 891 0002 0120     		movs	r0, #1
 892 0004 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_Stop
 893              	.LVL80:
 311:TOF/App/app_tof.c ****   Profile.EnableSignal = (Profile.EnableSignal) ? 0U : 1U;
 894              		.loc 1 311 3 view .LVU178
 311:TOF/App/app_tof.c ****   Profile.EnableSignal = (Profile.EnableSignal) ? 0U : 1U;
 895              		.loc 1 311 35 is_stmt 0 view .LVU179
 896 0008 0949     		ldr	r1, .L73
 897 000a CB68     		ldr	r3, [r1, #12]
 311:TOF/App/app_tof.c ****   Profile.EnableSignal = (Profile.EnableSignal) ? 0U : 1U;
 898              		.loc 1 311 56 view .LVU180
 899 000c B3FA83F3 		clz	r3, r3
 900 0010 5B09     		lsrs	r3, r3, #5
 311:TOF/App/app_tof.c ****   Profile.EnableSignal = (Profile.EnableSignal) ? 0U : 1U;
 901              		.loc 1 311 25 view .LVU181
 902 0012 CB60     		str	r3, [r1, #12]
 312:TOF/App/app_tof.c **** 
 903              		.loc 1 312 3 is_stmt 1 view .LVU182
 312:TOF/App/app_tof.c **** 
 904              		.loc 1 312 34 is_stmt 0 view .LVU183
 905 0014 0B69     		ldr	r3, [r1, #16]
 312:TOF/App/app_tof.c **** 
 906              		.loc 1 312 54 view .LVU184
 907 0016 B3FA83F3 		clz	r3, r3
 908 001a 5B09     		lsrs	r3, r3, #5
 312:TOF/App/app_tof.c **** 
 909              		.loc 1 312 24 view .LVU185
 910 001c 0B61     		str	r3, [r1, #16]
 314:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_Start(VL53L8A1_DEV_CENTER, RS_MODE_ASYNC_CONTINUOUS);
 911              		.loc 1 314 3 is_stmt 1 view .LVU186
 912 001e 0120     		movs	r0, #1
 913 0020 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_ConfigProfile
 914              	.LVL81:
 315:TOF/App/app_tof.c **** }
 915              		.loc 1 315 3 view .LVU187
 916 0024 0321     		movs	r1, #3
 917 0026 0120     		movs	r0, #1
 918 0028 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_Start
 919              	.LVL82:
ARM GAS  C:\Temp\ccuPsKVP.s 			page 28


 316:TOF/App/app_tof.c **** 
 920              		.loc 1 316 1 is_stmt 0 view .LVU188
 921 002c 08BD     		pop	{r3, pc}
 922              	.L74:
 923 002e 00BF     		.align	2
 924              	.L73:
 925 0030 00000000 		.word	Profile
 926              		.cfi_endproc
 927              	.LFE143:
 929              		.section	.text.handle_cmd,"ax",%progbits
 930              		.align	1
 931              		.syntax unified
 932              		.thumb
 933              		.thumb_func
 935              	handle_cmd:
 936              	.LVL83:
 937              	.LFB146:
 339:TOF/App/app_tof.c ****   switch (cmd)
 938              		.loc 1 339 1 is_stmt 1 view -0
 939              		.cfi_startproc
 940              		@ args = 0, pretend = 0, frame = 0
 941              		@ frame_needed = 0, uses_anonymous_args = 0
 339:TOF/App/app_tof.c ****   switch (cmd)
 942              		.loc 1 339 1 is_stmt 0 view .LVU190
 943 0000 08B5     		push	{r3, lr}
 944              		.cfi_def_cfa_offset 8
 945              		.cfi_offset 3, -8
 946              		.cfi_offset 14, -4
 340:TOF/App/app_tof.c ****   {
 947              		.loc 1 340 3 is_stmt 1 view .LVU191
 948 0002 7228     		cmp	r0, #114
 949 0004 04D0     		beq	.L76
 950 0006 7328     		cmp	r0, #115
 951 0008 07D0     		beq	.L77
 952 000a 6328     		cmp	r0, #99
 953 000c 0AD0     		beq	.L81
 954              	.LVL84:
 955              	.L75:
 359:TOF/App/app_tof.c **** 
 956              		.loc 1 359 1 is_stmt 0 view .LVU192
 957 000e 08BD     		pop	{r3, pc}
 958              	.LVL85:
 959              	.L76:
 343:TOF/App/app_tof.c ****       clear_screen();
 960              		.loc 1 343 7 is_stmt 1 view .LVU193
 961 0010 FFF7FEFF 		bl	toggle_resolution
 962              	.LVL86:
 344:TOF/App/app_tof.c ****       break;
 963              		.loc 1 344 7 view .LVU194
 964 0014 FFF7FEFF 		bl	clear_screen
 965              	.LVL87:
 345:TOF/App/app_tof.c **** 
 966              		.loc 1 345 7 view .LVU195
 967 0018 F9E7     		b	.L75
 968              	.LVL88:
 969              	.L77:
 348:TOF/App/app_tof.c ****       clear_screen();
ARM GAS  C:\Temp\ccuPsKVP.s 			page 29


 970              		.loc 1 348 7 view .LVU196
 971 001a FFF7FEFF 		bl	toggle_signal_and_ambient
 972              	.LVL89:
 349:TOF/App/app_tof.c ****       break;
 973              		.loc 1 349 7 view .LVU197
 974 001e FFF7FEFF 		bl	clear_screen
 975              	.LVL90:
 350:TOF/App/app_tof.c **** 
 976              		.loc 1 350 7 view .LVU198
 977 0022 F4E7     		b	.L75
 978              	.LVL91:
 979              	.L81:
 353:TOF/App/app_tof.c ****       break;
 980              		.loc 1 353 7 view .LVU199
 981 0024 FFF7FEFF 		bl	clear_screen
 982              	.LVL92:
 354:TOF/App/app_tof.c **** 
 983              		.loc 1 354 7 view .LVU200
 359:TOF/App/app_tof.c **** 
 984              		.loc 1 359 1 is_stmt 0 view .LVU201
 985 0028 F1E7     		b	.L75
 986              		.cfi_endproc
 987              	.LFE146:
 989              		.section	.rodata.MX_53L8A1_SimpleRanging_Process.str1.4,"aMS",%progbits,1
 990              		.align	2
 991              	.LC29:
 992 0000 2D2D2D20 		.ascii	"--- XTALK CALIBRATION ---\000"
 992      5854414C 
 992      4B204341 
 992      4C494252 
 992      4154494F 
 993 001a 0000     		.align	2
 994              	.LC30:
 995 001c 50757420 		.ascii	"Put a target with %u %% reflectance at %u mm\012\000"
 995      61207461 
 995      72676574 
 995      20776974 
 995      68202575 
 996 004a 0000     		.align	2
 997              	.LC31:
 998 004c 50726573 		.ascii	"Press the user button to continue...\000"
 998      73207468 
 998      65207573 
 998      65722062 
 998      7574746F 
 999 0071 000000   		.align	2
 1000              	.LC32:
 1001 0074 2D2D2D20 		.ascii	"--- BEGIN XTALK CALIBRATION ---\000"
 1001      42454749 
 1001      4E205854 
 1001      414C4B20 
 1001      43414C49 
 1002              		.align	2
 1003              	.LC33:
 1004 0094 2D2D2D20 		.ascii	"--- END OF XTALK CALIBRATION ---\000"
 1004      454E4420 
 1004      4F462058 
ARM GAS  C:\Temp\ccuPsKVP.s 			page 30


 1004      54414C4B 
 1004      2043414C 
 1005 00b5 000000   		.align	2
 1006              	.LC34:
 1007 00b8 564C3533 		.ascii	"VL53L8A1_RANGING_SENSOR_Start failed\000"
 1007      4C384131 
 1007      5F52414E 
 1007      47494E47 
 1007      5F53454E 
 1008              		.section	.text.MX_53L8A1_SimpleRanging_Process,"ax",%progbits
 1009              		.align	1
 1010              		.syntax unified
 1011              		.thumb
 1012              		.thumb_func
 1014              	MX_53L8A1_SimpleRanging_Process:
 1015              	.LFB140:
 128:TOF/App/app_tof.c ****   uint32_t Id;
 1016              		.loc 1 128 1 is_stmt 1 view -0
 1017              		.cfi_startproc
 1018              		@ args = 0, pretend = 0, frame = 8
 1019              		@ frame_needed = 0, uses_anonymous_args = 0
 1020 0000 00B5     		push	{lr}
 1021              		.cfi_def_cfa_offset 4
 1022              		.cfi_offset 14, -4
 1023 0002 83B0     		sub	sp, sp, #12
 1024              		.cfi_def_cfa_offset 16
 129:TOF/App/app_tof.c **** 
 1025              		.loc 1 129 3 view .LVU203
 132:TOF/App/app_tof.c ****   uint16_t cal_distance = 600; /* expressed in millimiters (mm) / range 600 mm - 3000 mm*/
 1026              		.loc 1 132 3 view .LVU204
 1027              	.LVL93:
 133:TOF/App/app_tof.c **** 
 1028              		.loc 1 133 3 view .LVU205
 135:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_GetCapabilities(VL53L8A1_DEV_CENTER, &Cap);
 1029              		.loc 1 135 3 view .LVU206
 1030 0004 01A9     		add	r1, sp, #4
 1031 0006 0120     		movs	r0, #1
 1032 0008 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_ReadID
 1033              	.LVL94:
 136:TOF/App/app_tof.c **** 
 1034              		.loc 1 136 3 view .LVU207
 1035 000c 2A49     		ldr	r1, .L91
 1036 000e 0120     		movs	r0, #1
 1037 0010 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_GetCapabilities
 1038              	.LVL95:
 138:TOF/App/app_tof.c ****   Profile.TimingBudget = TIMING_BUDGET;
 1039              		.loc 1 138 3 view .LVU208
 138:TOF/App/app_tof.c ****   Profile.TimingBudget = TIMING_BUDGET;
 1040              		.loc 1 138 26 is_stmt 0 view .LVU209
 1041 0014 2949     		ldr	r1, .L91+4
 1042 0016 0120     		movs	r0, #1
 1043 0018 0860     		str	r0, [r1]
 139:TOF/App/app_tof.c ****   Profile.Frequency = RANGING_FREQUENCY; /* Ranging frequency Hz (shall be consistent with TimingBu
 1044              		.loc 1 139 3 is_stmt 1 view .LVU210
 139:TOF/App/app_tof.c ****   Profile.Frequency = RANGING_FREQUENCY; /* Ranging frequency Hz (shall be consistent with TimingBu
 1045              		.loc 1 139 24 is_stmt 0 view .LVU211
 1046 001a 1E23     		movs	r3, #30
ARM GAS  C:\Temp\ccuPsKVP.s 			page 31


 1047 001c 4B60     		str	r3, [r1, #4]
 140:TOF/App/app_tof.c ****   Profile.EnableAmbient = 0; /* Enable: 1, Disable: 0 */
 1048              		.loc 1 140 3 is_stmt 1 view .LVU212
 140:TOF/App/app_tof.c ****   Profile.EnableAmbient = 0; /* Enable: 1, Disable: 0 */
 1049              		.loc 1 140 21 is_stmt 0 view .LVU213
 1050 001e 0A23     		movs	r3, #10
 1051 0020 8B60     		str	r3, [r1, #8]
 141:TOF/App/app_tof.c ****   Profile.EnableSignal = 0; /* Enable: 1, Disable: 0 */
 1052              		.loc 1 141 3 is_stmt 1 view .LVU214
 141:TOF/App/app_tof.c ****   Profile.EnableSignal = 0; /* Enable: 1, Disable: 0 */
 1053              		.loc 1 141 25 is_stmt 0 view .LVU215
 1054 0022 0023     		movs	r3, #0
 1055 0024 CB60     		str	r3, [r1, #12]
 142:TOF/App/app_tof.c **** 
 1056              		.loc 1 142 3 is_stmt 1 view .LVU216
 142:TOF/App/app_tof.c **** 
 1057              		.loc 1 142 24 is_stmt 0 view .LVU217
 1058 0026 0B61     		str	r3, [r1, #16]
 145:TOF/App/app_tof.c **** 
 1059              		.loc 1 145 3 is_stmt 1 view .LVU218
 1060 0028 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_ConfigProfile
 1061              	.LVL96:
 147:TOF/App/app_tof.c ****   printf("Put a target with %u %% reflectance at %u mm\n", reflectance, cal_distance);
 1062              		.loc 1 147 3 view .LVU219
 1063 002c 2448     		ldr	r0, .L91+8
 1064 002e FFF7FEFF 		bl	puts
 1065              	.LVL97:
 148:TOF/App/app_tof.c ****   printf("Press the user button to continue...\n");
 1066              		.loc 1 148 3 view .LVU220
 1067 0032 4FF41672 		mov	r2, #600
 1068 0036 1021     		movs	r1, #16
 1069 0038 2248     		ldr	r0, .L91+12
 1070 003a FFF7FEFF 		bl	printf
 1071              	.LVL98:
 149:TOF/App/app_tof.c **** 
 1072              		.loc 1 149 3 view .LVU221
 1073 003e 2248     		ldr	r0, .L91+16
 1074 0040 FFF7FEFF 		bl	puts
 1075              	.LVL99:
 152:TOF/App/app_tof.c ****   PushButtonDetected = 0;
 1076              		.loc 1 152 3 view .LVU222
 1077              	.L83:
 152:TOF/App/app_tof.c ****   PushButtonDetected = 0;
 1078              		.loc 1 152 29 discriminator 1 view .LVU223
 1079 0044 214B     		ldr	r3, .L91+20
 1080 0046 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1081 0048 DBB2     		uxtb	r3, r3
 1082 004a 012B     		cmp	r3, #1
 1083 004c FAD1     		bne	.L83
 153:TOF/App/app_tof.c **** 
 1084              		.loc 1 153 3 view .LVU224
 153:TOF/App/app_tof.c **** 
 1085              		.loc 1 153 22 is_stmt 0 view .LVU225
 1086 004e 1F4B     		ldr	r3, .L91+20
 1087 0050 0022     		movs	r2, #0
 1088 0052 1A70     		strb	r2, [r3]
 155:TOF/App/app_tof.c ****   VL53L8A1_RANGING_SENSOR_XTalkCalibration(VL53L8A1_DEV_CENTER, reflectance, cal_distance);
ARM GAS  C:\Temp\ccuPsKVP.s 			page 32


 1089              		.loc 1 155 3 is_stmt 1 view .LVU226
 1090 0054 1E48     		ldr	r0, .L91+24
 1091 0056 FFF7FEFF 		bl	puts
 1092              	.LVL100:
 156:TOF/App/app_tof.c ****   printf("--- END OF XTALK CALIBRATION ---\n");
 1093              		.loc 1 156 3 view .LVU227
 1094 005a 4FF41672 		mov	r2, #600
 1095 005e 1021     		movs	r1, #16
 1096 0060 0120     		movs	r0, #1
 1097 0062 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_XTalkCalibration
 1098              	.LVL101:
 157:TOF/App/app_tof.c **** 
 1099              		.loc 1 157 3 view .LVU228
 1100 0066 1B48     		ldr	r0, .L91+28
 1101 0068 FFF7FEFF 		bl	puts
 1102              	.LVL102:
 159:TOF/App/app_tof.c **** 
 1103              		.loc 1 159 3 view .LVU229
 159:TOF/App/app_tof.c **** 
 1104              		.loc 1 159 12 is_stmt 0 view .LVU230
 1105 006c 0321     		movs	r1, #3
 1106 006e 0120     		movs	r0, #1
 1107 0070 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_Start
 1108              	.LVL103:
 159:TOF/App/app_tof.c **** 
 1109              		.loc 1 159 10 view .LVU231
 1110 0074 184B     		ldr	r3, .L91+32
 1111 0076 1860     		str	r0, [r3]
 161:TOF/App/app_tof.c ****   {
 1112              		.loc 1 161 3 is_stmt 1 view .LVU232
 161:TOF/App/app_tof.c ****   {
 1113              		.loc 1 161 6 is_stmt 0 view .LVU233
 1114 0078 58B9     		cbnz	r0, .L89
 1115              	.L87:
 167:TOF/App/app_tof.c ****   {
 1116              		.loc 1 167 3 is_stmt 1 view .LVU234
 170:TOF/App/app_tof.c ****     {
 1117              		.loc 1 170 5 view .LVU235
 170:TOF/App/app_tof.c ****     {
 1118              		.loc 1 170 27 is_stmt 0 view .LVU236
 1119 007a 184B     		ldr	r3, .L91+36
 1120 007c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 170:TOF/App/app_tof.c ****     {
 1121              		.loc 1 170 8 view .LVU237
 1122 007e 63B9     		cbnz	r3, .L90
 1123              	.L86:
 181:TOF/App/app_tof.c ****     {
 1124              		.loc 1 181 5 is_stmt 1 view .LVU238
 181:TOF/App/app_tof.c ****     {
 1125              		.loc 1 181 9 is_stmt 0 view .LVU239
 1126 0080 FFF7FEFF 		bl	com_has_data
 1127              	.LVL104:
 181:TOF/App/app_tof.c ****     {
 1128              		.loc 1 181 8 view .LVU240
 1129 0084 0028     		cmp	r0, #0
 1130 0086 F8D0     		beq	.L87
 183:TOF/App/app_tof.c ****     }
ARM GAS  C:\Temp\ccuPsKVP.s 			page 33


 1131              		.loc 1 183 7 is_stmt 1 view .LVU241
 1132 0088 FFF7FEFF 		bl	get_key
 1133              	.LVL105:
 1134 008c FFF7FEFF 		bl	handle_cmd
 1135              	.LVL106:
 1136 0090 F3E7     		b	.L87
 1137              	.L89:
 163:TOF/App/app_tof.c ****     while (1);
 1138              		.loc 1 163 5 view .LVU242
 1139 0092 1348     		ldr	r0, .L91+40
 1140 0094 FFF7FEFF 		bl	puts
 1141              	.LVL107:
 1142              	.L85:
 164:TOF/App/app_tof.c ****   }
 1143              		.loc 1 164 5 discriminator 1 view .LVU243
 164:TOF/App/app_tof.c ****   }
 1144              		.loc 1 164 11 discriminator 1 view .LVU244
 1145 0098 FEE7     		b	.L85
 1146              	.L90:
 172:TOF/App/app_tof.c **** 
 1147              		.loc 1 172 7 view .LVU245
 172:TOF/App/app_tof.c **** 
 1148              		.loc 1 172 25 is_stmt 0 view .LVU246
 1149 009a 104B     		ldr	r3, .L91+36
 1150 009c 0022     		movs	r2, #0
 1151 009e 1A70     		strb	r2, [r3]
 174:TOF/App/app_tof.c **** 
 1152              		.loc 1 174 7 is_stmt 1 view .LVU247
 174:TOF/App/app_tof.c **** 
 1153              		.loc 1 174 16 is_stmt 0 view .LVU248
 1154 00a0 1049     		ldr	r1, .L91+44
 1155 00a2 0120     		movs	r0, #1
 1156 00a4 FFF7FEFF 		bl	VL53L8A1_RANGING_SENSOR_GetDistance
 1157              	.LVL108:
 174:TOF/App/app_tof.c **** 
 1158              		.loc 1 174 14 view .LVU249
 1159 00a8 0B4B     		ldr	r3, .L91+32
 1160 00aa 1860     		str	r0, [r3]
 176:TOF/App/app_tof.c ****       {
 1161              		.loc 1 176 7 is_stmt 1 view .LVU250
 176:TOF/App/app_tof.c ****       {
 1162              		.loc 1 176 10 is_stmt 0 view .LVU251
 1163 00ac 0028     		cmp	r0, #0
 1164 00ae E7D1     		bne	.L86
 178:TOF/App/app_tof.c ****       }
 1165              		.loc 1 178 9 is_stmt 1 view .LVU252
 1166 00b0 0C48     		ldr	r0, .L91+44
 1167 00b2 FFF7FEFF 		bl	print_result
 1168              	.LVL109:
 1169 00b6 E3E7     		b	.L86
 1170              	.L92:
 1171              		.align	2
 1172              	.L91:
 1173 00b8 00000000 		.word	Cap
 1174 00bc 00000000 		.word	Profile
 1175 00c0 00000000 		.word	.LC29
 1176 00c4 1C000000 		.word	.LC30
ARM GAS  C:\Temp\ccuPsKVP.s 			page 34


 1177 00c8 4C000000 		.word	.LC31
 1178 00cc 00000000 		.word	PushButtonDetected
 1179 00d0 74000000 		.word	.LC32
 1180 00d4 94000000 		.word	.LC33
 1181 00d8 00000000 		.word	status
 1182 00dc 00000000 		.word	ToF_EventDetected
 1183 00e0 B8000000 		.word	.LC34
 1184 00e4 00000000 		.word	Result
 1185              		.cfi_endproc
 1186              	.LFE140:
 1188              		.section	.text.MX_TOF_Init,"ax",%progbits
 1189              		.align	1
 1190              		.global	MX_TOF_Init
 1191              		.syntax unified
 1192              		.thumb
 1193              		.thumb_func
 1195              	MX_TOF_Init:
 1196              	.LFB137:
  62:TOF/App/app_tof.c ****   /* USER CODE BEGIN SV */
 1197              		.loc 1 62 1 view -0
 1198              		.cfi_startproc
 1199              		@ args = 0, pretend = 0, frame = 0
 1200              		@ frame_needed = 0, uses_anonymous_args = 0
 1201 0000 08B5     		push	{r3, lr}
 1202              		.cfi_def_cfa_offset 8
 1203              		.cfi_offset 3, -8
 1204              		.cfi_offset 14, -4
  73:TOF/App/app_tof.c **** 
 1205              		.loc 1 73 3 view .LVU254
 1206 0002 FFF7FEFF 		bl	MX_53L8A1_SimpleRanging_Init
 1207              	.LVL110:
  78:TOF/App/app_tof.c **** 
 1208              		.loc 1 78 1 is_stmt 0 view .LVU255
 1209 0006 08BD     		pop	{r3, pc}
 1210              		.cfi_endproc
 1211              	.LFE137:
 1213              		.section	.text.MX_TOF_Process,"ax",%progbits
 1214              		.align	1
 1215              		.global	MX_TOF_Process
 1216              		.syntax unified
 1217              		.thumb
 1218              		.thumb_func
 1220              	MX_TOF_Process:
 1221              	.LFB138:
  84:TOF/App/app_tof.c ****   /* USER CODE BEGIN TOF_Process_PreTreatment */
 1222              		.loc 1 84 1 is_stmt 1 view -0
 1223              		.cfi_startproc
 1224              		@ Volatile: function does not return.
 1225              		@ args = 0, pretend = 0, frame = 0
 1226              		@ frame_needed = 0, uses_anonymous_args = 0
 1227 0000 08B5     		push	{r3, lr}
 1228              		.cfi_def_cfa_offset 8
 1229              		.cfi_offset 3, -8
 1230              		.cfi_offset 14, -4
  89:TOF/App/app_tof.c **** 
 1231              		.loc 1 89 3 view .LVU257
 1232 0002 FFF7FEFF 		bl	MX_53L8A1_SimpleRanging_Process
ARM GAS  C:\Temp\ccuPsKVP.s 			page 35


 1233              	.LVL111:
 1234              		.cfi_endproc
 1235              	.LFE138:
 1237              		.section	.text.BSP_PB_Callback,"ax",%progbits
 1238              		.align	1
 1239              		.global	BSP_PB_Callback
 1240              		.syntax unified
 1241              		.thumb
 1242              		.thumb_func
 1244              	BSP_PB_Callback:
 1245              	.LVL112:
 1246              	.LFB149:
 374:TOF/App/app_tof.c **** 
 375:TOF/App/app_tof.c **** void BSP_PB_Callback(Button_TypeDef Button)
 376:TOF/App/app_tof.c **** {
 1247              		.loc 1 376 1 view -0
 1248              		.cfi_startproc
 1249              		@ args = 0, pretend = 0, frame = 0
 1250              		@ frame_needed = 0, uses_anonymous_args = 0
 1251              		@ link register save eliminated.
 377:TOF/App/app_tof.c ****   PushButtonDetected = 1;
 1252              		.loc 1 377 3 view .LVU259
 1253              		.loc 1 377 22 is_stmt 0 view .LVU260
 1254 0000 014B     		ldr	r3, .L98
 1255 0002 0122     		movs	r2, #1
 1256 0004 1A70     		strb	r2, [r3]
 378:TOF/App/app_tof.c **** }
 1257              		.loc 1 378 1 view .LVU261
 1258 0006 7047     		bx	lr
 1259              	.L99:
 1260              		.align	2
 1261              	.L98:
 1262 0008 00000000 		.word	PushButtonDetected
 1263              		.cfi_endproc
 1264              	.LFE149:
 1266              		.global	ToF_EventDetected
 1267              		.section	.bss.ToF_EventDetected,"aw",%nobits
 1270              	ToF_EventDetected:
 1271 0000 00       		.space	1
 1272              		.section	.bss.PushButtonDetected,"aw",%nobits
 1275              	PushButtonDetected:
 1276 0000 00       		.space	1
 1277              		.section	.bss.status,"aw",%nobits
 1278              		.align	2
 1281              	status:
 1282 0000 00000000 		.space	4
 1283              		.section	.bss.Result,"aw",%nobits
 1284              		.align	2
 1287              	Result:
 1288 0000 00000000 		.space	1284
 1288      00000000 
 1288      00000000 
 1288      00000000 
 1288      00000000 
 1289              		.section	.bss.Profile,"aw",%nobits
 1290              		.align	2
 1293              	Profile:
ARM GAS  C:\Temp\ccuPsKVP.s 			page 36


 1294 0000 00000000 		.space	20
 1294      00000000 
 1294      00000000 
 1294      00000000 
 1294      00000000 
 1295              		.section	.bss.Cap,"aw",%nobits
 1296              		.align	2
 1299              	Cap:
 1300 0000 00000000 		.space	16
 1300      00000000 
 1300      00000000 
 1300      00000000 
 1301              		.text
 1302              	.Letext0:
 1303              		.file 2 "c:\\users\\jessejabezarendse\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-
 1304              		.file 3 "c:\\users\\jessejabezarendse\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-
 1305              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f411xe.h"
 1306              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1307              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1308              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1309              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 1310              		.file 9 "Drivers/BSP/STM32F4xx_Nucleo/stm32f4xx_nucleo.h"
 1311              		.file 10 "c:\\users\\jessejabezarendse\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for
 1312              		.file 11 "Drivers/BSP/Components/vl53l8cx/modules/vl53l8cx_plugin_xtalk.h"
 1313              		.file 12 "Drivers/BSP/53L8A1/53l8a1_ranging_sensor.h"
 1314              		.file 13 "c:\\users\\jessejabezarendse\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for
 1315              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 1316              		.file 15 "<built-in>"
ARM GAS  C:\Temp\ccuPsKVP.s 			page 37


DEFINED SYMBOLS
                            *ABS*:00000000 app_tof.c
  C:\Temp\ccuPsKVP.s:21     .text.com_has_data:00000000 $t
  C:\Temp\ccuPsKVP.s:26     .text.com_has_data:00000000 com_has_data
  C:\Temp\ccuPsKVP.s:45     .text.com_has_data:0000000c $d
  C:\Temp\ccuPsKVP.s:50     .rodata.clear_screen.str1.4:00000000 $d
  C:\Temp\ccuPsKVP.s:54     .text.clear_screen:00000000 $t
  C:\Temp\ccuPsKVP.s:59     .text.clear_screen:00000000 clear_screen
  C:\Temp\ccuPsKVP.s:79     .text.clear_screen:0000000c $d
  C:\Temp\ccuPsKVP.s:84     .rodata.MX_53L8A1_SimpleRanging_Init.str1.4:00000000 $d
  C:\Temp\ccuPsKVP.s:97     .text.MX_53L8A1_SimpleRanging_Init:00000000 $t
  C:\Temp\ccuPsKVP.s:102    .text.MX_53L8A1_SimpleRanging_Init:00000000 MX_53L8A1_SimpleRanging_Init
  C:\Temp\ccuPsKVP.s:200    .text.MX_53L8A1_SimpleRanging_Init:00000080 $d
  C:\Temp\ccuPsKVP.s:1281   .bss.status:00000000 status
  C:\Temp\ccuPsKVP.s:210    .rodata.display_commands_banner.str1.4:00000000 $d
  C:\Temp\ccuPsKVP.s:229    .text.display_commands_banner:00000000 $t
  C:\Temp\ccuPsKVP.s:234    .text.display_commands_banner:00000000 display_commands_banner
  C:\Temp\ccuPsKVP.s:282    .text.display_commands_banner:00000038 $d
  C:\Temp\ccuPsKVP.s:293    .rodata.print_result.str1.4:00000000 $d
  C:\Temp\ccuPsKVP.s:348    .text.print_result:00000000 $t
  C:\Temp\ccuPsKVP.s:353    .text.print_result:00000000 print_result
  C:\Temp\ccuPsKVP.s:724    .text.print_result:000001a8 $d
  C:\Temp\ccuPsKVP.s:1293   .bss.Profile:00000000 Profile
  C:\Temp\ccuPsKVP.s:747    .text.get_key:00000000 $t
  C:\Temp\ccuPsKVP.s:752    .text.get_key:00000000 get_key
  C:\Temp\ccuPsKVP.s:784    .text.get_key:00000024 $d
  C:\Temp\ccuPsKVP.s:789    .text.toggle_resolution:00000000 $t
  C:\Temp\ccuPsKVP.s:794    .text.toggle_resolution:00000000 toggle_resolution
  C:\Temp\ccuPsKVP.s:818    .text.toggle_resolution:00000016 $d
  C:\Temp\ccuPsKVP.s:822    .text.toggle_resolution:0000001a $t
  C:\Temp\ccuPsKVP.s:870    .text.toggle_resolution:0000004c $d
  C:\Temp\ccuPsKVP.s:875    .text.toggle_signal_and_ambient:00000000 $t
  C:\Temp\ccuPsKVP.s:880    .text.toggle_signal_and_ambient:00000000 toggle_signal_and_ambient
  C:\Temp\ccuPsKVP.s:925    .text.toggle_signal_and_ambient:00000030 $d
  C:\Temp\ccuPsKVP.s:930    .text.handle_cmd:00000000 $t
  C:\Temp\ccuPsKVP.s:935    .text.handle_cmd:00000000 handle_cmd
  C:\Temp\ccuPsKVP.s:990    .rodata.MX_53L8A1_SimpleRanging_Process.str1.4:00000000 $d
  C:\Temp\ccuPsKVP.s:1009   .text.MX_53L8A1_SimpleRanging_Process:00000000 $t
  C:\Temp\ccuPsKVP.s:1014   .text.MX_53L8A1_SimpleRanging_Process:00000000 MX_53L8A1_SimpleRanging_Process
  C:\Temp\ccuPsKVP.s:1173   .text.MX_53L8A1_SimpleRanging_Process:000000b8 $d
  C:\Temp\ccuPsKVP.s:1299   .bss.Cap:00000000 Cap
  C:\Temp\ccuPsKVP.s:1275   .bss.PushButtonDetected:00000000 PushButtonDetected
  C:\Temp\ccuPsKVP.s:1270   .bss.ToF_EventDetected:00000000 ToF_EventDetected
  C:\Temp\ccuPsKVP.s:1287   .bss.Result:00000000 Result
  C:\Temp\ccuPsKVP.s:1189   .text.MX_TOF_Init:00000000 $t
  C:\Temp\ccuPsKVP.s:1195   .text.MX_TOF_Init:00000000 MX_TOF_Init
  C:\Temp\ccuPsKVP.s:1214   .text.MX_TOF_Process:00000000 $t
  C:\Temp\ccuPsKVP.s:1220   .text.MX_TOF_Process:00000000 MX_TOF_Process
  C:\Temp\ccuPsKVP.s:1238   .text.BSP_PB_Callback:00000000 $t
  C:\Temp\ccuPsKVP.s:1244   .text.BSP_PB_Callback:00000000 BSP_PB_Callback
  C:\Temp\ccuPsKVP.s:1262   .text.BSP_PB_Callback:00000008 $d
  C:\Temp\ccuPsKVP.s:1271   .bss.ToF_EventDetected:00000000 $d
  C:\Temp\ccuPsKVP.s:1276   .bss.PushButtonDetected:00000000 $d
  C:\Temp\ccuPsKVP.s:1278   .bss.status:00000000 $d
  C:\Temp\ccuPsKVP.s:1284   .bss.Result:00000000 $d
  C:\Temp\ccuPsKVP.s:1290   .bss.Profile:00000000 $d
  C:\Temp\ccuPsKVP.s:1296   .bss.Cap:00000000 $d
ARM GAS  C:\Temp\ccuPsKVP.s 			page 38



UNDEFINED SYMBOLS
hcom_uart
printf
BSP_COM_Init
BSP_PB_Init
HAL_GPIO_WritePin
HAL_Delay
puts
VL53L8A1_RANGING_SENSOR_Init
putchar
HAL_UART_Receive
VL53L8A1_RANGING_SENSOR_Stop
VL53L8A1_RANGING_SENSOR_ConfigProfile
VL53L8A1_RANGING_SENSOR_Start
VL53L8A1_RANGING_SENSOR_ReadID
VL53L8A1_RANGING_SENSOR_GetCapabilities
VL53L8A1_RANGING_SENSOR_XTalkCalibration
VL53L8A1_RANGING_SENSOR_GetDistance
