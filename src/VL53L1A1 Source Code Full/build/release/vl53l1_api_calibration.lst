ARM GAS  C:\Temp\ccBeJPnu.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"vl53l1_api_calibration.c"
  16              		.text
  17              		.section	.text.VL53L1_get_and_avg_xtalk_samples,"ax",%progbits
  18              		.align	1
  19              		.global	VL53L1_get_and_avg_xtalk_samples
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	VL53L1_get_and_avg_xtalk_samples:
  25              		@ args = 28, pretend = 0, frame = 32
  26              		@ frame_needed = 0, uses_anonymous_args = 0
  27 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  28 0004 89B0     		sub	sp, sp, #36
  29 0006 0546     		mov	r5, r0
  30 0008 8A46     		mov	r10, r1
  31 000a 0392     		str	r2, [sp, #12]
  32 000c 0193     		str	r3, [sp, #4]
  33 000e BDF94830 		ldrsh	r3, [sp, #72]
  34 0012 0493     		str	r3, [sp, #16]
  35 0014 BDF84C30 		ldrh	r3, [sp, #76]
  36 0018 0693     		str	r3, [sp, #24]
  37 001a 9DF850B0 		ldrb	fp, [sp, #80]	@ zero_extendqisi2
  38 001e 9DF85430 		ldrb	r3, [sp, #84]	@ zero_extendqisi2
  39 0022 0593     		str	r3, [sp, #20]
  40 0024 169F     		ldr	r7, [sp, #88]
  41 0026 00F5AC53 		add	r3, r0, #5504
  42 002a 1033     		adds	r3, r3, #16
  43 002c 0293     		str	r3, [sp, #8]
  44 002e 90F8DB90 		ldrb	r9, [r0, #219]	@ zero_extendqisi2
  45 0032 09F10109 		add	r9, r9, #1
  46 0036 5FFA89F9 		uxtb	r9, r9
  47 003a 00F58053 		add	r3, r0, #4096
  48 003e 93F8F433 		ldrb	r3, [r3, #1012]	@ zero_extendqisi2
  49 0042 0793     		str	r3, [sp, #28]
  50 0044 FFF7FEFF 		bl	VL53L1_dynamic_xtalk_correction_disable
  51 0048 0646     		mov	r6, r0
  52 004a 2846     		mov	r0, r5
  53 004c FFF7FEFF 		bl	VL53L1_load_patch
  54 0050 0EB1     		cbz	r6, .L21
  55              	.L2:
  56 0052 0024     		movs	r4, #0
  57 0054 35E0     		b	.L11
  58              	.L21:
ARM GAS  C:\Temp\ccBeJPnu.s 			page 2


  59 0056 0522     		movs	r2, #5
  60 0058 0399     		ldr	r1, [sp, #12]
  61 005a 2846     		mov	r0, r5
  62 005c FFF7FEFF 		bl	VL53L1_init_and_start_range
  63 0060 0646     		mov	r6, r0
  64 0062 F6E7     		b	.L2
  65              	.L24:
  66 0064 2846     		mov	r0, r5
  67 0066 FFF7FEFF 		bl	VL53L1_wait_for_range_completion
  68 006a 0646     		mov	r6, r0
  69 006c 38BB     		cbnz	r0, .L4
  70 006e 029A     		ldr	r2, [sp, #8]
  71 0070 0221     		movs	r1, #2
  72 0072 2846     		mov	r0, r5
  73 0074 FFF7FEFF 		bl	VL53L1_get_device_results
  74 0078 0646     		mov	r6, r0
  75 007a 28E0     		b	.L3
  76              	.L8:
  77 007c 0132     		adds	r2, r2, #1
  78 007e D2B2     		uxtb	r2, r2
  79              	.L6:
  80 0080 9042     		cmp	r0, r2
  81 0082 38D9     		bls	.L7
  82 0084 05F58051 		add	r1, r5, #4096
  83 0088 4FF04C0C 		mov	ip, #76
  84 008c 0CFB0211 		mla	r1, ip, r2, r1
  85 0090 B1F9EAC5 		ldrsh	ip, [r1, #1514]
  86 0094 B8F94610 		ldrsh	r1, [r8, #70]
  87 0098 8C45     		cmp	ip, r1
  88 009a EFDA     		bge	.L8
  89 009c 05F5AC51 		add	r1, r5, #5504
  90 00a0 1031     		adds	r1, r1, #16
  91 00a2 4FF04C0C 		mov	ip, #76
  92 00a6 0CFB02FC 		mul	ip, ip, r2
  93 00aa 0CF1100C 		add	ip, ip, #16
  94 00ae 6144     		add	r1, r1, ip
  95 00b0 01F10408 		add	r8, r1, #4
  96 00b4 E2E7     		b	.L8
  97              	.L25:
  98 00b6 0122     		movs	r2, #1
  99 00b8 E2E7     		b	.L6
 100              	.L5:
 101 00ba 002E     		cmp	r6, #0
 102 00bc 63D0     		beq	.L22
 103              	.L4:
 104 00be 0134     		adds	r4, r4, #1
 105 00c0 E4B2     		uxtb	r4, r4
 106              	.L11:
 107 00c2 0AFB09F3 		mul	r3, r10, r9
 108 00c6 9C42     		cmp	r4, r3
 109 00c8 69DC     		bgt	.L23
 110 00ca 002E     		cmp	r6, #0
 111 00cc CAD0     		beq	.L24
 112              	.L3:
 113 00ce 002E     		cmp	r6, #0
 114 00d0 F5D1     		bne	.L4
 115 00d2 95F84B30 		ldrb	r3, [r5, #75]	@ zero_extendqisi2
ARM GAS  C:\Temp\ccBeJPnu.s 			page 3


 116 00d6 062B     		cmp	r3, #6
 117 00d8 EFD0     		beq	.L5
 118 00da 95F85130 		ldrb	r3, [r5, #81]	@ zero_extendqisi2
 119 00de 5B44     		add	r3, r3, fp
 120 00e0 DBB2     		uxtb	r3, r3
 121 00e2 05F5AD58 		add	r8, r5, #5536
 122 00e6 08F10408 		add	r8, r8, #4
 123 00ea 05F58052 		add	r2, r5, #4096
 124 00ee 92F8A205 		ldrb	r0, [r2, #1442]	@ zero_extendqisi2
 125 00f2 0128     		cmp	r0, #1
 126 00f4 DFD8     		bhi	.L25
 127              	.L7:
 128 00f6 0028     		cmp	r0, #0
 129 00f8 DFD0     		beq	.L5
 130 00fa B8F94620 		ldrsh	r2, [r8, #70]
 131 00fe 0199     		ldr	r1, [sp, #4]
 132 0100 8A42     		cmp	r2, r1
 133 0102 DADA     		bge	.L5
 134 0104 0499     		ldr	r1, [sp, #16]
 135 0106 8A42     		cmp	r2, r1
 136 0108 D7DD     		ble	.L5
 137 010a D8F83820 		ldr	r2, [r8, #56]
 138 010e 0699     		ldr	r1, [sp, #24]
 139 0110 B2EB011F 		cmp	r2, r1, lsl #4
 140 0114 D1D2     		bcs	.L5
 141 0116 03EBC300 		add	r0, r3, r3, lsl #3
 142 011a 07EB8000 		add	r0, r7, r0, lsl #2
 143 011e 027A     		ldrb	r2, [r0, #8]	@ zero_extendqisi2
 144 0120 0132     		adds	r2, r2, #1
 145 0122 0272     		strb	r2, [r0, #8]
 146 0124 C268     		ldr	r2, [r0, #12]
 147 0126 D8F83810 		ldr	r1, [r8, #56]
 148 012a 0A44     		add	r2, r2, r1
 149 012c C260     		str	r2, [r0, #12]
 150 012e 4269     		ldr	r2, [r0, #20]
 151 0130 D8F82C10 		ldr	r1, [r8, #44]
 152 0134 0A44     		add	r2, r2, r1
 153 0136 4261     		str	r2, [r0, #20]
 154 0138 C269     		ldr	r2, [r0, #28]
 155 013a B8F83C10 		ldrh	r1, [r8, #60]
 156 013e 0A44     		add	r2, r2, r1
 157 0140 C261     		str	r2, [r0, #28]
 158 0142 416A     		ldr	r1, [r0, #36]
 159 0144 B8F84000 		ldrh	r0, [r8, #64]
 160 0148 03EBC302 		add	r2, r3, r3, lsl #3
 161 014c 07EB8202 		add	r2, r7, r2, lsl #2
 162 0150 0144     		add	r1, r1, r0
 163 0152 5162     		str	r1, [r2, #36]
 164 0154 032B     		cmp	r3, #3
 165 0156 B0D9     		bls	.L5
 166 0158 1799     		ldr	r1, [sp, #92]
 167 015a 05F22440 		addw	r0, r5, #1060
 168 015e FFF7FEFF 		bl	VL53L1_sum_histogram_data
 169 0162 0646     		mov	r6, r0
 170 0164 98F80830 		ldrb	r3, [r8, #8]	@ zero_extendqisi2
 171 0168 97F81422 		ldrb	r2, [r7, #532]	@ zero_extendqisi2
 172 016c 9342     		cmp	r3, r2
ARM GAS  C:\Temp\ccBeJPnu.s 			page 4


 173 016e 01D2     		bcs	.L10
 174 0170 87F81432 		strb	r3, [r7, #532]
 175              	.L10:
 176 0174 98F80C30 		ldrb	r3, [r8, #12]	@ zero_extendqisi2
 177 0178 97F81522 		ldrb	r2, [r7, #533]	@ zero_extendqisi2
 178 017c 9342     		cmp	r3, r2
 179 017e 9CD9     		bls	.L5
 180 0180 87F81532 		strb	r3, [r7, #533]
 181 0184 99E7     		b	.L5
 182              	.L22:
 183 0186 2846     		mov	r0, r5
 184 0188 FFF7FEFF 		bl	VL53L1_wait_for_firmware_ready
 185 018c 0646     		mov	r6, r0
 186 018e 0028     		cmp	r0, #0
 187 0190 95D1     		bne	.L4
 188 0192 0399     		ldr	r1, [sp, #12]
 189 0194 2846     		mov	r0, r5
 190 0196 FFF7FEFF 		bl	VL53L1_clear_interrupt_and_enable_next_range
 191 019a 0646     		mov	r6, r0
 192 019c 8FE7     		b	.L4
 193              	.L23:
 194 019e 26B1     		cbz	r6, .L26
 195              	.L13:
 196 01a0 2846     		mov	r0, r5
 197 01a2 FFF7FEFF 		bl	VL53L1_unload_patch
 198 01a6 0022     		movs	r2, #0
 199 01a8 16E0     		b	.L14
 200              	.L26:
 201 01aa 2846     		mov	r0, r5
 202 01ac FFF7FEFF 		bl	VL53L1_stop_range
 203 01b0 0646     		mov	r6, r0
 204 01b2 F5E7     		b	.L13
 205              	.L15:
 206 01b4 03EBC301 		add	r1, r3, r3, lsl #3
 207 01b8 07EB8101 		add	r1, r7, r1, lsl #2
 208 01bc C868     		ldr	r0, [r1, #12]
 209 01be 0861     		str	r0, [r1, #16]
 210 01c0 4869     		ldr	r0, [r1, #20]
 211 01c2 8861     		str	r0, [r1, #24]
 212 01c4 C869     		ldr	r0, [r1, #28]
 213 01c6 0862     		str	r0, [r1, #32]
 214 01c8 496A     		ldr	r1, [r1, #36]
 215 01ca 03EBC303 		add	r3, r3, r3, lsl #3
 216 01ce 07EB8303 		add	r3, r7, r3, lsl #2
 217 01d2 9962     		str	r1, [r3, #40]
 218              	.L16:
 219 01d4 0132     		adds	r2, r2, #1
 220 01d6 D2B2     		uxtb	r2, r2
 221              	.L14:
 222 01d8 95F8DB30 		ldrb	r3, [r5, #219]	@ zero_extendqisi2
 223 01dc 9342     		cmp	r3, r2
 224 01de 21D3     		bcc	.L27
 225 01e0 02EB0B03 		add	r3, r2, fp
 226 01e4 03EBC301 		add	r1, r3, r3, lsl #3
 227 01e8 07EB8101 		add	r1, r7, r1, lsl #2
 228 01ec 0C7A     		ldrb	r4, [r1, #8]	@ zero_extendqisi2
 229 01ee 002C     		cmp	r4, #0
ARM GAS  C:\Temp\ccBeJPnu.s 			page 5


 230 01f0 E0D0     		beq	.L15
 231 01f2 03EBC301 		add	r1, r3, r3, lsl #3
 232 01f6 07EB8101 		add	r1, r7, r1, lsl #2
 233 01fa C868     		ldr	r0, [r1, #12]
 234 01fc B0FBF4F0 		udiv	r0, r0, r4
 235 0200 0861     		str	r0, [r1, #16]
 236 0202 4869     		ldr	r0, [r1, #20]
 237 0204 90FBF4F0 		sdiv	r0, r0, r4
 238 0208 8861     		str	r0, [r1, #24]
 239 020a C869     		ldr	r0, [r1, #28]
 240 020c B0FBF4F0 		udiv	r0, r0, r4
 241 0210 0862     		str	r0, [r1, #32]
 242 0212 496A     		ldr	r1, [r1, #36]
 243 0214 B1FBF4F1 		udiv	r1, r1, r4
 244 0218 03EBC303 		add	r3, r3, r3, lsl #3
 245 021c 07EB8303 		add	r3, r7, r3, lsl #2
 246 0220 9962     		str	r1, [r3, #40]
 247 0222 D7E7     		b	.L16
 248              	.L27:
 249 0224 AC22     		movs	r2, #172
 250 0226 05F22441 		addw	r1, r5, #1060
 251 022a 1898     		ldr	r0, [sp, #96]
 252 022c FFF7FEFF 		bl	memcpy
 253 0230 1EB1     		cbz	r6, .L28
 254              	.L18:
 255 0232 3046     		mov	r0, r6
 256 0234 09B0     		add	sp, sp, #36
 257              		@ sp needed
 258 0236 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 259              	.L28:
 260 023a 059B     		ldr	r3, [sp, #20]
 261 023c 03EBC303 		add	r3, r3, r3, lsl #3
 262 0240 07EB8307 		add	r7, r7, r3, lsl #2
 263 0244 189A     		ldr	r2, [sp, #96]
 264 0246 1799     		ldr	r1, [sp, #92]
 265 0248 387A     		ldrb	r0, [r7, #8]	@ zero_extendqisi2
 266 024a FFF7FEFF 		bl	VL53L1_avg_histogram_data
 267 024e 0646     		mov	r6, r0
 268 0250 0028     		cmp	r0, #0
 269 0252 EED1     		bne	.L18
 270 0254 079B     		ldr	r3, [sp, #28]
 271 0256 012B     		cmp	r3, #1
 272 0258 EBD1     		bne	.L18
 273 025a 2846     		mov	r0, r5
 274 025c FFF7FEFF 		bl	VL53L1_dynamic_xtalk_correction_enable
 275 0260 0646     		mov	r6, r0
 276 0262 E6E7     		b	.L18
 278              		.section	.text.VL53L1_run_xtalk_extraction,"ax",%progbits
 279              		.align	1
 280              		.global	VL53L1_run_xtalk_extraction
 281              		.syntax unified
 282              		.thumb
 283              		.thumb_func
 285              	VL53L1_run_xtalk_extraction:
 286              		@ args = 0, pretend = 0, frame = 0
 287              		@ frame_needed = 0, uses_anonymous_args = 0
 288 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
ARM GAS  C:\Temp\ccBeJPnu.s 			page 6


 289 0004 88B0     		sub	sp, sp, #32
 290 0006 0446     		mov	r4, r0
 291 0008 0D46     		mov	r5, r1
 292 000a 00F59456 		add	r6, r0, #4736
 293 000e 1C36     		adds	r6, r6, #28
 294 0010 00F5FB68 		add	r8, r0, #2008
 295 0014 4246     		mov	r2, r8
 296 0016 1821     		movs	r1, #24
 297 0018 0020     		movs	r0, #0
 298 001a FFF7FEFF 		bl	VL53L1_init_histogram_bin_data_struct
 299 001e 04F22C77 		addw	r7, r4, #1836
 300 0022 3A46     		mov	r2, r7
 301 0024 1821     		movs	r1, #24
 302 0026 0020     		movs	r0, #0
 303 0028 FFF7FEFF 		bl	VL53L1_init_histogram_bin_data_struct
 304 002c 6423     		movs	r3, #100
 305 002e 0293     		str	r3, [sp, #8]
 306 0030 D4F8DC32 		ldr	r3, [r4, #732]
 307 0034 0193     		str	r3, [sp, #4]
 308 0036 D4F8D832 		ldr	r3, [r4, #728]
 309 003a 0093     		str	r3, [sp]
 310 003c D4F8D432 		ldr	r3, [r4, #724]
 311 0040 B4F8D022 		ldrh	r2, [r4, #720]
 312 0044 0E21     		movs	r1, #14
 313 0046 2046     		mov	r0, r4
 314 0048 FFF7FEFF 		bl	VL53L1_set_preset_mode
 315 004c A0B1     		cbz	r0, .L58
 316              	.L30:
 317 004e 0523     		movs	r3, #5
 318 0050 84F87436 		strb	r3, [r4, #1652]
 319 0054 94F8DB30 		ldrb	r3, [r4, #219]	@ zero_extendqisi2
 320 0058 0133     		adds	r3, r3, #1
 321 005a 84F87536 		strb	r3, [r4, #1653]
 322 005e FF23     		movs	r3, #255
 323 0060 84F88438 		strb	r3, [r4, #2180]
 324 0064 0022     		movs	r2, #0
 325 0066 84F88528 		strb	r2, [r4, #2181]
 326 006a 84F87126 		strb	r2, [r4, #1649]
 327 006e 84F87226 		strb	r2, [r4, #1650]
 328 0072 84F87326 		strb	r2, [r4, #1651]
 329 0076 20E0     		b	.L31
 330              	.L58:
 331 0078 2046     		mov	r0, r4
 332 007a FFF7FEFF 		bl	VL53L1_disable_xtalk_compensation
 333 007e E6E7     		b	.L30
 334              	.L32:
 335 0080 02EBC203 		add	r3, r2, r2, lsl #3
 336 0084 04EB8303 		add	r3, r4, r3, lsl #2
 337 0088 0021     		movs	r1, #0
 338 008a 83F87816 		strb	r1, [r3, #1656]
 339 008e C3F88816 		str	r1, [r3, #1672]
 340 0092 C3F88416 		str	r1, [r3, #1668]
 341 0096 C3F87C16 		str	r1, [r3, #1660]
 342 009a C3F88016 		str	r1, [r3, #1664]
 343 009e C3F88C16 		str	r1, [r3, #1676]
 344 00a2 C3F89016 		str	r1, [r3, #1680]
 345 00a6 C3F89416 		str	r1, [r3, #1684]
ARM GAS  C:\Temp\ccBeJPnu.s 			page 7


 346 00aa 02EBC203 		add	r3, r2, r2, lsl #3
 347 00ae 04EB8303 		add	r3, r4, r3, lsl #2
 348 00b2 C3F89816 		str	r1, [r3, #1688]
 349 00b6 0132     		adds	r2, r2, #1
 350 00b8 D2B2     		uxtb	r2, r2
 351              	.L31:
 352 00ba 042A     		cmp	r2, #4
 353 00bc E0D9     		bls	.L32
 354 00be 90B1     		cbz	r0, .L59
 355 00c0 0027     		movs	r7, #0
 356              	.L33:
 357 00c2 0028     		cmp	r0, #0
 358 00c4 40F09880 		bne	.L34
 359 00c8 002F     		cmp	r7, #0
 360 00ca 36D0     		beq	.L60
 361              	.L35:
 362 00cc 0028     		cmp	r0, #0
 363 00ce 40F09380 		bne	.L34
 364 00d2 002F     		cmp	r7, #0
 365 00d4 3AD0     		beq	.L50
 366              	.L37:
 367 00d6 2046     		mov	r0, r4
 368 00d8 FFF7FEFF 		bl	VL53L1_enable_xtalk_compensation
 369 00dc 0028     		cmp	r0, #0
 370 00de 40F08B80 		bne	.L34
 371 00e2 0023     		movs	r3, #0
 372 00e4 52E0     		b	.L39
 373              	.L59:
 374 00e6 CDF81880 		str	r8, [sp, #24]
 375 00ea 0597     		str	r7, [sp, #20]
 376 00ec 04F5CE63 		add	r3, r4, #1648
 377 00f0 0493     		str	r3, [sp, #16]
 378 00f2 0423     		movs	r3, #4
 379 00f4 0393     		str	r3, [sp, #12]
 380 00f6 0023     		movs	r3, #0
 381 00f8 0293     		str	r3, [sp, #8]
 382 00fa B4F8E632 		ldrh	r3, [r4, #742]
 383 00fe 0193     		str	r3, [sp, #4]
 384 0100 B4F9E232 		ldrsh	r3, [r4, #738]
 385 0104 0093     		str	r3, [sp]
 386 0106 B4F9E432 		ldrsh	r3, [r4, #740]
 387 010a 2022     		movs	r2, #32
 388 010c 94F8E012 		ldrb	r1, [r4, #736]	@ zero_extendqisi2
 389 0110 2046     		mov	r0, r4
 390 0112 FFF7FEFF 		bl	VL53L1_get_and_avg_xtalk_samples
 391 0116 0028     		cmp	r0, #0
 392 0118 6DD1     		bne	.L47
 393 011a 94F80837 		ldrb	r3, [r4, #1800]	@ zero_extendqisi2
 394 011e 43B1     		cbz	r3, .L48
 395 0120 D4F82037 		ldr	r3, [r4, #1824]
 396 0124 B4F8E822 		ldrh	r2, [r4, #744]
 397 0128 B3EB421F 		cmp	r3, r2, lsl #5
 398 012c 03D8     		bhi	.L49
 399 012e 0027     		movs	r7, #0
 400 0130 C7E7     		b	.L33
 401              	.L48:
 402 0132 0127     		movs	r7, #1
ARM GAS  C:\Temp\ccBeJPnu.s 			page 8


 403 0134 C5E7     		b	.L33
 404              	.L49:
 405 0136 0127     		movs	r7, #1
 406 0138 C3E7     		b	.L33
 407              	.L60:
 408 013a 3346     		mov	r3, r6
 409 013c 04F27C52 		addw	r2, r4, #1404
 410 0140 04F5CE61 		add	r1, r4, #1648
 411 0144 2046     		mov	r0, r4
 412 0146 FFF7FEFF 		bl	VL53L1_ipp_xtalk_calibration_process_data
 413 014a BFE7     		b	.L35
 414              	.L50:
 415 014c 3B46     		mov	r3, r7
 416              	.L36:
 417 014e 052B     		cmp	r3, #5
 418 0150 0BD8     		bhi	.L61
 419 0152 04F58052 		add	r2, r4, #4096
 420 0156 D2F89C12 		ldr	r1, [r2, #668]
 421 015a 981C     		adds	r0, r3, #2
 422 015c 02EB8002 		add	r2, r2, r0, lsl #2
 423 0160 C2F89C12 		str	r1, [r2, #668]
 424 0164 0133     		adds	r3, r3, #1
 425 0166 DBB2     		uxtb	r3, r3
 426 0168 F1E7     		b	.L36
 427              	.L61:
 428 016a 04F58053 		add	r3, r4, #4096
 429 016e B3F9A022 		ldrsh	r2, [r3, #672]
 430 0172 A4F8F022 		strh	r2, [r4, #752]	@ movhi
 431 0176 B3F9A222 		ldrsh	r2, [r3, #674]
 432 017a A4F8F222 		strh	r2, [r4, #754]	@ movhi
 433 017e D3F89C32 		ldr	r3, [r3, #668]
 434 0182 C4F8EC32 		str	r3, [r4, #748]
 435 0186 A6E7     		b	.L37
 436              	.L42:
 437 0188 0133     		adds	r3, r3, #1
 438 018a DBB2     		uxtb	r3, r3
 439              	.L39:
 440 018c 94F87426 		ldrb	r2, [r4, #1652]	@ zero_extendqisi2
 441 0190 9A42     		cmp	r2, r3
 442 0192 31D9     		bls	.L34
 443 0194 1A46     		mov	r2, r3
 444 0196 03EBC301 		add	r1, r3, r3, lsl #3
 445 019a 04EB8101 		add	r1, r4, r1, lsl #2
 446 019e 91F87816 		ldrb	r1, [r1, #1656]	@ zero_extendqisi2
 447 01a2 94F8E062 		ldrb	r6, [r4, #736]	@ zero_extendqisi2
 448 01a6 B142     		cmp	r1, r6
 449 01a8 09D0     		beq	.L40
 450 01aa 94F87166 		ldrb	r6, [r4, #1649]	@ zero_extendqisi2
 451 01ae 4FF0010C 		mov	ip, #1
 452 01b2 0CFA03FC 		lsl	ip, ip, r3
 453 01b6 46EA0C06 		orr	r6, r6, ip
 454 01ba 84F87166 		strb	r6, [r4, #1649]
 455              	.L40:
 456 01be 31B9     		cbnz	r1, .L41
 457 01c0 94F87216 		ldrb	r1, [r4, #1650]	@ zero_extendqisi2
 458 01c4 0126     		movs	r6, #1
 459 01c6 9640     		lsls	r6, r6, r2
ARM GAS  C:\Temp\ccBeJPnu.s 			page 9


 460 01c8 3143     		orrs	r1, r1, r6
 461 01ca 84F87216 		strb	r1, [r4, #1650]
 462              	.L41:
 463 01ce B4F8E862 		ldrh	r6, [r4, #744]
 464 01d2 02EBC201 		add	r1, r2, r2, lsl #3
 465 01d6 04EB8101 		add	r1, r4, r1, lsl #2
 466 01da D1F89016 		ldr	r1, [r1, #1680]
 467 01de B1EB461F 		cmp	r1, r6, lsl #5
 468 01e2 D1D9     		bls	.L42
 469 01e4 94F87316 		ldrb	r1, [r4, #1651]	@ zero_extendqisi2
 470 01e8 0126     		movs	r6, #1
 471 01ea 06FA02F2 		lsl	r2, r6, r2
 472 01ee 0A43     		orrs	r2, r2, r1
 473 01f0 84F87326 		strb	r2, [r4, #1651]
 474 01f4 C8E7     		b	.L42
 475              	.L47:
 476 01f6 0027     		movs	r7, #0
 477              	.L34:
 478 01f8 7FB1     		cbz	r7, .L44
 479 01fa 94F80837 		ldrb	r3, [r4, #1800]	@ zero_extendqisi2
 480 01fe CBB1     		cbz	r3, .L52
 481 0200 D4F82037 		ldr	r3, [r4, #1824]
 482 0204 B4F8E822 		ldrh	r2, [r4, #744]
 483 0208 B3EB421F 		cmp	r3, r2, lsl #5
 484 020c 15D8     		bhi	.L62
 485              	.L45:
 486 020e 84F87006 		strb	r0, [r4, #1648]
 487 0212 2870     		strb	r0, [r5]
 488 0214 08B0     		add	sp, sp, #32
 489              		@ sp needed
 490 0216 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 491              	.L44:
 492 021a 94F87236 		ldrb	r3, [r4, #1650]	@ zero_extendqisi2
 493 021e 7BB9     		cbnz	r3, .L54
 494 0220 94F87336 		ldrb	r3, [r4, #1651]	@ zero_extendqisi2
 495 0224 7BB9     		cbnz	r3, .L55
 496 0226 94F87136 		ldrb	r3, [r4, #1649]	@ zero_extendqisi2
 497 022a 002B     		cmp	r3, #0
 498 022c EFD0     		beq	.L45
 499 022e 6FF02500 		mvn	r0, #37
 500 0232 ECE7     		b	.L45
 501              	.L52:
 502 0234 6FF01500 		mvn	r0, #21
 503 0238 E9E7     		b	.L45
 504              	.L62:
 505 023a 6FF01600 		mvn	r0, #22
 506 023e E6E7     		b	.L45
 507              	.L54:
 508 0240 6FF02600 		mvn	r0, #38
 509 0244 E3E7     		b	.L45
 510              	.L55:
 511 0246 6FF02700 		mvn	r0, #39
 512 024a E0E7     		b	.L45
 514              		.section	.text.VL53L1_run_offset_calibration,"ax",%progbits
 515              		.align	1
 516              		.global	VL53L1_run_offset_calibration
 517              		.syntax unified
ARM GAS  C:\Temp\ccBeJPnu.s 			page 10


 518              		.thumb
 519              		.thumb_func
 521              	VL53L1_run_offset_calibration:
 522              		@ args = 0, pretend = 0, frame = 24
 523              		@ frame_needed = 0, uses_anonymous_args = 0
 524 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 525 0004 8BB0     		sub	sp, sp, #44
 526 0006 0546     		mov	r5, r0
 527 0008 8946     		mov	r9, r1
 528 000a 1746     		mov	r7, r2
 529 000c 1C46     		mov	r4, r3
 530 000e 00F5AC5B 		add	fp, r0, #5504
 531 0012 0BF1100B 		add	fp, fp, #16
 532 0016 B0F88EA3 		ldrh	r10, [r0, #910]
 533 001a 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 534 001c 022B     		cmp	r3, #2
 535 001e 0BD0     		beq	.L64
 536 0020 042B     		cmp	r3, #4
 537 0022 09D0     		beq	.L64
 538 0024 0122     		movs	r2, #1
 539 0026 8DF82420 		strb	r2, [sp, #36]
 540 002a 0422     		movs	r2, #4
 541 002c 8DF82520 		strb	r2, [sp, #37]
 542 0030 0522     		movs	r2, #5
 543 0032 8DF82620 		strb	r2, [sp, #38]
 544 0036 08E0     		b	.L66
 545              	.L64:
 546 0038 0B22     		movs	r2, #11
 547 003a 8DF82420 		strb	r2, [sp, #36]
 548 003e 1622     		movs	r2, #22
 549 0040 8DF82520 		strb	r2, [sp, #37]
 550 0044 1722     		movs	r2, #23
 551 0046 8DF82620 		strb	r2, [sp, #38]
 552              	.L66:
 553 004a 95F82023 		ldrb	r2, [r5, #800]	@ zero_extendqisi2
 554 004e 8DF82020 		strb	r2, [sp, #32]
 555 0052 95F82123 		ldrb	r2, [r5, #801]	@ zero_extendqisi2
 556 0056 8DF82120 		strb	r2, [sp, #33]
 557 005a 95F82223 		ldrb	r2, [r5, #802]	@ zero_extendqisi2
 558 005e 8DF82220 		strb	r2, [sp, #34]
 559 0062 033B     		subs	r3, r3, #3
 560 0064 012B     		cmp	r3, #1
 561 0066 35D9     		bls	.L100
 562 0068 0023     		movs	r3, #0
 563 006a A5F87430 		strh	r3, [r5, #116]	@ movhi
 564 006e A5F87630 		strh	r3, [r5, #118]	@ movhi
 565 0072 05F58053 		add	r3, r5, #4096
 566 0076 0322     		movs	r2, #3
 567 0078 83F84323 		strb	r2, [r3, #835]
 568              	.L68:
 569 007c 0023     		movs	r3, #0
 570 007e A5F87230 		strh	r3, [r5, #114]	@ movhi
 571 0082 05F58052 		add	r2, r5, #4096
 572 0086 0321     		movs	r1, #3
 573 0088 82F84213 		strb	r1, [r2, #834]
 574 008c A2F83C93 		strh	r9, [r2, #828]	@ movhi
 575 0090 A2F83E73 		strh	r7, [r2, #830]	@ movhi
ARM GAS  C:\Temp\ccBeJPnu.s 			page 11


 576              	.L69:
 577 0094 022B     		cmp	r3, #2
 578 0096 23D8     		bhi	.L101
 579 0098 C3EBC302 		rsb	r2, r3, r3, lsl #3
 580 009c 05EB8202 		add	r2, r5, r2, lsl #2
 581 00a0 0021     		movs	r1, #0
 582 00a2 41F24430 		movw	r0, #4932
 583 00a6 1154     		strb	r1, [r2, r0]
 584 00a8 41F24830 		movw	r0, #4936
 585 00ac 1154     		strb	r1, [r2, r0]
 586 00ae 41F24C30 		movw	r0, #4940
 587 00b2 1150     		str	r1, [r2, r0]
 588 00b4 41F25030 		movw	r0, #4944
 589 00b8 1150     		str	r1, [r2, r0]
 590 00ba 41F25430 		movw	r0, #4948
 591 00be 1150     		str	r1, [r2, r0]
 592 00c0 C3EBC302 		rsb	r2, r3, r3, lsl #3
 593 00c4 05EB8202 		add	r2, r5, r2, lsl #2
 594 00c8 41F25830 		movw	r0, #4952
 595 00cc 1150     		str	r1, [r2, r0]
 596 00ce 0133     		adds	r3, r3, #1
 597 00d0 DBB2     		uxtb	r3, r3
 598 00d2 DFE7     		b	.L69
 599              	.L100:
 600 00d4 05F58053 		add	r3, r5, #4096
 601 00d8 0122     		movs	r2, #1
 602 00da 83F84323 		strb	r2, [r3, #835]
 603 00de CDE7     		b	.L68
 604              	.L101:
 605 00e0 05F58053 		add	r3, r5, #4096
 606 00e4 93F8F433 		ldrb	r3, [r3, #1012]	@ zero_extendqisi2
 607 00e8 0793     		str	r3, [sp, #28]
 608 00ea 2846     		mov	r0, r5
 609 00ec FFF7FEFF 		bl	VL53L1_dynamic_xtalk_correction_disable
 610 00f0 0646     		mov	r6, r0
 611 00f2 4FF00008 		mov	r8, #0
 612 00f6 0597     		str	r7, [sp, #20]
 613 00f8 0694     		str	r4, [sp, #24]
 614 00fa C8E0     		b	.L71
 615              	.L108:
 616 00fc 6423     		movs	r3, #100
 617 00fe 0293     		str	r3, [sp, #8]
 618 0100 D5F81833 		ldr	r3, [r5, #792]
 619 0104 0193     		str	r3, [sp, #4]
 620 0106 D5F81C33 		ldr	r3, [r5, #796]
 621 010a 0093     		str	r3, [sp]
 622 010c D5F81433 		ldr	r3, [r5, #788]
 623 0110 B5F81023 		ldrh	r2, [r5, #784]
 624 0114 2846     		mov	r0, r5
 625 0116 FFF7FEFF 		bl	VL53L1_set_preset_mode
 626 011a 0646     		mov	r6, r0
 627 011c CDE0     		b	.L72
 628              	.L109:
 629 011e 0522     		movs	r2, #5
 630 0120 2021     		movs	r1, #32
 631 0122 2846     		mov	r0, r5
 632 0124 FFF7FEFF 		bl	VL53L1_init_and_start_range
ARM GAS  C:\Temp\ccBeJPnu.s 			page 12


 633 0128 0646     		mov	r6, r0
 634 012a CEE0     		b	.L73
 635              	.L104:
 636 012c 2846     		mov	r0, r5
 637 012e FFF7FEFF 		bl	VL53L1_wait_for_range_completion
 638 0132 0646     		mov	r6, r0
 639 0134 A0B9     		cbnz	r0, .L74
 640 0136 5A46     		mov	r2, fp
 641 0138 0221     		movs	r1, #2
 642 013a 2846     		mov	r0, r5
 643 013c FFF7FEFF 		bl	VL53L1_get_device_results
 644 0140 0646     		mov	r6, r0
 645 0142 0DE0     		b	.L74
 646              	.L75:
 647 0144 002E     		cmp	r6, #0
 648 0146 4FD0     		beq	.L102
 649              	.L76:
 650 0148 0134     		adds	r4, r4, #1
 651 014a E4B2     		uxtb	r4, r4
 652              	.L77:
 653 014c 07F12803 		add	r3, r7, #40
 654 0150 6B44     		add	r3, sp, r3
 655 0152 13F8083C 		ldrb	r3, [r3, #-8]	@ zero_extendqisi2
 656 0156 0233     		adds	r3, r3, #2
 657 0158 9C42     		cmp	r4, r3
 658 015a 51DC     		bgt	.L103
 659 015c 002E     		cmp	r6, #0
 660 015e E5D0     		beq	.L104
 661              	.L74:
 662 0160 05F58053 		add	r3, r5, #4096
 663 0164 93F8A235 		ldrb	r3, [r3, #1442]	@ zero_extendqisi2
 664 0168 002B     		cmp	r3, #0
 665 016a EBD0     		beq	.L75
 666 016c 05F58053 		add	r3, r5, #4096
 667 0170 93F89335 		ldrb	r3, [r3, #1427]	@ zero_extendqisi2
 668 0174 012B     		cmp	r3, #1
 669 0176 E5D9     		bls	.L75
 670 0178 05F58053 		add	r3, r5, #4096
 671 017c 93F8EE35 		ldrb	r3, [r3, #1518]	@ zero_extendqisi2
 672 0180 092B     		cmp	r3, #9
 673 0182 DFD1     		bne	.L75
 674 0184 C7EBC703 		rsb	r3, r7, r7, lsl #3
 675 0188 05EB8303 		add	r3, r5, r3, lsl #2
 676 018c 41F24831 		movw	r1, #4936
 677 0190 5A5C     		ldrb	r2, [r3, r1]	@ zero_extendqisi2
 678 0192 0132     		adds	r2, r2, #1
 679 0194 5A54     		strb	r2, [r3, r1]
 680 0196 41F24C30 		movw	r0, #4940
 681 019a 1958     		ldr	r1, [r3, r0]
 682 019c 05F58052 		add	r2, r5, #4096
 683 01a0 B2F8BAC5 		ldrh	ip, [r2, #1466]
 684 01a4 6144     		add	r1, r1, ip
 685 01a6 1950     		str	r1, [r3, r0]
 686 01a8 41F25030 		movw	r0, #4944
 687 01ac 1958     		ldr	r1, [r3, r0]
 688 01ae B2F8D4C5 		ldrh	ip, [r2, #1492]
 689 01b2 6144     		add	r1, r1, ip
ARM GAS  C:\Temp\ccBeJPnu.s 			page 13


 690 01b4 1950     		str	r1, [r3, r0]
 691 01b6 41F25430 		movw	r0, #4948
 692 01ba 1958     		ldr	r1, [r3, r0]
 693 01bc B2F8E0C5 		ldrh	ip, [r2, #1504]
 694 01c0 6144     		add	r1, r1, ip
 695 01c2 1950     		str	r1, [r3, r0]
 696 01c4 41F25830 		movw	r0, #4952
 697 01c8 1958     		ldr	r1, [r3, r0]
 698 01ca B2F9EA25 		ldrsh	r2, [r2, #1514]
 699 01ce 1144     		add	r1, r1, r2
 700 01d0 1950     		str	r1, [r3, r0]
 701 01d2 95F88813 		ldrb	r1, [r5, #904]	@ zero_extendqisi2
 702 01d6 41F24532 		movw	r2, #4933
 703 01da 9954     		strb	r1, [r3, r2]
 704 01dc B5F88E13 		ldrh	r1, [r5, #910]
 705 01e0 41F24632 		movw	r2, #4934
 706 01e4 9952     		strh	r1, [r3, r2]	@ movhi
 707 01e6 ADE7     		b	.L75
 708              	.L102:
 709 01e8 2846     		mov	r0, r5
 710 01ea FFF7FEFF 		bl	VL53L1_wait_for_firmware_ready
 711 01ee 0646     		mov	r6, r0
 712 01f0 0028     		cmp	r0, #0
 713 01f2 A9D1     		bne	.L76
 714 01f4 2021     		movs	r1, #32
 715 01f6 2846     		mov	r0, r5
 716 01f8 FFF7FEFF 		bl	VL53L1_clear_interrupt_and_enable_next_range
 717 01fc 0646     		mov	r6, r0
 718 01fe A3E7     		b	.L76
 719              	.L103:
 720 0200 002E     		cmp	r6, #0
 721 0202 64D0     		beq	.L105
 722              	.L79:
 723 0204 2846     		mov	r0, r5
 724 0206 FFF7FEFF 		bl	VL53L1_unload_patch
 725 020a C7EBC703 		rsb	r3, r7, r7, lsl #3
 726 020e 05EB8303 		add	r3, r5, r3, lsl #2
 727 0212 41F24832 		movw	r2, #4936
 728 0216 9A5C     		ldrb	r2, [r3, r2]	@ zero_extendqisi2
 729 0218 002A     		cmp	r2, #0
 730 021a 34D0     		beq	.L80
 731 021c C7EBC703 		rsb	r3, r7, r7, lsl #3
 732 0220 05EB8303 		add	r3, r5, r3, lsl #2
 733 0224 41F24C30 		movw	r0, #4940
 734 0228 1958     		ldr	r1, [r3, r0]
 735 022a 01EB5201 		add	r1, r1, r2, lsr #1
 736 022e 1950     		str	r1, [r3, r0]
 737 0230 B1FBF2F1 		udiv	r1, r1, r2
 738 0234 1950     		str	r1, [r3, r0]
 739 0236 41F25034 		movw	r4, #4944
 740 023a 1859     		ldr	r0, [r3, r4]
 741 023c 00EB5200 		add	r0, r0, r2, lsr #1
 742 0240 1851     		str	r0, [r3, r4]
 743 0242 B0FBF2F0 		udiv	r0, r0, r2
 744 0246 1851     		str	r0, [r3, r4]
 745 0248 41F25434 		movw	r4, #4948
 746 024c 1859     		ldr	r0, [r3, r4]
ARM GAS  C:\Temp\ccBeJPnu.s 			page 14


 747 024e 00EB5200 		add	r0, r0, r2, lsr #1
 748 0252 1851     		str	r0, [r3, r4]
 749 0254 B0FBF2F0 		udiv	r0, r0, r2
 750 0258 1851     		str	r0, [r3, r4]
 751 025a 41F25834 		movw	r4, #4952
 752 025e 1859     		ldr	r0, [r3, r4]
 753 0260 00EB5200 		add	r0, r0, r2, lsr #1
 754 0264 1851     		str	r0, [r3, r4]
 755 0266 90FBF2F2 		sdiv	r2, r0, r2
 756 026a 1A51     		str	r2, [r3, r4]
 757 026c 41F25C30 		movw	r0, #4956
 758 0270 43F80090 		str	r9, [r3, r0]
 759 0274 A9EB0202 		sub	r2, r9, r2
 760 0278 1A50     		str	r2, [r3, r0]
 761 027a 1F46     		mov	r7, r3
 762 027c 41F24433 		movw	r3, #4932
 763 0280 FB5C     		ldrb	r3, [r7, r3]	@ zero_extendqisi2
 764 0282 012B     		cmp	r3, #1
 765 0284 30D0     		beq	.L106
 766              	.L80:
 767 0286 08F10108 		add	r8, r8, #1
 768 028a 5FFA88F8 		uxtb	r8, r8
 769              	.L71:
 770 028e 05F58053 		add	r3, r5, #4096
 771 0292 93F84333 		ldrb	r3, [r3, #835]	@ zero_extendqisi2
 772 0296 4345     		cmp	r3, r8
 773 0298 29D9     		bls	.L107
 774 029a 4746     		mov	r7, r8
 775 029c 08F12803 		add	r3, r8, #40
 776 02a0 6B44     		add	r3, sp, r3
 777 02a2 13F8041C 		ldrb	r1, [r3, #-4]	@ zero_extendqisi2
 778 02a6 C8EBC803 		rsb	r3, r8, r8, lsl #3
 779 02aa 05EB8303 		add	r3, r5, r3, lsl #2
 780 02ae 41F24432 		movw	r2, #4932
 781 02b2 9954     		strb	r1, [r3, r2]
 782 02b4 002E     		cmp	r6, #0
 783 02b6 3FF421AF 		beq	.L108
 784              	.L72:
 785 02ba A5F88EA3 		strh	r10, [r5, #910]	@ movhi
 786 02be 2846     		mov	r0, r5
 787 02c0 FFF7FEFF 		bl	VL53L1_load_patch
 788 02c4 002E     		cmp	r6, #0
 789 02c6 3FF42AAF 		beq	.L109
 790              	.L73:
 791 02ca 0024     		movs	r4, #0
 792 02cc 3EE7     		b	.L77
 793              	.L105:
 794 02ce 2846     		mov	r0, r5
 795 02d0 FFF7FEFF 		bl	VL53L1_stop_range
 796 02d4 0646     		mov	r6, r0
 797 02d6 0028     		cmp	r0, #0
 798 02d8 94D1     		bne	.L79
 799 02da 4FF47A71 		mov	r1, #1000
 800 02de 2846     		mov	r0, r5
 801 02e0 FFF7FEFF 		bl	VL53L1_WaitUs
 802 02e4 0646     		mov	r6, r0
 803 02e6 8DE7     		b	.L79
ARM GAS  C:\Temp\ccBeJPnu.s 			page 15


 804              	.L106:
 805 02e8 1FFA81FA 		uxth	r10, r1
 806 02ec CBE7     		b	.L80
 807              	.L107:
 808 02ee 059F     		ldr	r7, [sp, #20]
 809 02f0 069C     		ldr	r4, [sp, #24]
 810 02f2 2B7F     		ldrb	r3, [r5, #28]	@ zero_extendqisi2
 811 02f4 033B     		subs	r3, r3, #3
 812 02f6 012B     		cmp	r3, #1
 813 02f8 33D9     		bls	.L110
 814 02fa 05F58053 		add	r3, r5, #4096
 815 02fe B3F97823 		ldrsh	r2, [r3, #888]
 816 0302 A5F87420 		strh	r2, [r5, #116]	@ movhi
 817 0306 B3F99423 		ldrsh	r2, [r3, #916]
 818 030a A5F87620 		strh	r2, [r5, #118]	@ movhi
 819 030e 0022     		movs	r2, #0
 820 0310 A5F87220 		strh	r2, [r5, #114]	@ movhi
 821 0314 B3F86823 		ldrh	r2, [r3, #872]
 822 0318 A5F8B420 		strh	r2, [r5, #180]	@ movhi
 823 031c B3F88423 		ldrh	r2, [r3, #900]
 824 0320 A5F8B620 		strh	r2, [r5, #182]	@ movhi
 825 0324 B3F86C23 		ldrh	r2, [r3, #876]
 826 0328 A5F8B820 		strh	r2, [r5, #184]	@ movhi
 827 032c B3F88833 		ldrh	r3, [r3, #904]
 828 0330 A5F8BA30 		strh	r3, [r5, #186]	@ movhi
 829              	.L83:
 830 0334 05F58053 		add	r3, r5, #4096
 831 0338 B3F84C23 		ldrh	r2, [r3, #844]
 832 033c A5F8C620 		strh	r2, [r5, #198]	@ movhi
 833 0340 B3F85033 		ldrh	r3, [r3, #848]
 834 0344 A5F8C830 		strh	r3, [r5, #200]	@ movhi
 835 0348 4FEA0919 		lsl	r9, r9, #4
 836 034c A5F8CA90 		strh	r9, [r5, #202]	@ movhi
 837 0350 A5F8CC70 		strh	r7, [r5, #204]	@ movhi
 838 0354 4FF48073 		mov	r3, #256
 839 0358 A5F8CE30 		strh	r3, [r5, #206]	@ movhi
 840 035c 86B1     		cbz	r6, .L111
 841              	.L84:
 842 035e 0023     		movs	r3, #0
 843 0360 3EE0     		b	.L91
 844              	.L110:
 845 0362 B5F87420 		ldrh	r2, [r5, #116]
 846 0366 05F58053 		add	r3, r5, #4096
 847 036a B3F85C33 		ldrh	r3, [r3, #860]
 848 036e 1A44     		add	r2, r2, r3
 849 0370 A5F87420 		strh	r2, [r5, #116]	@ movhi
 850 0374 B5F87620 		ldrh	r2, [r5, #118]
 851 0378 1344     		add	r3, r3, r2
 852 037a A5F87630 		strh	r3, [r5, #118]	@ movhi
 853 037e D9E7     		b	.L83
 854              	.L111:
 855 0380 05F16001 		add	r1, r5, #96
 856 0384 2846     		mov	r0, r5
 857 0386 FFF7FEFF 		bl	VL53L1_set_customer_nvm_managed
 858 038a 0646     		mov	r6, r0
 859 038c 0028     		cmp	r0, #0
 860 038e E6D1     		bne	.L84
ARM GAS  C:\Temp\ccBeJPnu.s 			page 16


 861 0390 079B     		ldr	r3, [sp, #28]
 862 0392 012B     		cmp	r3, #1
 863 0394 E3D1     		bne	.L84
 864 0396 2846     		mov	r0, r5
 865 0398 FFF7FEFF 		bl	VL53L1_dynamic_xtalk_correction_enable
 866 039c 0646     		mov	r6, r0
 867 039e DEE7     		b	.L84
 868              	.L87:
 869 03a0 C2EBC201 		rsb	r1, r2, r2, lsl #3
 870 03a4 05EB8101 		add	r1, r5, r1, lsl #2
 871 03a8 41F25037 		movw	r7, #4944
 872 03ac C959     		ldr	r1, [r1, r7]
 873 03ae B1F5C85F 		cmp	r1, #6400
 874 03b2 01D9     		bls	.L88
 875 03b4 6FF02006 		mvn	r6, #32
 876              	.L88:
 877 03b8 C2EBC202 		rsb	r2, r2, r2, lsl #3
 878 03bc 05EB8202 		add	r2, r5, r2, lsl #2
 879 03c0 41F24631 		movw	r1, #4934
 880 03c4 525A     		ldrh	r2, [r2, r1]
 881 03c6 B2F5A06F 		cmp	r2, #1280
 882 03ca 01D2     		bcs	.L89
 883 03cc 6FF02106 		mvn	r6, #33
 884              	.L89:
 885 03d0 0AB9     		cbnz	r2, .L90
 886 03d2 6FF01806 		mvn	r6, #24
 887              	.L90:
 888 03d6 08B9     		cbnz	r0, .L85
 889 03d8 6FF01706 		mvn	r6, #23
 890              	.L85:
 891 03dc 0133     		adds	r3, r3, #1
 892 03de DBB2     		uxtb	r3, r3
 893              	.L91:
 894 03e0 05F58052 		add	r2, r5, #4096
 895 03e4 92F84323 		ldrb	r2, [r2, #835]	@ zero_extendqisi2
 896 03e8 9A42     		cmp	r2, r3
 897 03ea 25D9     		bls	.L112
 898 03ec 1A46     		mov	r2, r3
 899 03ee 002E     		cmp	r6, #0
 900 03f0 F4D1     		bne	.L85
 901 03f2 05F58051 		add	r1, r5, #4096
 902 03f6 81F84133 		strb	r3, [r1, #833]
 903 03fa C3EBC301 		rsb	r1, r3, r3, lsl #3
 904 03fe 05EB8101 		add	r1, r5, r1, lsl #2
 905 0402 41F24830 		movw	r0, #4936
 906 0406 085C     		ldrb	r0, [r1, r0]	@ zero_extendqisi2
 907 0408 03F12801 		add	r1, r3, #40
 908 040c 6944     		add	r1, sp, r1
 909 040e 11F8081C 		ldrb	r1, [r1, #-8]	@ zero_extendqisi2
 910 0412 8842     		cmp	r0, r1
 911 0414 01D2     		bcs	.L86
 912 0416 6FF01E06 		mvn	r6, #30
 913              	.L86:
 914 041a 002B     		cmp	r3, #0
 915 041c C0D1     		bne	.L87
 916 041e C2EBC201 		rsb	r1, r2, r2, lsl #3
 917 0422 05EB8101 		add	r1, r5, r1, lsl #2
ARM GAS  C:\Temp\ccBeJPnu.s 			page 17


 918 0426 41F25437 		movw	r7, #4948
 919 042a C959     		ldr	r1, [r1, r7]
 920 042c B1F5006F 		cmp	r1, #2048
 921 0430 B6D9     		bls	.L87
 922 0432 6FF01F06 		mvn	r6, #31
 923 0436 B3E7     		b	.L87
 924              	.L112:
 925 0438 05F58055 		add	r5, r5, #4096
 926 043c 85F84063 		strb	r6, [r5, #832]
 927 0440 2670     		strb	r6, [r4]
 928 0442 3046     		mov	r0, r6
 929 0444 0BB0     		add	sp, sp, #44
 930              		@ sp needed
 931 0446 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 933              		.section	.text.VL53L1_run_phasecal_average,"ax",%progbits
 934              		.align	1
 935              		.global	VL53L1_run_phasecal_average
 936              		.syntax unified
 937              		.thumb
 938              		.thumb_func
 940              	VL53L1_run_phasecal_average:
 941              		@ args = 12, pretend = 0, frame = 8
 942              		@ frame_needed = 0, uses_anonymous_args = 0
 943 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 944 0004 83B0     		sub	sp, sp, #12
 945 0006 0746     		mov	r7, r0
 946 0008 8946     		mov	r9, r1
 947 000a 0192     		str	r2, [sp, #4]
 948 000c 9846     		mov	r8, r3
 949 000e FFF7FEFF 		bl	VL53L1_load_patch
 950 0012 4FF0000A 		mov	r10, #0
 951 0016 CDF800A0 		str	r10, [sp]
 952 001a D346     		mov	fp, r10
 953 001c 5646     		mov	r6, r10
 954 001e 5546     		mov	r5, r10
 955 0020 29E0     		b	.L114
 956              	.L131:
 957 0022 0522     		movs	r2, #5
 958 0024 4946     		mov	r1, r9
 959 0026 3846     		mov	r0, r7
 960 0028 FFF7FEFF 		bl	VL53L1_init_and_start_range
 961 002c 0546     		mov	r5, r0
 962 002e 26E0     		b	.L115
 963              	.L128:
 964 0030 3846     		mov	r0, r7
 965 0032 FFF7FEFF 		bl	VL53L1_wait_for_range_completion
 966 0036 0546     		mov	r5, r0
 967 0038 98B1     		cbz	r0, .L126
 968              	.L118:
 969 003a 0134     		adds	r4, r4, #1
 970 003c A4B2     		uxth	r4, r4
 971              	.L116:
 972 003e 012C     		cmp	r4, #1
 973 0040 16D8     		bhi	.L127
 974 0042 002D     		cmp	r5, #0
 975 0044 F4D0     		beq	.L128
 976              	.L117:
ARM GAS  C:\Temp\ccBeJPnu.s 			page 18


 977 0046 002D     		cmp	r5, #0
 978 0048 F7D1     		bne	.L118
 979 004a 3846     		mov	r0, r7
 980 004c FFF7FEFF 		bl	VL53L1_wait_for_firmware_ready
 981 0050 0546     		mov	r5, r0
 982 0052 0028     		cmp	r0, #0
 983 0054 F1D1     		bne	.L118
 984 0056 4946     		mov	r1, r9
 985 0058 3846     		mov	r0, r7
 986 005a FFF7FEFF 		bl	VL53L1_clear_interrupt_and_enable_next_range
 987 005e 0546     		mov	r5, r0
 988 0060 EBE7     		b	.L118
 989              	.L126:
 990 0062 0C9A     		ldr	r2, [sp, #48]
 991 0064 0221     		movs	r1, #2
 992 0066 3846     		mov	r0, r7
 993 0068 FFF7FEFF 		bl	VL53L1_get_device_results
 994 006c 0546     		mov	r5, r0
 995 006e EAE7     		b	.L117
 996              	.L127:
 997 0070 3DB1     		cbz	r5, .L129
 998              	.L120:
 999 0072 0136     		adds	r6, r6, #1
 1000 0074 B6B2     		uxth	r6, r6
 1001              	.L114:
 1002 0076 4645     		cmp	r6, r8
 1003 0078 30D2     		bcs	.L130
 1004 007a 002D     		cmp	r5, #0
 1005 007c D1D0     		beq	.L131
 1006              	.L115:
 1007 007e 0024     		movs	r4, #0
 1008 0080 DDE7     		b	.L116
 1009              	.L129:
 1010 0082 3846     		mov	r0, r7
 1011 0084 FFF7FEFF 		bl	VL53L1_stop_range
 1012 0088 0546     		mov	r5, r0
 1013 008a 0028     		cmp	r0, #0
 1014 008c F1D1     		bne	.L120
 1015 008e 4FF47A71 		mov	r1, #1000
 1016 0092 3846     		mov	r0, r7
 1017 0094 FFF7FEFF 		bl	VL53L1_WaitUs
 1018 0098 0546     		mov	r5, r0
 1019 009a 0028     		cmp	r0, #0
 1020 009c E9D1     		bne	.L120
 1021 009e 0BF1010B 		add	fp, fp, #1
 1022 00a2 97F8A804 		ldrb	r0, [r7, #1192]	@ zero_extendqisi2
 1023 00a6 FFF7FEFF 		bl	VL53L1_decode_vcsel_period
 1024 00aa B7F8A224 		ldrh	r2, [r7, #1186]
 1025 00ae 02EBC023 		add	r3, r2, r0, lsl #11
 1026 00b2 0199     		ldr	r1, [sp, #4]
 1027 00b4 03EBC123 		add	r3, r3, r1, lsl #11
 1028 00b8 97F8A514 		ldrb	r1, [r7, #1189]	@ zero_extendqisi2
 1029 00bc A3EBC123 		sub	r3, r3, r1, lsl #11
 1030 00c0 C002     		lsls	r0, r0, #11
 1031 00c2 04D0     		beq	.L124
 1032 00c4 B3FBF0F1 		udiv	r1, r3, r0
 1033 00c8 00FB1130 		mls	r0, r0, r1, r3
ARM GAS  C:\Temp\ccBeJPnu.s 			page 19


 1034 00cc 01E0     		b	.L121
 1035              	.L124:
 1036 00ce 6FF00E05 		mvn	r5, #14
 1037              	.L121:
 1038 00d2 009B     		ldr	r3, [sp]
 1039 00d4 1344     		add	r3, r3, r2
 1040 00d6 0093     		str	r3, [sp]
 1041 00d8 8244     		add	r10, r10, r0
 1042 00da CAE7     		b	.L120
 1043              	.L130:
 1044 00dc 3846     		mov	r0, r7
 1045 00de FFF7FEFF 		bl	VL53L1_unload_patch
 1046 00e2 7DB9     		cbnz	r5, .L123
 1047 00e4 BBF1000F 		cmp	fp, #0
 1048 00e8 0CD0     		beq	.L123
 1049 00ea 009B     		ldr	r3, [sp]
 1050 00ec 03EB5B02 		add	r2, r3, fp, lsr #1
 1051 00f0 B2FBFBF2 		udiv	r2, r2, fp
 1052 00f4 0AEB5B03 		add	r3, r10, fp, lsr #1
 1053 00f8 B3FBFBF3 		udiv	r3, r3, fp
 1054 00fc 0D99     		ldr	r1, [sp, #52]
 1055 00fe 0A80     		strh	r2, [r1]	@ movhi
 1056 0100 0E9A     		ldr	r2, [sp, #56]
 1057 0102 1380     		strh	r3, [r2]	@ movhi
 1058              	.L123:
 1059 0104 2846     		mov	r0, r5
 1060 0106 03B0     		add	sp, sp, #12
 1061              		@ sp needed
 1062 0108 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1064              		.section	.text.VL53L1_run_zone_calibration,"ax",%progbits
 1065              		.align	1
 1066              		.global	VL53L1_run_zone_calibration
 1067              		.syntax unified
 1068              		.thumb
 1069              		.thumb_func
 1071              	VL53L1_run_zone_calibration:
 1072              		@ args = 12, pretend = 0, frame = 8
 1073              		@ frame_needed = 0, uses_anonymous_args = 0
 1074 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1075 0004 87B0     		sub	sp, sp, #28
 1076 0006 0446     		mov	r4, r0
 1077 0008 0E46     		mov	r6, r1
 1078 000a 1546     		mov	r5, r2
 1079 000c 1F46     		mov	r7, r3
 1080 000e BDF93890 		ldrsh	r9, [sp, #56]
 1081 0012 00F5AC58 		add	r8, r0, #5504
 1082 0016 08F11008 		add	r8, r8, #16
 1083 001a 0023     		movs	r3, #0
 1084 001c 8DF81730 		strb	r3, [sp, #23]
 1085 0020 6423     		movs	r3, #100
 1086 0022 0293     		str	r3, [sp, #8]
 1087 0024 D0F83033 		ldr	r3, [r0, #816]
 1088 0028 0193     		str	r3, [sp, #4]
 1089 002a D0F82C33 		ldr	r3, [r0, #812]
 1090 002e 0093     		str	r3, [sp]
 1091 0030 D0F82833 		ldr	r3, [r0, #808]
 1092 0034 B0F82423 		ldrh	r2, [r0, #804]
ARM GAS  C:\Temp\ccBeJPnu.s 			page 20


 1093 0038 FFF7FEFF 		bl	VL53L1_set_preset_mode
 1094 003c FF2D     		cmp	r5, #255
 1095 003e 06D0     		beq	.L157
 1096 0040 35B1     		cbz	r5, .L134
 1097 0042 28B9     		cbnz	r0, .L134
 1098 0044 2946     		mov	r1, r5
 1099 0046 2046     		mov	r0, r4
 1100 0048 FFF7FEFF 		bl	VL53L1_set_zone_preset
 1101 004c 00E0     		b	.L134
 1102              	.L157:
 1103 004e B8B1     		cbz	r0, .L158
 1104              	.L134:
 1105 0050 04F5C043 		add	r3, r4, #24576
 1106 0054 83F8806D 		strb	r6, [r3, #3456]
 1107 0058 83F8815D 		strb	r5, [r3, #3457]
 1108 005c 4FEA0912 		lsl	r2, r9, #4
 1109 0060 A3F8822D 		strh	r2, [r3, #3458]	@ movhi
 1110 0064 BDF83C20 		ldrh	r2, [sp, #60]
 1111 0068 A3F8842D 		strh	r2, [r3, #3460]	@ movhi
 1112 006c 1022     		movs	r2, #16
 1113 006e 83F88B2D 		strb	r2, [r3, #3467]
 1114 0072 94F8DB20 		ldrb	r2, [r4, #219]	@ zero_extendqisi2
 1115 0076 0132     		adds	r2, r2, #1
 1116 0078 83F88C2D 		strb	r2, [r3, #3468]
 1117 007c 0023     		movs	r3, #0
 1118 007e 1FE0     		b	.L135
 1119              	.L158:
 1120 0080 3946     		mov	r1, r7
 1121 0082 2046     		mov	r0, r4
 1122 0084 FFF7FEFF 		bl	VL53L1_set_zone_config
 1123 0088 E2E7     		b	.L134
 1124              	.L136:
 1125 008a 04F5C040 		add	r0, r4, #24576
 1126 008e C3EBC302 		rsb	r2, r3, r3, lsl #3
 1127 0092 00EB8202 		add	r2, r0, r2, lsl #2
 1128 0096 0021     		movs	r1, #0
 1129 0098 C2F8901D 		str	r1, [r2, #3472]
 1130 009c C2F8941D 		str	r1, [r2, #3476]
 1131 00a0 C2F8981D 		str	r1, [r2, #3480]
 1132 00a4 C2F89C1D 		str	r1, [r2, #3484]
 1133 00a8 C2F8A01D 		str	r1, [r2, #3488]
 1134 00ac C2F8A41D 		str	r1, [r2, #3492]
 1135 00b0 C3EBC302 		rsb	r2, r3, r3, lsl #3
 1136 00b4 00EB8200 		add	r0, r0, r2, lsl #2
 1137 00b8 C0F8A81D 		str	r1, [r0, #3496]
 1138 00bc 0133     		adds	r3, r3, #1
 1139 00be 9BB2     		uxth	r3, r3
 1140              	.L135:
 1141 00c0 0F2B     		cmp	r3, #15
 1142 00c2 E2D9     		bls	.L136
 1143 00c4 04F5C043 		add	r3, r4, #24576
 1144 00c8 0022     		movs	r2, #0
 1145 00ca A3F8862D 		strh	r2, [r3, #3462]	@ movhi
 1146 00ce A3F8882D 		strh	r2, [r3, #3464]	@ movhi
 1147 00d2 0DF11701 		add	r1, sp, #23
 1148 00d6 2046     		mov	r0, r4
 1149 00d8 FFF7FEFF 		bl	VL53L1_get_offset_correction_mode
ARM GAS  C:\Temp\ccBeJPnu.s 			page 21


 1150 00dc 0646     		mov	r6, r0
 1151 00de 78B1     		cbz	r0, .L159
 1152              	.L137:
 1153 00e0 2046     		mov	r0, r4
 1154 00e2 FFF7FEFF 		bl	VL53L1_load_patch
 1155 00e6 8EB1     		cbz	r6, .L160
 1156              	.L138:
 1157 00e8 B4F83673 		ldrh	r7, [r4, #822]
 1158 00ec 04F5C043 		add	r3, r4, #24576
 1159 00f0 93F88C3D 		ldrb	r3, [r3, #3468]	@ zero_extendqisi2
 1160 00f4 0237     		adds	r7, r7, #2
 1161 00f6 17FB03F7 		smulbb	r7, r7, r3
 1162 00fa BFB2     		uxth	r7, r7
 1163 00fc 0025     		movs	r5, #0
 1164 00fe 1CE0     		b	.L139
 1165              	.L159:
 1166 0100 0021     		movs	r1, #0
 1167 0102 2046     		mov	r0, r4
 1168 0104 FFF7FEFF 		bl	VL53L1_set_offset_correction_mode
 1169 0108 0646     		mov	r6, r0
 1170 010a E9E7     		b	.L137
 1171              	.L160:
 1172 010c 0522     		movs	r2, #5
 1173 010e 2021     		movs	r1, #32
 1174 0110 2046     		mov	r0, r4
 1175 0112 FFF7FEFF 		bl	VL53L1_init_and_start_range
 1176 0116 0646     		mov	r6, r0
 1177 0118 E6E7     		b	.L138
 1178              	.L163:
 1179 011a 2046     		mov	r0, r4
 1180 011c FFF7FEFF 		bl	VL53L1_wait_for_range_completion
 1181 0120 0646     		mov	r6, r0
 1182 0122 70B9     		cbnz	r0, .L140
 1183 0124 4246     		mov	r2, r8
 1184 0126 0221     		movs	r1, #2
 1185 0128 2046     		mov	r0, r4
 1186 012a FFF7FEFF 		bl	VL53L1_get_device_results
 1187 012e 0646     		mov	r6, r0
 1188 0130 07E0     		b	.L140
 1189              	.L141:
 1190 0132 002E     		cmp	r6, #0
 1191 0134 56D0     		beq	.L161
 1192              	.L142:
 1193 0136 0135     		adds	r5, r5, #1
 1194 0138 ADB2     		uxth	r5, r5
 1195              	.L139:
 1196 013a BD42     		cmp	r5, r7
 1197 013c 5ED8     		bhi	.L162
 1198 013e 002E     		cmp	r6, #0
 1199 0140 EBD0     		beq	.L163
 1200              	.L140:
 1201 0142 04F58053 		add	r3, r4, #4096
 1202 0146 93F8A235 		ldrb	r3, [r3, #1442]	@ zero_extendqisi2
 1203 014a 002B     		cmp	r3, #0
 1204 014c F1D0     		beq	.L141
 1205 014e 04F5C043 		add	r3, r4, #24576
 1206 0152 93F88C3D 		ldrb	r3, [r3, #3468]	@ zero_extendqisi2
ARM GAS  C:\Temp\ccBeJPnu.s 			page 22


 1207 0156 AB42     		cmp	r3, r5
 1208 0158 EBD2     		bcs	.L141
 1209 015a 04F58053 		add	r3, r4, #4096
 1210 015e 93F8EE35 		ldrb	r3, [r3, #1518]	@ zero_extendqisi2
 1211 0162 092B     		cmp	r3, #9
 1212 0164 E5D1     		bne	.L141
 1213 0166 B4F8A234 		ldrh	r3, [r4, #1186]
 1214 016a 04F5C042 		add	r2, r4, #24576
 1215 016e A2F8863D 		strh	r3, [r2, #3462]	@ movhi
 1216 0172 B4F8C034 		ldrh	r3, [r4, #1216]
 1217 0176 A2F8883D 		strh	r3, [r2, #3464]	@ movhi
 1218 017a 04F5805C 		add	ip, r4, #4096
 1219 017e 9CF89215 		ldrb	r1, [ip, #1426]	@ zero_extendqisi2
 1220 0182 C1EBC103 		rsb	r3, r1, r1, lsl #3
 1221 0186 02EB8303 		add	r3, r2, r3, lsl #2
 1222 018a D3F8900D 		ldr	r0, [r3, #3472]
 1223 018e 0130     		adds	r0, r0, #1
 1224 0190 C3F8900D 		str	r0, [r3, #3472]
 1225 0194 D3F8940D 		ldr	r0, [r3, #3476]
 1226 0198 BCF8BAE5 		ldrh	lr, [ip, #1466]
 1227 019c 7044     		add	r0, r0, lr
 1228 019e C3F8940D 		str	r0, [r3, #3476]
 1229 01a2 D3F8980D 		ldr	r0, [r3, #3480]
 1230 01a6 BCF8D4E5 		ldrh	lr, [ip, #1492]
 1231 01aa 7044     		add	r0, r0, lr
 1232 01ac C3F8980D 		str	r0, [r3, #3480]
 1233 01b0 D3F89C0D 		ldr	r0, [r3, #3484]
 1234 01b4 BCF8E4E5 		ldrh	lr, [ip, #1508]
 1235 01b8 7044     		add	r0, r0, lr
 1236 01ba C3F89C0D 		str	r0, [r3, #3484]
 1237 01be D3F8A00D 		ldr	r0, [r3, #3488]
 1238 01c2 BCF8E0E5 		ldrh	lr, [ip, #1504]
 1239 01c6 7044     		add	r0, r0, lr
 1240 01c8 C3F8A00D 		str	r0, [r3, #3488]
 1241 01cc D3F8A43D 		ldr	r3, [r3, #3492]
 1242 01d0 BCF9EA05 		ldrsh	r0, [ip, #1514]
 1243 01d4 C1EBC101 		rsb	r1, r1, r1, lsl #3
 1244 01d8 02EB8102 		add	r2, r2, r1, lsl #2
 1245 01dc 0344     		add	r3, r3, r0
 1246 01de C2F8A43D 		str	r3, [r2, #3492]
 1247 01e2 A6E7     		b	.L141
 1248              	.L161:
 1249 01e4 2046     		mov	r0, r4
 1250 01e6 FFF7FEFF 		bl	VL53L1_wait_for_firmware_ready
 1251 01ea 0646     		mov	r6, r0
 1252 01ec 0028     		cmp	r0, #0
 1253 01ee A2D1     		bne	.L142
 1254 01f0 2021     		movs	r1, #32
 1255 01f2 2046     		mov	r0, r4
 1256 01f4 FFF7FEFF 		bl	VL53L1_clear_interrupt_and_enable_next_range
 1257 01f8 0646     		mov	r6, r0
 1258 01fa 9CE7     		b	.L142
 1259              	.L162:
 1260 01fc 6EB1     		cbz	r6, .L164
 1261              	.L144:
 1262 01fe 2046     		mov	r0, r4
 1263 0200 FFF7FEFF 		bl	VL53L1_unload_patch
ARM GAS  C:\Temp\ccBeJPnu.s 			page 23


 1264 0204 B6B1     		cbz	r6, .L165
 1265              	.L145:
 1266 0206 04F5C044 		add	r4, r4, #24576
 1267 020a 84F88A6D 		strb	r6, [r4, #3466]
 1268 020e 109B     		ldr	r3, [sp, #64]
 1269 0210 1E70     		strb	r6, [r3]
 1270 0212 3046     		mov	r0, r6
 1271 0214 07B0     		add	sp, sp, #28
 1272              		@ sp needed
 1273 0216 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1274              	.L164:
 1275 021a 2046     		mov	r0, r4
 1276 021c FFF7FEFF 		bl	VL53L1_stop_range
 1277 0220 0646     		mov	r6, r0
 1278 0222 0028     		cmp	r0, #0
 1279 0224 EBD1     		bne	.L144
 1280 0226 4FF47A71 		mov	r1, #1000
 1281 022a 2046     		mov	r0, r4
 1282 022c FFF7FEFF 		bl	VL53L1_WaitUs
 1283 0230 0646     		mov	r6, r0
 1284 0232 E4E7     		b	.L144
 1285              	.L165:
 1286 0234 04F5CB43 		add	r3, r4, #25984
 1287 0238 03F60802 		addw	r2, r3, #2056
 1288 023c 0292     		str	r2, [sp, #8]
 1289 023e 03F60603 		addw	r3, r3, #2054
 1290 0242 0193     		str	r3, [sp, #4]
 1291 0244 CDF80080 		str	r8, [sp]
 1292 0248 B4F83433 		ldrh	r3, [r4, #820]
 1293 024c 94F8A424 		ldrb	r2, [r4, #1188]	@ zero_extendqisi2
 1294 0250 2021     		movs	r1, #32
 1295 0252 2046     		mov	r0, r4
 1296 0254 FFF7FEFF 		bl	VL53L1_run_phasecal_average
 1297 0258 0646     		mov	r6, r0
 1298 025a 0028     		cmp	r0, #0
 1299 025c D3D1     		bne	.L145
 1300 025e 9DF81710 		ldrb	r1, [sp, #23]	@ zero_extendqisi2
 1301 0262 2046     		mov	r0, r4
 1302 0264 FFF7FEFF 		bl	VL53L1_set_offset_correction_mode
 1303 0268 0646     		mov	r6, r0
 1304 026a 0028     		cmp	r0, #0
 1305 026c CBD1     		bne	.L145
 1306 026e 0025     		movs	r5, #0
 1307 0270 63E0     		b	.L146
 1308              	.L166:
 1309 0272 04F5C040 		add	r0, r4, #24576
 1310 0276 00EB8207 		add	r7, r0, r2, lsl #2
 1311 027a D7F8942D 		ldr	r2, [r7, #3476]
 1312 027e 02EB5302 		add	r2, r2, r3, lsr #1
 1313 0282 C7F8942D 		str	r2, [r7, #3476]
 1314 0286 B2FBF3F2 		udiv	r2, r2, r3
 1315 028a C7F8942D 		str	r2, [r7, #3476]
 1316 028e D7F8982D 		ldr	r2, [r7, #3480]
 1317 0292 02EB5302 		add	r2, r2, r3, lsr #1
 1318 0296 C7F8982D 		str	r2, [r7, #3480]
 1319 029a B2FBF3F2 		udiv	r2, r2, r3
 1320 029e C7F8982D 		str	r2, [r7, #3480]
ARM GAS  C:\Temp\ccBeJPnu.s 			page 24


 1321 02a2 D7F89C1D 		ldr	r1, [r7, #3484]
 1322 02a6 01EB5301 		add	r1, r1, r3, lsr #1
 1323 02aa C7F89C1D 		str	r1, [r7, #3484]
 1324 02ae B1FBF3F1 		udiv	r1, r1, r3
 1325 02b2 C7F89C1D 		str	r1, [r7, #3484]
 1326 02b6 D7F8A02D 		ldr	r2, [r7, #3488]
 1327 02ba 02EB5302 		add	r2, r2, r3, lsr #1
 1328 02be C7F8A02D 		str	r2, [r7, #3488]
 1329 02c2 B2FBF3F2 		udiv	r2, r2, r3
 1330 02c6 C7F8A02D 		str	r2, [r7, #3488]
 1331 02ca 0023     		movs	r3, #0
 1332 02cc 0193     		str	r3, [sp, #4]
 1333 02ce 4FF40063 		mov	r3, #2048
 1334 02d2 0093     		str	r3, [sp]
 1335 02d4 0223     		movs	r3, #2
 1336 02d6 B0F8882D 		ldrh	r2, [r0, #3464]
 1337 02da 89B2     		uxth	r1, r1
 1338 02dc B4F83E03 		ldrh	r0, [r4, #830]
 1339 02e0 FFF7FEFF 		bl	VL53L1_range_maths
 1340 02e4 C7F8A40D 		str	r0, [r7, #3492]
 1341 02e8 4FEA8903 		lsl	r3, r9, #2
 1342 02ec C7F8A83D 		str	r3, [r7, #3496]
 1343 02f0 1B1A     		subs	r3, r3, r0
 1344 02f2 C7F8A83D 		str	r3, [r7, #3496]
 1345 02f6 D7F8902D 		ldr	r2, [r7, #3472]
 1346 02fa B4F83633 		ldrh	r3, [r4, #822]
 1347 02fe 9A42     		cmp	r2, r3
 1348 0300 01D2     		bcs	.L148
 1349 0302 6FF02206 		mvn	r6, #34
 1350              	.L148:
 1351 0306 04F5C043 		add	r3, r4, #24576
 1352 030a C8EBC802 		rsb	r2, r8, r8, lsl #3
 1353 030e 03EB8203 		add	r3, r3, r2, lsl #2
 1354 0312 D3F8A03D 		ldr	r3, [r3, #3488]
 1355 0316 B3F5006F 		cmp	r3, #2048
 1356 031a 01D9     		bls	.L149
 1357 031c 6FF02306 		mvn	r6, #35
 1358              	.L149:
 1359 0320 04F5C043 		add	r3, r4, #24576
 1360 0324 C8EBC808 		rsb	r8, r8, r8, lsl #3
 1361 0328 03EB8803 		add	r3, r3, r8, lsl #2
 1362 032c D3F8983D 		ldr	r3, [r3, #3480]
 1363 0330 B3F5C85F 		cmp	r3, #6400
 1364 0334 16D8     		bhi	.L155
 1365              	.L147:
 1366 0336 0135     		adds	r5, r5, #1
 1367 0338 EDB2     		uxtb	r5, r5
 1368              	.L146:
 1369 033a 04F5C043 		add	r3, r4, #24576
 1370 033e 93F88C3D 		ldrb	r3, [r3, #3468]	@ zero_extendqisi2
 1371 0342 AB42     		cmp	r3, r5
 1372 0344 7FF65FAF 		bls	.L145
 1373 0348 A846     		mov	r8, r5
 1374 034a 04F5C043 		add	r3, r4, #24576
 1375 034e C5EBC502 		rsb	r2, r5, r5, lsl #3
 1376 0352 03EB8203 		add	r3, r3, r2, lsl #2
 1377 0356 D3F8903D 		ldr	r3, [r3, #3472]
ARM GAS  C:\Temp\ccBeJPnu.s 			page 25


 1378 035a 002B     		cmp	r3, #0
 1379 035c 89D1     		bne	.L166
 1380 035e 6FF01906 		mvn	r6, #25
 1381 0362 E8E7     		b	.L147
 1382              	.L155:
 1383 0364 6FF02406 		mvn	r6, #36
 1384 0368 E5E7     		b	.L147
 1386              		.section	.text.VL53L1_run_device_test,"ax",%progbits
 1387              		.align	1
 1388              		.global	VL53L1_run_device_test
 1389              		.syntax unified
 1390              		.thumb
 1391              		.thumb_func
 1393              	VL53L1_run_device_test:
 1394              		@ args = 0, pretend = 0, frame = 8
 1395              		@ frame_needed = 0, uses_anonymous_args = 0
 1396 0000 30B5     		push	{r4, r5, lr}
 1397 0002 83B0     		sub	sp, sp, #12
 1398 0004 0446     		mov	r4, r0
 1399 0006 0D46     		mov	r5, r1
 1400 0008 0023     		movs	r3, #0
 1401 000a 8DF80330 		strb	r3, [sp, #3]
 1402 000e 0DF10302 		add	r2, sp, #3
 1403 0012 3021     		movs	r1, #48
 1404 0014 FFF7FEFF 		bl	VL53L1_RdByte
 1405 0018 0346     		mov	r3, r0
 1406 001a 50B1     		cbz	r0, .L172
 1407              	.L168:
 1408 001c 9BB1     		cbz	r3, .L173
 1409              	.L169:
 1410 001e 94F8C723 		ldrb	r2, [r4, #967]	@ zero_extendqisi2
 1411 0022 02F01F02 		and	r2, r2, #31
 1412 0026 84F8C723 		strb	r2, [r4, #967]
 1413 002a 23B3     		cbz	r3, .L174
 1414              	.L170:
 1415 002c 1846     		mov	r0, r3
 1416 002e 03B0     		add	sp, sp, #12
 1417              		@ sp needed
 1418 0030 30BD     		pop	{r4, r5, pc}
 1419              	.L172:
 1420 0032 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1421 0036 84F86A33 		strb	r3, [r4, #874]
 1422 003a 2946     		mov	r1, r5
 1423 003c 2046     		mov	r0, r4
 1424 003e FFF7FEFF 		bl	VL53L1_start_test
 1425 0042 0346     		mov	r3, r0
 1426 0044 EAE7     		b	.L168
 1427              	.L173:
 1428 0046 2046     		mov	r0, r4
 1429 0048 FFF7FEFF 		bl	VL53L1_wait_for_test_completion
 1430 004c 0346     		mov	r3, r0
 1431 004e 0028     		cmp	r0, #0
 1432 0050 E5D1     		bne	.L169
 1433 0052 0223     		movs	r3, #2
 1434 0054 01AA     		add	r2, sp, #4
 1435 0056 8921     		movs	r1, #137
 1436 0058 2046     		mov	r0, r4
ARM GAS  C:\Temp\ccBeJPnu.s 			page 26


 1437 005a FFF7FEFF 		bl	VL53L1_ReadMulti
 1438 005e 0346     		mov	r3, r0
 1439 0060 0028     		cmp	r0, #0
 1440 0062 DCD1     		bne	.L169
 1441 0064 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 1442 0068 84F8C723 		strb	r2, [r4, #967]
 1443 006c 9DF80520 		ldrb	r2, [sp, #5]	@ zero_extendqisi2
 1444 0070 84F8C823 		strb	r2, [r4, #968]
 1445 0074 D3E7     		b	.L169
 1446              	.L174:
 1447 0076 2046     		mov	r0, r4
 1448 0078 FFF7FEFF 		bl	VL53L1_clear_interrupt
 1449 007c 0346     		mov	r3, r0
 1450 007e 0028     		cmp	r0, #0
 1451 0080 D4D1     		bne	.L170
 1452 0082 0021     		movs	r1, #0
 1453 0084 2046     		mov	r0, r4
 1454 0086 FFF7FEFF 		bl	VL53L1_start_test
 1455 008a 0346     		mov	r3, r0
 1456 008c CEE7     		b	.L170
 1458              		.section	.text.VL53L1_run_ref_spad_char,"ax",%progbits
 1459              		.align	1
 1460              		.global	VL53L1_run_ref_spad_char
 1461              		.syntax unified
 1462              		.thumb
 1463              		.thumb_func
 1465              	VL53L1_run_ref_spad_char:
 1466              		@ args = 0, pretend = 0, frame = 8
 1467              		@ frame_needed = 0, uses_anonymous_args = 0
 1468 0000 30B5     		push	{r4, r5, lr}
 1469 0002 87B0     		sub	sp, sp, #28
 1470 0004 0446     		mov	r4, r0
 1471 0006 0D46     		mov	r5, r1
 1472 0008 FFF7FEFF 		bl	VL53L1_enable_powerforce
 1473 000c 0346     		mov	r3, r0
 1474 000e 20B1     		cbz	r0, .L181
 1475              	.L176:
 1476 0010 FBB1     		cbz	r3, .L182
 1477              	.L177:
 1478 0012 2B70     		strb	r3, [r5]
 1479 0014 1846     		mov	r0, r3
 1480 0016 07B0     		add	sp, sp, #28
 1481              		@ sp needed
 1482 0018 30BD     		pop	{r4, r5, pc}
 1483              	.L181:
 1484 001a B4F83E33 		ldrh	r3, [r4, #830]
 1485 001e 0293     		str	r3, [sp, #8]
 1486 0020 B4F86232 		ldrh	r3, [r4, #610]
 1487 0024 0193     		str	r3, [sp, #4]
 1488 0026 B4F86432 		ldrh	r3, [r4, #612]
 1489 002a 0093     		str	r3, [sp]
 1490 002c B4F86032 		ldrh	r3, [r4, #608]
 1491 0030 D4F85C22 		ldr	r2, [r4, #604]
 1492 0034 94F85912 		ldrb	r1, [r4, #601]	@ zero_extendqisi2
 1493 0038 2046     		mov	r0, r4
 1494 003a FFF7FEFF 		bl	VL53L1_set_ref_spad_char_config
 1495 003e 0346     		mov	r3, r0
ARM GAS  C:\Temp\ccBeJPnu.s 			page 27


 1496 0040 0028     		cmp	r0, #0
 1497 0042 E6D1     		bne	.L177
 1498 0044 94F85812 		ldrb	r1, [r4, #600]	@ zero_extendqisi2
 1499 0048 2046     		mov	r0, r4
 1500 004a FFF7FEFF 		bl	VL53L1_run_device_test
 1501 004e 0346     		mov	r3, r0
 1502 0050 DEE7     		b	.L176
 1503              	.L182:
 1504 0052 0223     		movs	r3, #2
 1505 0054 04AA     		add	r2, sp, #16
 1506 0056 D921     		movs	r1, #217
 1507 0058 2046     		mov	r0, r4
 1508 005a FFF7FEFF 		bl	VL53L1_ReadMulti
 1509 005e 0346     		mov	r3, r0
 1510 0060 0028     		cmp	r0, #0
 1511 0062 D6D1     		bne	.L177
 1512 0064 9DF81020 		ldrb	r2, [sp, #16]	@ zero_extendqisi2
 1513 0068 04F58053 		add	r3, r4, #4096
 1514 006c 83F8BF23 		strb	r2, [r3, #959]
 1515 0070 9DF81120 		ldrb	r2, [sp, #17]	@ zero_extendqisi2
 1516 0074 83F8C023 		strb	r2, [r3, #960]
 1517 0078 0223     		movs	r3, #2
 1518 007a 04AA     		add	r2, sp, #16
 1519 007c 1421     		movs	r1, #20
 1520 007e 2046     		mov	r0, r4
 1521 0080 FFF7FEFF 		bl	VL53L1_WriteMulti
 1522 0084 0346     		mov	r3, r0
 1523 0086 0028     		cmp	r0, #0
 1524 0088 C3D1     		bne	.L177
 1525 008a 9DF81030 		ldrb	r3, [sp, #16]	@ zero_extendqisi2
 1526 008e 84F86730 		strb	r3, [r4, #103]
 1527 0092 9DF81130 		ldrb	r3, [sp, #17]	@ zero_extendqisi2
 1528 0096 84F86830 		strb	r3, [r4, #104]
 1529 009a 0623     		movs	r3, #6
 1530 009c 04AA     		add	r2, sp, #16
 1531 009e AC21     		movs	r1, #172
 1532 00a0 2046     		mov	r0, r4
 1533 00a2 FFF7FEFF 		bl	VL53L1_ReadMulti
 1534 00a6 0346     		mov	r3, r0
 1535 00a8 0028     		cmp	r0, #0
 1536 00aa B2D1     		bne	.L177
 1537 00ac 0623     		movs	r3, #6
 1538 00ae 04AA     		add	r2, sp, #16
 1539 00b0 0D21     		movs	r1, #13
 1540 00b2 2046     		mov	r0, r4
 1541 00b4 FFF7FEFF 		bl	VL53L1_WriteMulti
 1542 00b8 0346     		mov	r3, r0
 1543 00ba 0028     		cmp	r0, #0
 1544 00bc A9D1     		bne	.L177
 1545 00be 9DF81020 		ldrb	r2, [sp, #16]	@ zero_extendqisi2
 1546 00c2 84F86020 		strb	r2, [r4, #96]
 1547 00c6 9DF81120 		ldrb	r2, [sp, #17]	@ zero_extendqisi2
 1548 00ca 84F86120 		strb	r2, [r4, #97]
 1549 00ce 9DF81220 		ldrb	r2, [sp, #18]	@ zero_extendqisi2
 1550 00d2 84F86220 		strb	r2, [r4, #98]
 1551 00d6 9DF81320 		ldrb	r2, [sp, #19]	@ zero_extendqisi2
 1552 00da 84F86320 		strb	r2, [r4, #99]
ARM GAS  C:\Temp\ccBeJPnu.s 			page 28


 1553 00de 9DF81420 		ldrb	r2, [sp, #20]	@ zero_extendqisi2
 1554 00e2 84F86420 		strb	r2, [r4, #100]
 1555 00e6 9DF81520 		ldrb	r2, [sp, #21]	@ zero_extendqisi2
 1556 00ea 84F86520 		strb	r2, [r4, #101]
 1557 00ee 94F8C723 		ldrb	r2, [r4, #967]	@ zero_extendqisi2
 1558 00f2 0F2A     		cmp	r2, #15
 1559 00f4 06D0     		beq	.L178
 1560 00f6 102A     		cmp	r2, #16
 1561 00f8 07D0     		beq	.L179
 1562 00fa 0E2A     		cmp	r2, #14
 1563 00fc 89D1     		bne	.L177
 1564 00fe 6FF01B03 		mvn	r3, #27
 1565 0102 86E7     		b	.L177
 1566              	.L178:
 1567 0104 6FF01C03 		mvn	r3, #28
 1568 0108 83E7     		b	.L177
 1569              	.L179:
 1570 010a 6FF01D03 		mvn	r3, #29
 1571 010e 80E7     		b	.L177
 1573              		.section	.text.VL53L1_run_spad_rate_map,"ax",%progbits
 1574              		.align	1
 1575              		.global	VL53L1_run_spad_rate_map
 1576              		.syntax unified
 1577              		.thumb
 1578              		.thumb_func
 1580              	VL53L1_run_spad_rate_map:
 1581              		@ args = 4, pretend = 0, frame = 0
 1582              		@ frame_needed = 0, uses_anonymous_args = 0
 1583 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1584 0004 0546     		mov	r5, r0
 1585 0006 0E46     		mov	r6, r1
 1586 0008 9046     		mov	r8, r2
 1587 000a 1F46     		mov	r7, r3
 1588 000c DDF82090 		ldr	r9, [sp, #32]
 1589 0010 FFF7FEFF 		bl	VL53L1_enable_powerforce
 1590 0014 0446     		mov	r4, r0
 1591 0016 48B1     		cbz	r0, .L190
 1592              	.L184:
 1593 0018 E4B1     		cbz	r4, .L191
 1594              	.L185:
 1595 001a 062E     		cmp	r6, #6
 1596 001c 20D0     		beq	.L192
 1597 001e 0F23     		movs	r3, #15
 1598 0020 89F80632 		strb	r3, [r9, #518]
 1599              	.L187:
 1600 0024 04B3     		cbz	r4, .L193
 1601              	.L188:
 1602 0026 2046     		mov	r0, r4
 1603 0028 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1604              	.L190:
 1605 002c 85F86882 		strb	r8, [r5, #616]
 1606 0030 C5F86C72 		str	r7, [r5, #620]
 1607 0034 B5F83E23 		ldrh	r2, [r5, #830]
 1608 0038 05F51A71 		add	r1, r5, #616
 1609 003c 2846     		mov	r0, r5
 1610 003e FFF7FEFF 		bl	VL53L1_set_ssc_config
 1611 0042 0446     		mov	r4, r0
ARM GAS  C:\Temp\ccBeJPnu.s 			page 29


 1612 0044 0028     		cmp	r0, #0
 1613 0046 E8D1     		bne	.L185
 1614 0048 3146     		mov	r1, r6
 1615 004a 2846     		mov	r0, r5
 1616 004c FFF7FEFF 		bl	VL53L1_run_device_test
 1617 0050 0446     		mov	r4, r0
 1618 0052 E1E7     		b	.L184
 1619              	.L191:
 1620 0054 4946     		mov	r1, r9
 1621 0056 2846     		mov	r0, r5
 1622 0058 FFF7FEFF 		bl	VL53L1_get_spad_rate_data
 1623 005c 0446     		mov	r4, r0
 1624 005e DCE7     		b	.L185
 1625              	.L192:
 1626 0060 0723     		movs	r3, #7
 1627 0062 89F80632 		strb	r3, [r9, #518]
 1628 0066 DDE7     		b	.L187
 1629              	.L193:
 1630 0068 2846     		mov	r0, r5
 1631 006a FFF7FEFF 		bl	VL53L1_disable_powerforce
 1632 006e 0446     		mov	r4, r0
 1633 0070 D9E7     		b	.L188
 1635              		.section	.text.VL53L1_hist_xtalk_extract_data_init,"ax",%progbits
 1636              		.align	1
 1637              		.global	VL53L1_hist_xtalk_extract_data_init
 1638              		.syntax unified
 1639              		.thumb
 1640              		.thumb_func
 1642              	VL53L1_hist_xtalk_extract_data_init:
 1643              		@ args = 0, pretend = 0, frame = 0
 1644              		@ frame_needed = 0, uses_anonymous_args = 0
 1645              		@ link register save eliminated.
 1646 0000 0023     		movs	r3, #0
 1647 0002 0360     		str	r3, [r0]
 1648 0004 4360     		str	r3, [r0, #4]
 1649 0006 8360     		str	r3, [r0, #8]
 1650 0008 C360     		str	r3, [r0, #12]
 1651 000a 0361     		str	r3, [r0, #16]
 1652 000c 4361     		str	r3, [r0, #20]
 1653 000e 8361     		str	r3, [r0, #24]
 1654 0010 4FF48052 		mov	r2, #4096
 1655 0014 C261     		str	r2, [r0, #28]
 1656 0016 0362     		str	r3, [r0, #32]
 1657 0018 4362     		str	r3, [r0, #36]
 1658 001a 80F84830 		strb	r3, [r0, #72]
 1659 001e 80F84930 		strb	r3, [r0, #73]
 1660 0022 80F84A30 		strb	r3, [r0, #74]
 1661 0026 05E0     		b	.L195
 1662              	.L196:
 1663 0028 03F11402 		add	r2, r3, #20
 1664 002c 0021     		movs	r1, #0
 1665 002e 40F82210 		str	r1, [r0, r2, lsl #2]
 1666 0032 0133     		adds	r3, r3, #1
 1667              	.L195:
 1668 0034 0B2B     		cmp	r3, #11
 1669 0036 F7DD     		ble	.L196
 1670 0038 7047     		bx	lr
ARM GAS  C:\Temp\ccBeJPnu.s 			page 30


 1672              		.section	.text.VL53L1_hist_xtalk_extract_update,"ax",%progbits
 1673              		.align	1
 1674              		.global	VL53L1_hist_xtalk_extract_update
 1675              		.syntax unified
 1676              		.thumb
 1677              		.thumb_func
 1679              	VL53L1_hist_xtalk_extract_update:
 1680              		@ args = 0, pretend = 0, frame = 0
 1681              		@ frame_needed = 0, uses_anonymous_args = 0
 1682 0000 38B5     		push	{r3, r4, r5, lr}
 1683 0002 1446     		mov	r4, r2
 1684 0004 1D46     		mov	r5, r3
 1685 0006 FFF7FEFF 		bl	VL53L1_hist_xtalk_extract_calc_window
 1686 000a 00B1     		cbz	r0, .L200
 1687              	.L198:
 1688 000c 38BD     		pop	{r3, r4, r5, pc}
 1689              	.L200:
 1690 000e 2946     		mov	r1, r5
 1691 0010 2046     		mov	r0, r4
 1692 0012 FFF7FEFF 		bl	VL53L1_hist_xtalk_extract_calc_event_sums
 1693 0016 F9E7     		b	.L198
 1695              		.section	.text.VL53L1_hist_xtalk_extract_fini,"ax",%progbits
 1696              		.align	1
 1697              		.global	VL53L1_hist_xtalk_extract_fini
 1698              		.syntax unified
 1699              		.thumb
 1700              		.thumb_func
 1702              	VL53L1_hist_xtalk_extract_fini:
 1703              		@ args = 0, pretend = 0, frame = 0
 1704              		@ frame_needed = 0, uses_anonymous_args = 0
 1705 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1706 0002 1D46     		mov	r5, r3
 1707 0004 0B68     		ldr	r3, [r1]
 1708 0006 0BB9     		cbnz	r3, .L205
 1709 0008 0020     		movs	r0, #0
 1710              	.L202:
 1711 000a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1712              	.L205:
 1713 000c 0646     		mov	r6, r0
 1714 000e 0C46     		mov	r4, r1
 1715 0010 1746     		mov	r7, r2
 1716 0012 8A69     		ldr	r2, [r1, #24]
 1717 0014 CA61     		str	r2, [r1, #28]
 1718 0016 02EB5302 		add	r2, r2, r3, lsr #1
 1719 001a CA61     		str	r2, [r1, #28]
 1720 001c B2FBF3F2 		udiv	r2, r2, r3
 1721 0020 CA61     		str	r2, [r1, #28]
 1722 0022 0846     		mov	r0, r1
 1723 0024 FFF7FEFF 		bl	VL53L1_hist_xtalk_extract_calc_rate_per_spad
 1724 0028 0028     		cmp	r0, #0
 1725 002a EED1     		bne	.L202
 1726 002c 2369     		ldr	r3, [r4, #16]
 1727 002e 6361     		str	r3, [r4, #20]
 1728 0030 2268     		ldr	r2, [r4]
 1729 0032 03EB5203 		add	r3, r3, r2, lsr #1
 1730 0036 6361     		str	r3, [r4, #20]
 1731 0038 B3FBF2F3 		udiv	r3, r3, r2
ARM GAS  C:\Temp\ccBeJPnu.s 			page 31


 1732 003c 6361     		str	r3, [r4, #20]
 1733 003e 2946     		mov	r1, r5
 1734 0040 2046     		mov	r0, r4
 1735 0042 FFF7FEFF 		bl	VL53L1_hist_xtalk_extract_calc_shape
 1736 0046 96F88020 		ldrb	r2, [r6, #128]	@ zero_extendqisi2
 1737 004a 85F83E20 		strb	r2, [r5, #62]
 1738 004e 96F88120 		ldrb	r2, [r6, #129]	@ zero_extendqisi2
 1739 0052 85F83F20 		strb	r2, [r5, #63]
 1740 0056 B6F88220 		ldrh	r2, [r6, #130]
 1741 005a A5F84020 		strh	r2, [r5, #64]	@ movhi
 1742 005e B6F88620 		ldrh	r2, [r6, #134]
 1743 0062 A5F84220 		strh	r2, [r5, #66]	@ movhi
 1744 0066 0028     		cmp	r0, #0
 1745 0068 CFD1     		bne	.L202
 1746 006a 636A     		ldr	r3, [r4, #36]
 1747 006c 3B60     		str	r3, [r7]
 1748 006e 0023     		movs	r3, #0
 1749 0070 BB80     		strh	r3, [r7, #4]	@ movhi
 1750 0072 FB80     		strh	r3, [r7, #6]	@ movhi
 1751 0074 C9E7     		b	.L202
 1753              		.section	.text.VL53L1_run_hist_xtalk_extraction,"ax",%progbits
 1754              		.align	1
 1755              		.global	VL53L1_run_hist_xtalk_extraction
 1756              		.syntax unified
 1757              		.thumb
 1758              		.thumb_func
 1760              	VL53L1_run_hist_xtalk_extraction:
 1761              		@ args = 0, pretend = 0, frame = 56
 1762              		@ frame_needed = 0, uses_anonymous_args = 0
 1763 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1764 0004 93B0     		sub	sp, sp, #76
 1765 0006 0546     		mov	r5, r0
 1766 0008 0591     		str	r1, [sp, #20]
 1767 000a 0992     		str	r2, [sp, #36]
 1768 000c 00F59453 		add	r3, r0, #4736
 1769 0010 1C33     		adds	r3, r3, #28
 1770 0012 0893     		str	r3, [sp, #32]
 1771 0014 0023     		movs	r3, #0
 1772 0016 1193     		str	r3, [sp, #68]
 1773 0018 1093     		str	r3, [sp, #64]
 1774 001a 00F5AC53 		add	r3, r0, #5504
 1775 001e 1033     		adds	r3, r3, #16
 1776 0020 0793     		str	r3, [sp, #28]
 1777 0022 90F819B0 		ldrb	fp, [r0, #25]	@ zero_extendqisi2
 1778 0026 D0F82C90 		ldr	r9, [r0, #44]
 1779 002a 6423     		movs	r3, #100
 1780 002c 0293     		str	r3, [sp, #8]
 1781 002e D0F8DC32 		ldr	r3, [r0, #732]
 1782 0032 0193     		str	r3, [sp, #4]
 1783 0034 D0F8D832 		ldr	r3, [r0, #728]
 1784 0038 0093     		str	r3, [sp]
 1785 003a D0F8D432 		ldr	r3, [r0, #724]
 1786 003e B0F8D022 		ldrh	r2, [r0, #720]
 1787 0042 1B21     		movs	r1, #27
 1788 0044 FFF7FEFF 		bl	VL53L1_set_preset_mode
 1789 0048 40B3     		cbz	r0, .L207
 1790 004a 0646     		mov	r6, r0
ARM GAS  C:\Temp\ccBeJPnu.s 			page 32


 1791 004c 05F58053 		add	r3, r5, #4096
 1792 0050 93F8F483 		ldrb	r8, [r3, #1012]	@ zero_extendqisi2
 1793              	.L208:
 1794 0054 2846     		mov	r0, r5
 1795 0056 FFF7FEFF 		bl	VL53L1_load_patch
 1796 005a 11AA     		add	r2, sp, #68
 1797 005c 48F28F01 		movw	r1, #32911
 1798 0060 2846     		mov	r0, r5
 1799 0062 FFF7FEFF 		bl	VL53L1_get_tuning_parm
 1800 0066 10AA     		add	r2, sp, #64
 1801 0068 48F28D01 		movw	r1, #32909
 1802 006c 2846     		mov	r0, r5
 1803 006e FFF7FEFF 		bl	VL53L1_get_tuning_parm
 1804 0072 2022     		movs	r2, #32
 1805 0074 0021     		movs	r1, #0
 1806 0076 0898     		ldr	r0, [sp, #32]
 1807 0078 FFF7FEFF 		bl	memset
 1808 007c EEB1     		cbz	r6, .L230
 1809              	.L209:
 1810 007e 95F8D431 		ldrb	r3, [r5, #468]	@ zero_extendqisi2
 1811 0082 013B     		subs	r3, r3, #1
 1812 0084 5CB2     		sxtb	r4, r3
 1813 0086 109B     		ldr	r3, [sp, #64]
 1814 0088 F3B9     		cbnz	r3, .L225
 1815 008a 0123     		movs	r3, #1
 1816 008c 0693     		str	r3, [sp, #24]
 1817              	.L210:
 1818 008e 0027     		movs	r7, #0
 1819 0090 CDF828B0 		str	fp, [sp, #40]
 1820 0094 CDF82C90 		str	r9, [sp, #44]
 1821 0098 C146     		mov	r9, r8
 1822 009a 64E0     		b	.L211
 1823              	.L207:
 1824 009c 2846     		mov	r0, r5
 1825 009e FFF7FEFF 		bl	VL53L1_disable_xtalk_compensation
 1826 00a2 05F58053 		add	r3, r5, #4096
 1827 00a6 93F8F483 		ldrb	r8, [r3, #1012]	@ zero_extendqisi2
 1828 00aa 0646     		mov	r6, r0
 1829 00ac 0028     		cmp	r0, #0
 1830 00ae D1D1     		bne	.L208
 1831 00b0 2846     		mov	r0, r5
 1832 00b2 FFF7FEFF 		bl	VL53L1_dynamic_xtalk_correction_disable
 1833 00b6 0646     		mov	r6, r0
 1834 00b8 CCE7     		b	.L208
 1835              	.L230:
 1836 00ba 0522     		movs	r2, #5
 1837 00bc 2021     		movs	r1, #32
 1838 00be 2846     		mov	r0, r5
 1839 00c0 FFF7FEFF 		bl	VL53L1_init_and_start_range
 1840 00c4 0646     		mov	r6, r0
 1841 00c6 DAE7     		b	.L209
 1842              	.L225:
 1843 00c8 0223     		movs	r3, #2
 1844 00ca 0693     		str	r3, [sp, #24]
 1845 00cc DFE7     		b	.L210
 1846              	.L234:
 1847 00ce 2846     		mov	r0, r5
ARM GAS  C:\Temp\ccBeJPnu.s 			page 33


 1848 00d0 FFF7FEFF 		bl	VL53L1_wait_for_range_completion
 1849 00d4 0646     		mov	r6, r0
 1850 00d6 A8B9     		cbnz	r0, .L213
 1851 00d8 079A     		ldr	r2, [sp, #28]
 1852 00da 0221     		movs	r1, #2
 1853 00dc 2846     		mov	r0, r5
 1854 00de FFF7FEFF 		bl	VL53L1_get_device_results
 1855 00e2 0646     		mov	r6, r0
 1856 00e4 0EE0     		b	.L213
 1857              	.L214:
 1858 00e6 1EB9     		cbnz	r6, .L216
 1859 00e8 BBF1060F 		cmp	fp, #6
 1860 00ec 21D1     		bne	.L231
 1861              	.L215:
 1862 00ee 4EB3     		cbz	r6, .L232
 1863              	.L216:
 1864 00f0 08F10108 		add	r8, r8, #1
 1865 00f4 5FFA88F8 		uxtb	r8, r8
 1866              	.L212:
 1867 00f8 95F8E032 		ldrb	r3, [r5, #736]	@ zero_extendqisi2
 1868 00fc 4345     		cmp	r3, r8
 1869 00fe 2DD3     		bcc	.L233
 1870 0100 002E     		cmp	r6, #0
 1871 0102 E4D0     		beq	.L234
 1872              	.L213:
 1873 0104 95F84BB0 		ldrb	fp, [r5, #75]	@ zero_extendqisi2
 1874 0108 0DF13F01 		add	r1, sp, #63
 1875 010c 2846     		mov	r0, r5
 1876 010e FFF7FEFF 		bl	VL53L1_compute_histo_merge_nb
 1877 0112 002F     		cmp	r7, #0
 1878 0114 E7D0     		beq	.L214
 1879 0116 109B     		ldr	r3, [sp, #64]
 1880 0118 002B     		cmp	r3, #0
 1881 011a E4D0     		beq	.L214
 1882 011c 002E     		cmp	r6, #0
 1883 011e E2D1     		bne	.L214
 1884 0120 95F8D421 		ldrb	r2, [r5, #468]	@ zero_extendqisi2
 1885 0124 9DF83F30 		ldrb	r3, [sp, #63]	@ zero_extendqisi2
 1886 0128 9A42     		cmp	r2, r3
 1887 012a DCD9     		bls	.L214
 1888 012c 4FF00008 		mov	r8, #0
 1889 0130 DDE7     		b	.L215
 1890              	.L231:
 1891 0132 5346     		mov	r3, r10
 1892 0134 05F22442 		addw	r2, r5, #1060
 1893 0138 0421     		movs	r1, #4
 1894 013a 0598     		ldr	r0, [sp, #20]
 1895 013c FFF7FEFF 		bl	VL53L1_hist_xtalk_extract_update
 1896 0140 0646     		mov	r6, r0
 1897 0142 D4E7     		b	.L215
 1898              	.L232:
 1899 0144 2846     		mov	r0, r5
 1900 0146 FFF7FEFF 		bl	VL53L1_wait_for_firmware_ready
 1901 014a 0646     		mov	r6, r0
 1902 014c 0028     		cmp	r0, #0
 1903 014e CFD1     		bne	.L216
 1904 0150 2021     		movs	r1, #32
ARM GAS  C:\Temp\ccBeJPnu.s 			page 34


 1905 0152 2846     		mov	r0, r5
 1906 0154 FFF7FEFF 		bl	VL53L1_clear_interrupt_and_enable_next_range
 1907 0158 0646     		mov	r6, r0
 1908 015a C9E7     		b	.L216
 1909              	.L233:
 1910 015c DDF810B0 		ldr	fp, [sp, #16]
 1911 0160 CEB1     		cbz	r6, .L235
 1912              	.L218:
 1913 0162 0137     		adds	r7, r7, #1
 1914 0164 7FB2     		sxtb	r7, r7
 1915              	.L211:
 1916 0166 069B     		ldr	r3, [sp, #24]
 1917 0168 9F42     		cmp	r7, r3
 1918 016a 2ADA     		bge	.L236
 1919 016c 05F5955A 		add	r10, r5, #4768
 1920 0170 0AF11C0A 		add	r10, r10, #28
 1921 0174 5046     		mov	r0, r10
 1922 0176 FFF7FEFF 		bl	VL53L1_hist_xtalk_extract_data_init
 1923 017a 07FB04FB 		mul	fp, r7, r4
 1924 017e 0BF10102 		add	r2, fp, #1
 1925 0182 48F28F01 		movw	r1, #32911
 1926 0186 2846     		mov	r0, r5
 1927 0188 FFF7FEFF 		bl	VL53L1_set_tuning_parm
 1928 018c 4FF00008 		mov	r8, #0
 1929 0190 CDF810B0 		str	fp, [sp, #16]
 1930 0194 B0E7     		b	.L212
 1931              	.L235:
 1932 0196 05F27C53 		addw	r3, r5, #1404
 1933 019a 089A     		ldr	r2, [sp, #32]
 1934 019c 5146     		mov	r1, r10
 1935 019e 05F22440 		addw	r0, r5, #1060
 1936 01a2 FFF7FEFF 		bl	VL53L1_hist_xtalk_extract_fini
 1937 01a6 0646     		mov	r6, r0
 1938 01a8 0028     		cmp	r0, #0
 1939 01aa DAD1     		bne	.L218
 1940 01ac 05F58053 		add	r3, r5, #4096
 1941 01b0 D3F89C22 		ldr	r2, [r3, #668]
 1942 01b4 0BF1020B 		add	fp, fp, #2
 1943 01b8 03EB8B03 		add	r3, r3, fp, lsl #2
 1944 01bc C3F89C22 		str	r2, [r3, #668]
 1945 01c0 CFE7     		b	.L218
 1946              	.L236:
 1947 01c2 C846     		mov	r8, r9
 1948 01c4 DDF828B0 		ldr	fp, [sp, #40]
 1949 01c8 DDF82C90 		ldr	r9, [sp, #44]
 1950 01cc 2846     		mov	r0, r5
 1951 01ce FFF7FEFF 		bl	VL53L1_stop_range
 1952 01d2 119A     		ldr	r2, [sp, #68]
 1953 01d4 48F28F01 		movw	r1, #32911
 1954 01d8 2846     		mov	r0, r5
 1955 01da FFF7FEFF 		bl	VL53L1_set_tuning_parm
 1956 01de 2846     		mov	r0, r5
 1957 01e0 FFF7FEFF 		bl	VL53L1_unload_patch
 1958 01e4 0CAB     		add	r3, sp, #48
 1959 01e6 0193     		str	r3, [sp, #4]
 1960 01e8 0DAB     		add	r3, sp, #52
 1961 01ea 0093     		str	r3, [sp]
ARM GAS  C:\Temp\ccBeJPnu.s 			page 35


 1962 01ec 0EAB     		add	r3, sp, #56
 1963 01ee 0FAA     		add	r2, sp, #60
 1964 01f0 5946     		mov	r1, fp
 1965 01f2 2846     		mov	r0, r5
 1966 01f4 FFF7FEFF 		bl	VL53L1_get_preset_mode_timing_cfg
 1967 01f8 CDF80890 		str	r9, [sp, #8]
 1968 01fc 0C9B     		ldr	r3, [sp, #48]
 1969 01fe 0193     		str	r3, [sp, #4]
 1970 0200 0D9B     		ldr	r3, [sp, #52]
 1971 0202 0093     		str	r3, [sp]
 1972 0204 0E9B     		ldr	r3, [sp, #56]
 1973 0206 BDF83C20 		ldrh	r2, [sp, #60]
 1974 020a 5946     		mov	r1, fp
 1975 020c 2846     		mov	r0, r5
 1976 020e FFF7FEFF 		bl	VL53L1_set_preset_mode
 1977 0212 A6BB     		cbnz	r6, .L227
 1978 0214 109B     		ldr	r3, [sp, #64]
 1979 0216 012B     		cmp	r3, #1
 1980 0218 0ED0     		beq	.L237
 1981              	.L221:
 1982 021a 05F58053 		add	r3, r5, #4096
 1983 021e B3F9A022 		ldrsh	r2, [r3, #672]
 1984 0222 A5F8F022 		strh	r2, [r5, #752]	@ movhi
 1985 0226 B3F9A222 		ldrsh	r2, [r3, #674]
 1986 022a A5F8F222 		strh	r2, [r5, #754]	@ movhi
 1987 022e D3F89C32 		ldr	r3, [r3, #668]
 1988 0232 C5F8EC32 		str	r3, [r5, #748]
 1989 0236 24E0     		b	.L220
 1990              	.L237:
 1991 0238 002C     		cmp	r4, #0
 1992 023a EEDD     		ble	.L221
 1993 023c 05F58052 		add	r2, r5, #4096
 1994 0240 D2F8A402 		ldr	r0, [r2, #676]
 1995 0244 A31C     		adds	r3, r4, #2
 1996 0246 02EB8303 		add	r3, r2, r3, lsl #2
 1997 024a D3F89C32 		ldr	r3, [r3, #668]
 1998 024e C2F89C02 		str	r0, [r2, #668]
 1999 0252 9842     		cmp	r0, r3
 2000 0254 22D8     		bhi	.L228
 2001 0256 1B1A     		subs	r3, r3, r0
 2002 0258 B3FBF4F1 		udiv	r1, r3, r4
 2003 025c 0123     		movs	r3, #1
 2004 025e 0BE0     		b	.L222
 2005              	.L223:
 2006 0260 01FB0307 		mla	r7, r1, r3, r0
 2007 0264 05F58052 		add	r2, r5, #4096
 2008 0268 03F1020C 		add	ip, r3, #2
 2009 026c 02EB8C02 		add	r2, r2, ip, lsl #2
 2010 0270 C2F89C72 		str	r7, [r2, #668]
 2011 0274 0133     		adds	r3, r3, #1
 2012 0276 5BB2     		sxtb	r3, r3
 2013              	.L222:
 2014 0278 A342     		cmp	r3, r4
 2015 027a F1DB     		blt	.L223
 2016 027c CDE7     		b	.L221
 2017              	.L227:
 2018 027e 6FF01606 		mvn	r6, #22
ARM GAS  C:\Temp\ccBeJPnu.s 			page 36


 2019              	.L220:
 2020 0282 85F87066 		strb	r6, [r5, #1648]
 2021 0286 099B     		ldr	r3, [sp, #36]
 2022 0288 1E70     		strb	r6, [r3]
 2023 028a 2846     		mov	r0, r5
 2024 028c FFF7FEFF 		bl	VL53L1_enable_xtalk_compensation
 2025 0290 B8F1010F 		cmp	r8, #1
 2026 0294 05D0     		beq	.L238
 2027              	.L224:
 2028 0296 13B0     		add	sp, sp, #76
 2029              		@ sp needed
 2030 0298 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2031              	.L228:
 2032 029c 6FF01606 		mvn	r6, #22
 2033 02a0 EFE7     		b	.L220
 2034              	.L238:
 2035 02a2 2846     		mov	r0, r5
 2036 02a4 FFF7FEFF 		bl	VL53L1_dynamic_xtalk_correction_enable
 2037 02a8 F5E7     		b	.L224
 2039              		.ident	"GCC: (xPack GNU Arm Embedded GCC x86_64) 12.3.1 20230626"
ARM GAS  C:\Temp\ccBeJPnu.s 			page 37


DEFINED SYMBOLS
                            *ABS*:00000000 vl53l1_api_calibration.c
  C:\Temp\ccBeJPnu.s:18     .text.VL53L1_get_and_avg_xtalk_samples:00000000 $t
  C:\Temp\ccBeJPnu.s:24     .text.VL53L1_get_and_avg_xtalk_samples:00000000 VL53L1_get_and_avg_xtalk_samples
  C:\Temp\ccBeJPnu.s:279    .text.VL53L1_run_xtalk_extraction:00000000 $t
  C:\Temp\ccBeJPnu.s:285    .text.VL53L1_run_xtalk_extraction:00000000 VL53L1_run_xtalk_extraction
  C:\Temp\ccBeJPnu.s:515    .text.VL53L1_run_offset_calibration:00000000 $t
  C:\Temp\ccBeJPnu.s:521    .text.VL53L1_run_offset_calibration:00000000 VL53L1_run_offset_calibration
  C:\Temp\ccBeJPnu.s:934    .text.VL53L1_run_phasecal_average:00000000 $t
  C:\Temp\ccBeJPnu.s:940    .text.VL53L1_run_phasecal_average:00000000 VL53L1_run_phasecal_average
  C:\Temp\ccBeJPnu.s:1065   .text.VL53L1_run_zone_calibration:00000000 $t
  C:\Temp\ccBeJPnu.s:1071   .text.VL53L1_run_zone_calibration:00000000 VL53L1_run_zone_calibration
  C:\Temp\ccBeJPnu.s:1387   .text.VL53L1_run_device_test:00000000 $t
  C:\Temp\ccBeJPnu.s:1393   .text.VL53L1_run_device_test:00000000 VL53L1_run_device_test
  C:\Temp\ccBeJPnu.s:1459   .text.VL53L1_run_ref_spad_char:00000000 $t
  C:\Temp\ccBeJPnu.s:1465   .text.VL53L1_run_ref_spad_char:00000000 VL53L1_run_ref_spad_char
  C:\Temp\ccBeJPnu.s:1574   .text.VL53L1_run_spad_rate_map:00000000 $t
  C:\Temp\ccBeJPnu.s:1580   .text.VL53L1_run_spad_rate_map:00000000 VL53L1_run_spad_rate_map
  C:\Temp\ccBeJPnu.s:1636   .text.VL53L1_hist_xtalk_extract_data_init:00000000 $t
  C:\Temp\ccBeJPnu.s:1642   .text.VL53L1_hist_xtalk_extract_data_init:00000000 VL53L1_hist_xtalk_extract_data_init
  C:\Temp\ccBeJPnu.s:1673   .text.VL53L1_hist_xtalk_extract_update:00000000 $t
  C:\Temp\ccBeJPnu.s:1679   .text.VL53L1_hist_xtalk_extract_update:00000000 VL53L1_hist_xtalk_extract_update
  C:\Temp\ccBeJPnu.s:1696   .text.VL53L1_hist_xtalk_extract_fini:00000000 $t
  C:\Temp\ccBeJPnu.s:1702   .text.VL53L1_hist_xtalk_extract_fini:00000000 VL53L1_hist_xtalk_extract_fini
  C:\Temp\ccBeJPnu.s:1754   .text.VL53L1_run_hist_xtalk_extraction:00000000 $t
  C:\Temp\ccBeJPnu.s:1760   .text.VL53L1_run_hist_xtalk_extraction:00000000 VL53L1_run_hist_xtalk_extraction

UNDEFINED SYMBOLS
VL53L1_dynamic_xtalk_correction_disable
VL53L1_load_patch
VL53L1_init_and_start_range
VL53L1_wait_for_range_completion
VL53L1_get_device_results
VL53L1_sum_histogram_data
VL53L1_wait_for_firmware_ready
VL53L1_clear_interrupt_and_enable_next_range
VL53L1_unload_patch
VL53L1_stop_range
memcpy
VL53L1_avg_histogram_data
VL53L1_dynamic_xtalk_correction_enable
VL53L1_init_histogram_bin_data_struct
VL53L1_set_preset_mode
VL53L1_disable_xtalk_compensation
VL53L1_enable_xtalk_compensation
VL53L1_ipp_xtalk_calibration_process_data
VL53L1_WaitUs
VL53L1_set_customer_nvm_managed
VL53L1_decode_vcsel_period
VL53L1_set_zone_preset
VL53L1_set_zone_config
VL53L1_get_offset_correction_mode
VL53L1_set_offset_correction_mode
VL53L1_range_maths
VL53L1_RdByte
VL53L1_start_test
VL53L1_wait_for_test_completion
ARM GAS  C:\Temp\ccBeJPnu.s 			page 38


VL53L1_ReadMulti
VL53L1_clear_interrupt
VL53L1_enable_powerforce
VL53L1_set_ref_spad_char_config
VL53L1_WriteMulti
VL53L1_set_ssc_config
VL53L1_get_spad_rate_data
VL53L1_disable_powerforce
VL53L1_hist_xtalk_extract_calc_window
VL53L1_hist_xtalk_extract_calc_event_sums
VL53L1_hist_xtalk_extract_calc_rate_per_spad
VL53L1_hist_xtalk_extract_calc_shape
VL53L1_get_tuning_parm
memset
VL53L1_compute_histo_merge_nb
VL53L1_set_tuning_parm
VL53L1_get_preset_mode_timing_cfg
